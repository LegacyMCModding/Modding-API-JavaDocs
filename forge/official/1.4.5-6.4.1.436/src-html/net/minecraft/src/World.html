<HTML>
<BODY BGCOLOR="white">
<PRE>
<FONT color="green">001</FONT>    package net.minecraft.src;<a name="line.1"></a>
<FONT color="green">002</FONT>    <a name="line.2"></a>
<FONT color="green">003</FONT>    import cpw.mods.fml.common.Side;<a name="line.3"></a>
<FONT color="green">004</FONT>    import cpw.mods.fml.common.asm.SideOnly;<a name="line.4"></a>
<FONT color="green">005</FONT>    import java.util.ArrayList;<a name="line.5"></a>
<FONT color="green">006</FONT>    import java.util.Calendar;<a name="line.6"></a>
<FONT color="green">007</FONT>    import java.util.Collection;<a name="line.7"></a>
<FONT color="green">008</FONT>    import java.util.HashSet;<a name="line.8"></a>
<FONT color="green">009</FONT>    import java.util.Iterator;<a name="line.9"></a>
<FONT color="green">010</FONT>    import java.util.List;<a name="line.10"></a>
<FONT color="green">011</FONT>    import java.util.Random;<a name="line.11"></a>
<FONT color="green">012</FONT>    import java.util.Set;<a name="line.12"></a>
<FONT color="green">013</FONT>    <a name="line.13"></a>
<FONT color="green">014</FONT>    import com.google.common.collect.ImmutableSetMultimap;<a name="line.14"></a>
<FONT color="green">015</FONT>    <a name="line.15"></a>
<FONT color="green">016</FONT>    import net.minecraftforge.common.ForgeChunkManager;<a name="line.16"></a>
<FONT color="green">017</FONT>    import net.minecraftforge.common.ForgeChunkManager.Ticket;<a name="line.17"></a>
<FONT color="green">018</FONT>    import net.minecraftforge.common.ForgeHooks;<a name="line.18"></a>
<FONT color="green">019</FONT>    import net.minecraftforge.common.MinecraftForge;<a name="line.19"></a>
<FONT color="green">020</FONT>    import net.minecraftforge.common.ForgeDirection;<a name="line.20"></a>
<FONT color="green">021</FONT>    import net.minecraftforge.common.WorldSpecificSaveHandler;<a name="line.21"></a>
<FONT color="green">022</FONT>    import net.minecraftforge.event.entity.EntityEvent;<a name="line.22"></a>
<FONT color="green">023</FONT>    import net.minecraftforge.event.entity.EntityJoinWorldEvent;<a name="line.23"></a>
<FONT color="green">024</FONT>    import net.minecraftforge.event.world.WorldEvent;<a name="line.24"></a>
<FONT color="green">025</FONT>    import net.minecraftforge.event.entity.PlaySoundAtEntityEvent;<a name="line.25"></a>
<FONT color="green">026</FONT>    <a name="line.26"></a>
<FONT color="green">027</FONT>    public abstract class World implements IBlockAccess<a name="line.27"></a>
<FONT color="green">028</FONT>    {<a name="line.28"></a>
<FONT color="green">029</FONT>        /**<a name="line.29"></a>
<FONT color="green">030</FONT>         * Used in the getEntitiesWithinAABB functions to expand the search area for entities.<a name="line.30"></a>
<FONT color="green">031</FONT>         * Modders should change this variable to a higher value if it is less then the radius<a name="line.31"></a>
<FONT color="green">032</FONT>         * of one of there entities.<a name="line.32"></a>
<FONT color="green">033</FONT>         */<a name="line.33"></a>
<FONT color="green">034</FONT>        public static double MAX_ENTITY_RADIUS = 2.0D;<a name="line.34"></a>
<FONT color="green">035</FONT>    <a name="line.35"></a>
<FONT color="green">036</FONT>        public final MapStorage perWorldStorage;<a name="line.36"></a>
<FONT color="green">037</FONT>    <a name="line.37"></a>
<FONT color="green">038</FONT>        /**<a name="line.38"></a>
<FONT color="green">039</FONT>         * boolean; if true updates scheduled by scheduleBlockUpdate happen immediately<a name="line.39"></a>
<FONT color="green">040</FONT>         */<a name="line.40"></a>
<FONT color="green">041</FONT>        public boolean scheduledUpdatesAreImmediate = false;<a name="line.41"></a>
<FONT color="green">042</FONT>    <a name="line.42"></a>
<FONT color="green">043</FONT>        /** A list of all Entities in all currently-loaded chunks */<a name="line.43"></a>
<FONT color="green">044</FONT>        public List loadedEntityList = new ArrayList();<a name="line.44"></a>
<FONT color="green">045</FONT>        protected List unloadedEntityList = new ArrayList();<a name="line.45"></a>
<FONT color="green">046</FONT>    <a name="line.46"></a>
<FONT color="green">047</FONT>        /** A list of all TileEntities in all currently-loaded chunks */<a name="line.47"></a>
<FONT color="green">048</FONT>        public List loadedTileEntityList = new ArrayList();<a name="line.48"></a>
<FONT color="green">049</FONT>        private List addedTileEntityList = new ArrayList();<a name="line.49"></a>
<FONT color="green">050</FONT>    <a name="line.50"></a>
<FONT color="green">051</FONT>        /** Entities marked for removal. */<a name="line.51"></a>
<FONT color="green">052</FONT>        private List entityRemoval = new ArrayList();<a name="line.52"></a>
<FONT color="green">053</FONT>    <a name="line.53"></a>
<FONT color="green">054</FONT>        /** Array list of players in the world. */<a name="line.54"></a>
<FONT color="green">055</FONT>        public List playerEntities = new ArrayList();<a name="line.55"></a>
<FONT color="green">056</FONT>    <a name="line.56"></a>
<FONT color="green">057</FONT>        /** a list of all the lightning entities */<a name="line.57"></a>
<FONT color="green">058</FONT>        public List weatherEffects = new ArrayList();<a name="line.58"></a>
<FONT color="green">059</FONT>        private long cloudColour = 16777215L;<a name="line.59"></a>
<FONT color="green">060</FONT>    <a name="line.60"></a>
<FONT color="green">061</FONT>        /** How much light is subtracted from full daylight */<a name="line.61"></a>
<FONT color="green">062</FONT>        public int skylightSubtracted = 0;<a name="line.62"></a>
<FONT color="green">063</FONT>    <a name="line.63"></a>
<FONT color="green">064</FONT>        /**<a name="line.64"></a>
<FONT color="green">065</FONT>         * Contains the current Linear Congruential Generator seed for block updates. Used with an A value of 3 and a C<a name="line.65"></a>
<FONT color="green">066</FONT>         * value of 0x3c6ef35f, producing a highly planar series of values ill-suited for choosing random blocks in a<a name="line.66"></a>
<FONT color="green">067</FONT>         * 16x128x16 field.<a name="line.67"></a>
<FONT color="green">068</FONT>         */<a name="line.68"></a>
<FONT color="green">069</FONT>        protected int updateLCG = (new Random()).nextInt();<a name="line.69"></a>
<FONT color="green">070</FONT>    <a name="line.70"></a>
<FONT color="green">071</FONT>        /**<a name="line.71"></a>
<FONT color="green">072</FONT>         * magic number used to generate fast random numbers for 3d distribution within a chunk<a name="line.72"></a>
<FONT color="green">073</FONT>         */<a name="line.73"></a>
<FONT color="green">074</FONT>        protected final int DIST_HASH_MAGIC = 1013904223;<a name="line.74"></a>
<FONT color="green">075</FONT>        protected float prevRainingStrength;<a name="line.75"></a>
<FONT color="green">076</FONT>        protected float rainingStrength;<a name="line.76"></a>
<FONT color="green">077</FONT>        protected float prevThunderingStrength;<a name="line.77"></a>
<FONT color="green">078</FONT>        protected float thunderingStrength;<a name="line.78"></a>
<FONT color="green">079</FONT>    <a name="line.79"></a>
<FONT color="green">080</FONT>        /**<a name="line.80"></a>
<FONT color="green">081</FONT>         * Set to 2 whenever a lightning bolt is generated in SSP. Decrements if &gt; 0 in updateWeather(). Value appears to be<a name="line.81"></a>
<FONT color="green">082</FONT>         * unused.<a name="line.82"></a>
<FONT color="green">083</FONT>         */<a name="line.83"></a>
<FONT color="green">084</FONT>        protected int lastLightningBolt = 0;<a name="line.84"></a>
<FONT color="green">085</FONT>    <a name="line.85"></a>
<FONT color="green">086</FONT>        /**<a name="line.86"></a>
<FONT color="green">087</FONT>         * If &gt; 0, the sky and skylight colors are illuminated by a lightning flash<a name="line.87"></a>
<FONT color="green">088</FONT>         */<a name="line.88"></a>
<FONT color="green">089</FONT>        public int lightningFlash = 0;<a name="line.89"></a>
<FONT color="green">090</FONT>    <a name="line.90"></a>
<FONT color="green">091</FONT>        /** true while the world is editing blocks */<a name="line.91"></a>
<FONT color="green">092</FONT>        public boolean editingBlocks = false;<a name="line.92"></a>
<FONT color="green">093</FONT>    <a name="line.93"></a>
<FONT color="green">094</FONT>        /** Option &gt; Difficulty setting (0 - 3) */<a name="line.94"></a>
<FONT color="green">095</FONT>        public int difficultySetting;<a name="line.95"></a>
<FONT color="green">096</FONT>    <a name="line.96"></a>
<FONT color="green">097</FONT>        /** RNG for World. */<a name="line.97"></a>
<FONT color="green">098</FONT>        public Random rand = new Random();<a name="line.98"></a>
<FONT color="green">099</FONT>    <a name="line.99"></a>
<FONT color="green">100</FONT>        /** The WorldProvider instance that World uses. */<a name="line.100"></a>
<FONT color="green">101</FONT>        public final WorldProvider provider;<a name="line.101"></a>
<FONT color="green">102</FONT>        protected List worldAccesses = new ArrayList();<a name="line.102"></a>
<FONT color="green">103</FONT>    <a name="line.103"></a>
<FONT color="green">104</FONT>        /** Handles chunk operations and caching */<a name="line.104"></a>
<FONT color="green">105</FONT>        protected IChunkProvider chunkProvider;<a name="line.105"></a>
<FONT color="green">106</FONT>        protected final ISaveHandler saveHandler;<a name="line.106"></a>
<FONT color="green">107</FONT>    <a name="line.107"></a>
<FONT color="green">108</FONT>        /**<a name="line.108"></a>
<FONT color="green">109</FONT>         * holds information about a world (size on disk, time, spawn point, seed, ...)<a name="line.109"></a>
<FONT color="green">110</FONT>         */<a name="line.110"></a>
<FONT color="green">111</FONT>        protected WorldInfo worldInfo;<a name="line.111"></a>
<FONT color="green">112</FONT>    <a name="line.112"></a>
<FONT color="green">113</FONT>        /** Boolean that is set to true when trying to find a spawn point */<a name="line.113"></a>
<FONT color="green">114</FONT>        public boolean findingSpawnPoint;<a name="line.114"></a>
<FONT color="green">115</FONT>        public MapStorage mapStorage;<a name="line.115"></a>
<FONT color="green">116</FONT>        public VillageCollection villageCollectionObj;<a name="line.116"></a>
<FONT color="green">117</FONT>        protected final VillageSiege villageSiegeObj = new VillageSiege(this);<a name="line.117"></a>
<FONT color="green">118</FONT>        public final Profiler theProfiler;<a name="line.118"></a>
<FONT color="green">119</FONT>    <a name="line.119"></a>
<FONT color="green">120</FONT>        /** The world-local pool of vectors */<a name="line.120"></a>
<FONT color="green">121</FONT>        private final Vec3Pool vecPool = new Vec3Pool(300, 2000);<a name="line.121"></a>
<FONT color="green">122</FONT>        private final Calendar theCalendar = Calendar.getInstance();<a name="line.122"></a>
<FONT color="green">123</FONT>        private ArrayList collidingBoundingBoxes = new ArrayList();<a name="line.123"></a>
<FONT color="green">124</FONT>        private boolean scanningTileEntities;<a name="line.124"></a>
<FONT color="green">125</FONT>    <a name="line.125"></a>
<FONT color="green">126</FONT>        /** indicates if enemies are spawned or not */<a name="line.126"></a>
<FONT color="green">127</FONT>        protected boolean spawnHostileMobs = true;<a name="line.127"></a>
<FONT color="green">128</FONT>    <a name="line.128"></a>
<FONT color="green">129</FONT>        /** A flag indicating whether we should spawn peaceful mobs. */<a name="line.129"></a>
<FONT color="green">130</FONT>        protected boolean spawnPeacefulMobs = true;<a name="line.130"></a>
<FONT color="green">131</FONT>    <a name="line.131"></a>
<FONT color="green">132</FONT>        /** Positions to update */<a name="line.132"></a>
<FONT color="green">133</FONT>        public Set activeChunkSet = new HashSet();<a name="line.133"></a>
<FONT color="green">134</FONT>    <a name="line.134"></a>
<FONT color="green">135</FONT>        /** number of ticks until the next random ambients play */<a name="line.135"></a>
<FONT color="green">136</FONT>        private int ambientTickCountdown;<a name="line.136"></a>
<FONT color="green">137</FONT>    <a name="line.137"></a>
<FONT color="green">138</FONT>        /**<a name="line.138"></a>
<FONT color="green">139</FONT>         * is a temporary list of blocks and light values used when updating light levels. Holds up to 32x32x32 blocks (the<a name="line.139"></a>
<FONT color="green">140</FONT>         * maximum influence of a light source.) Every element is a packed bit value: 0000000000LLLLzzzzzzyyyyyyxxxxxx. The<a name="line.140"></a>
<FONT color="green">141</FONT>         * 4-bit L is a light level used when darkening blocks. 6-bit numbers x, y and z represent the block's offset from<a name="line.141"></a>
<FONT color="green">142</FONT>         * the original block, plus 32 (i.e. value of 31 would mean a -1 offset<a name="line.142"></a>
<FONT color="green">143</FONT>         */<a name="line.143"></a>
<FONT color="green">144</FONT>        int[] lightUpdateBlockList;<a name="line.144"></a>
<FONT color="green">145</FONT>    <a name="line.145"></a>
<FONT color="green">146</FONT>        /**<a name="line.146"></a>
<FONT color="green">147</FONT>         * entities within AxisAlignedBB excluding one, set and returned in getEntitiesWithinAABBExcludingEntity(Entity<a name="line.147"></a>
<FONT color="green">148</FONT>         * var1, AxisAlignedBB var2)<a name="line.148"></a>
<FONT color="green">149</FONT>         */<a name="line.149"></a>
<FONT color="green">150</FONT>        private List entitiesWithinAABBExcludingEntity;<a name="line.150"></a>
<FONT color="green">151</FONT>    <a name="line.151"></a>
<FONT color="green">152</FONT>        /**<a name="line.152"></a>
<FONT color="green">153</FONT>         * This is set to true when you are a client connected to a multiplayer world, false otherwise. As of Minecraft 1.3<a name="line.153"></a>
<FONT color="green">154</FONT>         * and the integrated server, this will always return true.<a name="line.154"></a>
<FONT color="green">155</FONT>         */<a name="line.155"></a>
<FONT color="green">156</FONT>        public boolean isRemote;<a name="line.156"></a>
<FONT color="green">157</FONT>    <a name="line.157"></a>
<FONT color="green">158</FONT>        /**<a name="line.158"></a>
<FONT color="green">159</FONT>         * Gets the biome for a given set of x/z coordinates<a name="line.159"></a>
<FONT color="green">160</FONT>         */<a name="line.160"></a>
<FONT color="green">161</FONT>        public BiomeGenBase getBiomeGenForCoords(int par1, int par2)<a name="line.161"></a>
<FONT color="green">162</FONT>        {<a name="line.162"></a>
<FONT color="green">163</FONT>            return provider.getBiomeGenForCoords(par1, par2);<a name="line.163"></a>
<FONT color="green">164</FONT>        }<a name="line.164"></a>
<FONT color="green">165</FONT>    <a name="line.165"></a>
<FONT color="green">166</FONT>        public BiomeGenBase getBiomeGenForCoordsBody(int par1, int par2)<a name="line.166"></a>
<FONT color="green">167</FONT>        {<a name="line.167"></a>
<FONT color="green">168</FONT>            if (this.blockExists(par1, 0, par2))<a name="line.168"></a>
<FONT color="green">169</FONT>            {<a name="line.169"></a>
<FONT color="green">170</FONT>                Chunk var3 = this.getChunkFromBlockCoords(par1, par2);<a name="line.170"></a>
<FONT color="green">171</FONT>    <a name="line.171"></a>
<FONT color="green">172</FONT>                if (var3 != null)<a name="line.172"></a>
<FONT color="green">173</FONT>                {<a name="line.173"></a>
<FONT color="green">174</FONT>                    return var3.getBiomeGenForWorldCoords(par1 &amp; 15, par2 &amp; 15, this.provider.worldChunkMgr);<a name="line.174"></a>
<FONT color="green">175</FONT>                }<a name="line.175"></a>
<FONT color="green">176</FONT>            }<a name="line.176"></a>
<FONT color="green">177</FONT>    <a name="line.177"></a>
<FONT color="green">178</FONT>            return this.provider.worldChunkMgr.getBiomeGenAt(par1, par2);<a name="line.178"></a>
<FONT color="green">179</FONT>        }<a name="line.179"></a>
<FONT color="green">180</FONT>    <a name="line.180"></a>
<FONT color="green">181</FONT>        public WorldChunkManager getWorldChunkManager()<a name="line.181"></a>
<FONT color="green">182</FONT>        {<a name="line.182"></a>
<FONT color="green">183</FONT>            return this.provider.worldChunkMgr;<a name="line.183"></a>
<FONT color="green">184</FONT>        }<a name="line.184"></a>
<FONT color="green">185</FONT>    <a name="line.185"></a>
<FONT color="green">186</FONT>        @SideOnly(Side.CLIENT)<a name="line.186"></a>
<FONT color="green">187</FONT>        public World(ISaveHandler par1ISaveHandler, String par2Str, WorldProvider par3WorldProvider, WorldSettings par4WorldSettings, Profiler par5Profiler)<a name="line.187"></a>
<FONT color="green">188</FONT>        {<a name="line.188"></a>
<FONT color="green">189</FONT>            this.ambientTickCountdown = this.rand.nextInt(12000);<a name="line.189"></a>
<FONT color="green">190</FONT>            this.lightUpdateBlockList = new int[32768];<a name="line.190"></a>
<FONT color="green">191</FONT>            this.entitiesWithinAABBExcludingEntity = new ArrayList();<a name="line.191"></a>
<FONT color="green">192</FONT>            this.isRemote = false;<a name="line.192"></a>
<FONT color="green">193</FONT>            this.saveHandler = par1ISaveHandler;<a name="line.193"></a>
<FONT color="green">194</FONT>            this.theProfiler = par5Profiler;<a name="line.194"></a>
<FONT color="green">195</FONT>            this.worldInfo = new WorldInfo(par4WorldSettings, par2Str);<a name="line.195"></a>
<FONT color="green">196</FONT>            this.provider = par3WorldProvider;<a name="line.196"></a>
<FONT color="green">197</FONT>            perWorldStorage = new MapStorage((ISaveHandler)null);<a name="line.197"></a>
<FONT color="green">198</FONT>        }<a name="line.198"></a>
<FONT color="green">199</FONT>    <a name="line.199"></a>
<FONT color="green">200</FONT>        // Broken up so that the WorldClient gets the chance to set the mapstorage object before the dimension initializes<a name="line.200"></a>
<FONT color="green">201</FONT>        @SideOnly(Side.CLIENT)<a name="line.201"></a>
<FONT color="green">202</FONT>        protected void finishSetup()<a name="line.202"></a>
<FONT color="green">203</FONT>        {<a name="line.203"></a>
<FONT color="green">204</FONT>            VillageCollection var6 = (VillageCollection)this.mapStorage.loadData(VillageCollection.class, "villages");<a name="line.204"></a>
<FONT color="green">205</FONT>    <a name="line.205"></a>
<FONT color="green">206</FONT>            if (var6 == null)<a name="line.206"></a>
<FONT color="green">207</FONT>            {<a name="line.207"></a>
<FONT color="green">208</FONT>                this.villageCollectionObj = new VillageCollection(this);<a name="line.208"></a>
<FONT color="green">209</FONT>                this.mapStorage.setData("villages", this.villageCollectionObj);<a name="line.209"></a>
<FONT color="green">210</FONT>            }<a name="line.210"></a>
<FONT color="green">211</FONT>            else<a name="line.211"></a>
<FONT color="green">212</FONT>            {<a name="line.212"></a>
<FONT color="green">213</FONT>                this.villageCollectionObj = var6;<a name="line.213"></a>
<FONT color="green">214</FONT>                this.villageCollectionObj.func_82566_a(this);<a name="line.214"></a>
<FONT color="green">215</FONT>            }<a name="line.215"></a>
<FONT color="green">216</FONT>    <a name="line.216"></a>
<FONT color="green">217</FONT>            this.provider.registerWorld(this);<a name="line.217"></a>
<FONT color="green">218</FONT>            this.chunkProvider = this.createChunkProvider();<a name="line.218"></a>
<FONT color="green">219</FONT>            this.calculateInitialSkylight();<a name="line.219"></a>
<FONT color="green">220</FONT>            this.calculateInitialWeather();<a name="line.220"></a>
<FONT color="green">221</FONT>        }<a name="line.221"></a>
<FONT color="green">222</FONT>    <a name="line.222"></a>
<FONT color="green">223</FONT>        public World(ISaveHandler par1ISaveHandler, String par2Str, WorldSettings par3WorldSettings, WorldProvider par4WorldProvider, Profiler par5Profiler)<a name="line.223"></a>
<FONT color="green">224</FONT>        {<a name="line.224"></a>
<FONT color="green">225</FONT>            this.ambientTickCountdown = this.rand.nextInt(12000);<a name="line.225"></a>
<FONT color="green">226</FONT>            this.lightUpdateBlockList = new int[32768];<a name="line.226"></a>
<FONT color="green">227</FONT>            this.entitiesWithinAABBExcludingEntity = new ArrayList();<a name="line.227"></a>
<FONT color="green">228</FONT>            this.isRemote = false;<a name="line.228"></a>
<FONT color="green">229</FONT>            this.saveHandler = par1ISaveHandler;<a name="line.229"></a>
<FONT color="green">230</FONT>            this.theProfiler = par5Profiler;<a name="line.230"></a>
<FONT color="green">231</FONT>            this.mapStorage = getMapStorage(par1ISaveHandler);<a name="line.231"></a>
<FONT color="green">232</FONT>            this.worldInfo = par1ISaveHandler.loadWorldInfo();<a name="line.232"></a>
<FONT color="green">233</FONT>    <a name="line.233"></a>
<FONT color="green">234</FONT>            if (par4WorldProvider != null)<a name="line.234"></a>
<FONT color="green">235</FONT>            {<a name="line.235"></a>
<FONT color="green">236</FONT>                this.provider = par4WorldProvider;<a name="line.236"></a>
<FONT color="green">237</FONT>            }<a name="line.237"></a>
<FONT color="green">238</FONT>            else if (this.worldInfo != null &amp;&amp; this.worldInfo.getDimension() != 0)<a name="line.238"></a>
<FONT color="green">239</FONT>            {<a name="line.239"></a>
<FONT color="green">240</FONT>                this.provider = WorldProvider.getProviderForDimension(this.worldInfo.getDimension());<a name="line.240"></a>
<FONT color="green">241</FONT>            }<a name="line.241"></a>
<FONT color="green">242</FONT>            else<a name="line.242"></a>
<FONT color="green">243</FONT>            {<a name="line.243"></a>
<FONT color="green">244</FONT>                this.provider = WorldProvider.getProviderForDimension(0);<a name="line.244"></a>
<FONT color="green">245</FONT>            }<a name="line.245"></a>
<FONT color="green">246</FONT>    <a name="line.246"></a>
<FONT color="green">247</FONT>            if (this.worldInfo == null)<a name="line.247"></a>
<FONT color="green">248</FONT>            {<a name="line.248"></a>
<FONT color="green">249</FONT>                this.worldInfo = new WorldInfo(par3WorldSettings, par2Str);<a name="line.249"></a>
<FONT color="green">250</FONT>            }<a name="line.250"></a>
<FONT color="green">251</FONT>            else<a name="line.251"></a>
<FONT color="green">252</FONT>            {<a name="line.252"></a>
<FONT color="green">253</FONT>                this.worldInfo.setWorldName(par2Str);<a name="line.253"></a>
<FONT color="green">254</FONT>            }<a name="line.254"></a>
<FONT color="green">255</FONT>    <a name="line.255"></a>
<FONT color="green">256</FONT>            this.provider.registerWorld(this);<a name="line.256"></a>
<FONT color="green">257</FONT>            this.chunkProvider = this.createChunkProvider();<a name="line.257"></a>
<FONT color="green">258</FONT>    <a name="line.258"></a>
<FONT color="green">259</FONT>            if (!this.worldInfo.isInitialized())<a name="line.259"></a>
<FONT color="green">260</FONT>            {<a name="line.260"></a>
<FONT color="green">261</FONT>                try<a name="line.261"></a>
<FONT color="green">262</FONT>                {<a name="line.262"></a>
<FONT color="green">263</FONT>                    this.initialize(par3WorldSettings);<a name="line.263"></a>
<FONT color="green">264</FONT>                }<a name="line.264"></a>
<FONT color="green">265</FONT>                catch (Throwable var10)<a name="line.265"></a>
<FONT color="green">266</FONT>                {<a name="line.266"></a>
<FONT color="green">267</FONT>                    CrashReport var7 = CrashReport.func_85055_a(var10, "Exception initializing level");<a name="line.267"></a>
<FONT color="green">268</FONT>    <a name="line.268"></a>
<FONT color="green">269</FONT>                    try<a name="line.269"></a>
<FONT color="green">270</FONT>                    {<a name="line.270"></a>
<FONT color="green">271</FONT>                        this.addWorldInfoToCrashReport(var7);<a name="line.271"></a>
<FONT color="green">272</FONT>                    }<a name="line.272"></a>
<FONT color="green">273</FONT>                    catch (Throwable var9)<a name="line.273"></a>
<FONT color="green">274</FONT>                    {<a name="line.274"></a>
<FONT color="green">275</FONT>                        ;<a name="line.275"></a>
<FONT color="green">276</FONT>                    }<a name="line.276"></a>
<FONT color="green">277</FONT>    <a name="line.277"></a>
<FONT color="green">278</FONT>                    throw new ReportedException(var7);<a name="line.278"></a>
<FONT color="green">279</FONT>                }<a name="line.279"></a>
<FONT color="green">280</FONT>    <a name="line.280"></a>
<FONT color="green">281</FONT>                this.worldInfo.setServerInitialized(true);<a name="line.281"></a>
<FONT color="green">282</FONT>            }<a name="line.282"></a>
<FONT color="green">283</FONT>    <a name="line.283"></a>
<FONT color="green">284</FONT>            if (this instanceof WorldServer)<a name="line.284"></a>
<FONT color="green">285</FONT>            {<a name="line.285"></a>
<FONT color="green">286</FONT>                this.perWorldStorage = new MapStorage(new WorldSpecificSaveHandler((WorldServer)this, par1ISaveHandler));<a name="line.286"></a>
<FONT color="green">287</FONT>            }<a name="line.287"></a>
<FONT color="green">288</FONT>            else<a name="line.288"></a>
<FONT color="green">289</FONT>            {<a name="line.289"></a>
<FONT color="green">290</FONT>                this.perWorldStorage = new MapStorage((ISaveHandler)null);<a name="line.290"></a>
<FONT color="green">291</FONT>            }<a name="line.291"></a>
<FONT color="green">292</FONT>            VillageCollection var6 = (VillageCollection)perWorldStorage.loadData(VillageCollection.class, "villages");<a name="line.292"></a>
<FONT color="green">293</FONT>    <a name="line.293"></a>
<FONT color="green">294</FONT>            if (var6 == null)<a name="line.294"></a>
<FONT color="green">295</FONT>            {<a name="line.295"></a>
<FONT color="green">296</FONT>                this.villageCollectionObj = new VillageCollection(this);<a name="line.296"></a>
<FONT color="green">297</FONT>                this.perWorldStorage.setData("villages", this.villageCollectionObj);<a name="line.297"></a>
<FONT color="green">298</FONT>            }<a name="line.298"></a>
<FONT color="green">299</FONT>            else<a name="line.299"></a>
<FONT color="green">300</FONT>            {<a name="line.300"></a>
<FONT color="green">301</FONT>                this.villageCollectionObj = var6;<a name="line.301"></a>
<FONT color="green">302</FONT>                this.villageCollectionObj.func_82566_a(this);<a name="line.302"></a>
<FONT color="green">303</FONT>            }<a name="line.303"></a>
<FONT color="green">304</FONT>    <a name="line.304"></a>
<FONT color="green">305</FONT>            this.calculateInitialSkylight();<a name="line.305"></a>
<FONT color="green">306</FONT>            this.calculateInitialWeather();<a name="line.306"></a>
<FONT color="green">307</FONT>        }<a name="line.307"></a>
<FONT color="green">308</FONT>    <a name="line.308"></a>
<FONT color="green">309</FONT>        private static MapStorage s_mapStorage;<a name="line.309"></a>
<FONT color="green">310</FONT>        private static ISaveHandler s_savehandler;<a name="line.310"></a>
<FONT color="green">311</FONT>        //Provides a solution for different worlds getting different copies of the same data, potentially rewriting the data or causing race conditions/stale data<a name="line.311"></a>
<FONT color="green">312</FONT>        //Buildcraft has suffered from the issue this fixes.  If you load the same data from two different worlds they can get two different copies of the same object, thus the last saved gets final say.<a name="line.312"></a>
<FONT color="green">313</FONT>        private MapStorage getMapStorage(ISaveHandler savehandler)<a name="line.313"></a>
<FONT color="green">314</FONT>        {<a name="line.314"></a>
<FONT color="green">315</FONT>            if (s_savehandler != savehandler || s_mapStorage == null) {<a name="line.315"></a>
<FONT color="green">316</FONT>                s_mapStorage = new MapStorage(savehandler);<a name="line.316"></a>
<FONT color="green">317</FONT>                s_savehandler = savehandler;<a name="line.317"></a>
<FONT color="green">318</FONT>            }<a name="line.318"></a>
<FONT color="green">319</FONT>            return s_mapStorage;<a name="line.319"></a>
<FONT color="green">320</FONT>        }<a name="line.320"></a>
<FONT color="green">321</FONT>    <a name="line.321"></a>
<FONT color="green">322</FONT>        /**<a name="line.322"></a>
<FONT color="green">323</FONT>         * Creates the chunk provider for this world. Called in the constructor. Retrieves provider from worldProvider?<a name="line.323"></a>
<FONT color="green">324</FONT>         */<a name="line.324"></a>
<FONT color="green">325</FONT>        protected abstract IChunkProvider createChunkProvider();<a name="line.325"></a>
<FONT color="green">326</FONT>    <a name="line.326"></a>
<FONT color="green">327</FONT>        protected void initialize(WorldSettings par1WorldSettings)<a name="line.327"></a>
<FONT color="green">328</FONT>        {<a name="line.328"></a>
<FONT color="green">329</FONT>            this.worldInfo.setServerInitialized(true);<a name="line.329"></a>
<FONT color="green">330</FONT>        }<a name="line.330"></a>
<FONT color="green">331</FONT>    <a name="line.331"></a>
<FONT color="green">332</FONT>        @SideOnly(Side.CLIENT)<a name="line.332"></a>
<FONT color="green">333</FONT>    <a name="line.333"></a>
<FONT color="green">334</FONT>        /**<a name="line.334"></a>
<FONT color="green">335</FONT>         * Sets a new spawn location by finding an uncovered block at a random (x,z) location in the chunk.<a name="line.335"></a>
<FONT color="green">336</FONT>         */<a name="line.336"></a>
<FONT color="green">337</FONT>        public void setSpawnLocation()<a name="line.337"></a>
<FONT color="green">338</FONT>        {<a name="line.338"></a>
<FONT color="green">339</FONT>            this.setSpawnLocation(8, 64, 8);<a name="line.339"></a>
<FONT color="green">340</FONT>        }<a name="line.340"></a>
<FONT color="green">341</FONT>    <a name="line.341"></a>
<FONT color="green">342</FONT>        /**<a name="line.342"></a>
<FONT color="green">343</FONT>         * Returns the block ID of the first block at this (x,z) location with air above it, searching from sea level<a name="line.343"></a>
<FONT color="green">344</FONT>         * upwards.<a name="line.344"></a>
<FONT color="green">345</FONT>         */<a name="line.345"></a>
<FONT color="green">346</FONT>        public int getFirstUncoveredBlock(int par1, int par2)<a name="line.346"></a>
<FONT color="green">347</FONT>        {<a name="line.347"></a>
<FONT color="green">348</FONT>            int var3;<a name="line.348"></a>
<FONT color="green">349</FONT>    <a name="line.349"></a>
<FONT color="green">350</FONT>            for (var3 = 63; !this.isAirBlock(par1, var3 + 1, par2); ++var3)<a name="line.350"></a>
<FONT color="green">351</FONT>            {<a name="line.351"></a>
<FONT color="green">352</FONT>                ;<a name="line.352"></a>
<FONT color="green">353</FONT>            }<a name="line.353"></a>
<FONT color="green">354</FONT>    <a name="line.354"></a>
<FONT color="green">355</FONT>            return this.getBlockId(par1, var3, par2);<a name="line.355"></a>
<FONT color="green">356</FONT>        }<a name="line.356"></a>
<FONT color="green">357</FONT>    <a name="line.357"></a>
<FONT color="green">358</FONT>        /**<a name="line.358"></a>
<FONT color="green">359</FONT>         * Returns the block ID at coords x,y,z<a name="line.359"></a>
<FONT color="green">360</FONT>         */<a name="line.360"></a>
<FONT color="green">361</FONT>        public int getBlockId(int par1, int par2, int par3)<a name="line.361"></a>
<FONT color="green">362</FONT>        {<a name="line.362"></a>
<FONT color="green">363</FONT>            if (par1 &gt;= -30000000 &amp;&amp; par3 &gt;= -30000000 &amp;&amp; par1 &lt; 30000000 &amp;&amp; par3 &lt; 30000000)<a name="line.363"></a>
<FONT color="green">364</FONT>            {<a name="line.364"></a>
<FONT color="green">365</FONT>                if (par2 &lt; 0)<a name="line.365"></a>
<FONT color="green">366</FONT>                {<a name="line.366"></a>
<FONT color="green">367</FONT>                    return 0;<a name="line.367"></a>
<FONT color="green">368</FONT>                }<a name="line.368"></a>
<FONT color="green">369</FONT>                else if (par2 &gt;= 256)<a name="line.369"></a>
<FONT color="green">370</FONT>                {<a name="line.370"></a>
<FONT color="green">371</FONT>                    return 0;<a name="line.371"></a>
<FONT color="green">372</FONT>                }<a name="line.372"></a>
<FONT color="green">373</FONT>                else<a name="line.373"></a>
<FONT color="green">374</FONT>                {<a name="line.374"></a>
<FONT color="green">375</FONT>                    Chunk var4 = null;<a name="line.375"></a>
<FONT color="green">376</FONT>    <a name="line.376"></a>
<FONT color="green">377</FONT>                    try<a name="line.377"></a>
<FONT color="green">378</FONT>                    {<a name="line.378"></a>
<FONT color="green">379</FONT>                        var4 = this.getChunkFromChunkCoords(par1 &gt;&gt; 4, par3 &gt;&gt; 4);<a name="line.379"></a>
<FONT color="green">380</FONT>                        return var4.getBlockID(par1 &amp; 15, par2, par3 &amp; 15);<a name="line.380"></a>
<FONT color="green">381</FONT>                    }<a name="line.381"></a>
<FONT color="green">382</FONT>                    catch (Throwable var8)<a name="line.382"></a>
<FONT color="green">383</FONT>                    {<a name="line.383"></a>
<FONT color="green">384</FONT>                        CrashReport var6 = CrashReport.func_85055_a(var8, "Exception getting block type in world");<a name="line.384"></a>
<FONT color="green">385</FONT>                        CrashReportCategory var7 = var6.func_85058_a("Requested block coordinates");<a name="line.385"></a>
<FONT color="green">386</FONT>                        var7.addCrashSection("Found chunk", Boolean.valueOf(var4 == null));<a name="line.386"></a>
<FONT color="green">387</FONT>                        var7.addCrashSection("Location", CrashReportCategory.func_85071_a(par1, par2, par3));<a name="line.387"></a>
<FONT color="green">388</FONT>                        throw new ReportedException(var6);<a name="line.388"></a>
<FONT color="green">389</FONT>                    }<a name="line.389"></a>
<FONT color="green">390</FONT>                }<a name="line.390"></a>
<FONT color="green">391</FONT>            }<a name="line.391"></a>
<FONT color="green">392</FONT>            else<a name="line.392"></a>
<FONT color="green">393</FONT>            {<a name="line.393"></a>
<FONT color="green">394</FONT>                return 0;<a name="line.394"></a>
<FONT color="green">395</FONT>            }<a name="line.395"></a>
<FONT color="green">396</FONT>        }<a name="line.396"></a>
<FONT color="green">397</FONT>    <a name="line.397"></a>
<FONT color="green">398</FONT>        public int getBlockLightOpacity(int par1, int par2, int par3)<a name="line.398"></a>
<FONT color="green">399</FONT>        {<a name="line.399"></a>
<FONT color="green">400</FONT>            return par1 &gt;= -30000000 &amp;&amp; par3 &gt;= -30000000 &amp;&amp; par1 &lt; 30000000 &amp;&amp; par3 &lt; 30000000 ? (par2 &lt; 0 ? 0 : (par2 &gt;= 256 ? 0 : this.getChunkFromChunkCoords(par1 &gt;&gt; 4, par3 &gt;&gt; 4).getBlockLightOpacity(par1 &amp; 15, par2, par3 &amp; 15))) : 0;<a name="line.400"></a>
<FONT color="green">401</FONT>        }<a name="line.401"></a>
<FONT color="green">402</FONT>    <a name="line.402"></a>
<FONT color="green">403</FONT>        /**<a name="line.403"></a>
<FONT color="green">404</FONT>         * Returns true if the block at the specified coordinates is empty<a name="line.404"></a>
<FONT color="green">405</FONT>         */<a name="line.405"></a>
<FONT color="green">406</FONT>        public boolean isAirBlock(int par1, int par2, int par3)<a name="line.406"></a>
<FONT color="green">407</FONT>        {<a name="line.407"></a>
<FONT color="green">408</FONT>            int id = getBlockId(par1, par2, par3);<a name="line.408"></a>
<FONT color="green">409</FONT>            return id == 0 || Block.blocksList[id] == null || Block.blocksList[id].isAirBlock(this, par1, par2, par3);<a name="line.409"></a>
<FONT color="green">410</FONT>        }<a name="line.410"></a>
<FONT color="green">411</FONT>    <a name="line.411"></a>
<FONT color="green">412</FONT>        /**<a name="line.412"></a>
<FONT color="green">413</FONT>         * Checks if a block at a given position should have a tile entity.<a name="line.413"></a>
<FONT color="green">414</FONT>         */<a name="line.414"></a>
<FONT color="green">415</FONT>        public boolean blockHasTileEntity(int par1, int par2, int par3)<a name="line.415"></a>
<FONT color="green">416</FONT>        {<a name="line.416"></a>
<FONT color="green">417</FONT>            int var4 = this.getBlockId(par1, par2, par3);<a name="line.417"></a>
<FONT color="green">418</FONT>            int meta = this.getBlockMetadata(par1, par2, par3);<a name="line.418"></a>
<FONT color="green">419</FONT>            return Block.blocksList[var4] != null &amp;&amp; Block.blocksList[var4].hasTileEntity(meta);<a name="line.419"></a>
<FONT color="green">420</FONT>        }<a name="line.420"></a>
<FONT color="green">421</FONT>    <a name="line.421"></a>
<FONT color="green">422</FONT>        public int func_85175_e(int par1, int par2, int par3)<a name="line.422"></a>
<FONT color="green">423</FONT>        {<a name="line.423"></a>
<FONT color="green">424</FONT>            int var4 = this.getBlockId(par1, par2, par3);<a name="line.424"></a>
<FONT color="green">425</FONT>            return Block.blocksList[var4] != null ? Block.blocksList[var4].getRenderType() : -1;<a name="line.425"></a>
<FONT color="green">426</FONT>        }<a name="line.426"></a>
<FONT color="green">427</FONT>    <a name="line.427"></a>
<FONT color="green">428</FONT>        /**<a name="line.428"></a>
<FONT color="green">429</FONT>         * Returns whether a block exists at world coordinates x, y, z<a name="line.429"></a>
<FONT color="green">430</FONT>         */<a name="line.430"></a>
<FONT color="green">431</FONT>        public boolean blockExists(int par1, int par2, int par3)<a name="line.431"></a>
<FONT color="green">432</FONT>        {<a name="line.432"></a>
<FONT color="green">433</FONT>            return par2 &gt;= 0 &amp;&amp; par2 &lt; 256 ? this.chunkExists(par1 &gt;&gt; 4, par3 &gt;&gt; 4) : false;<a name="line.433"></a>
<FONT color="green">434</FONT>        }<a name="line.434"></a>
<FONT color="green">435</FONT>    <a name="line.435"></a>
<FONT color="green">436</FONT>        /**<a name="line.436"></a>
<FONT color="green">437</FONT>         * Checks if any of the chunks within distance (argument 4) blocks of the given block exist<a name="line.437"></a>
<FONT color="green">438</FONT>         */<a name="line.438"></a>
<FONT color="green">439</FONT>        public boolean doChunksNearChunkExist(int par1, int par2, int par3, int par4)<a name="line.439"></a>
<FONT color="green">440</FONT>        {<a name="line.440"></a>
<FONT color="green">441</FONT>            return this.checkChunksExist(par1 - par4, par2 - par4, par3 - par4, par1 + par4, par2 + par4, par3 + par4);<a name="line.441"></a>
<FONT color="green">442</FONT>        }<a name="line.442"></a>
<FONT color="green">443</FONT>    <a name="line.443"></a>
<FONT color="green">444</FONT>        /**<a name="line.444"></a>
<FONT color="green">445</FONT>         * Checks between a min and max all the chunks inbetween actually exist. Args: minX, minY, minZ, maxX, maxY, maxZ<a name="line.445"></a>
<FONT color="green">446</FONT>         */<a name="line.446"></a>
<FONT color="green">447</FONT>        public boolean checkChunksExist(int par1, int par2, int par3, int par4, int par5, int par6)<a name="line.447"></a>
<FONT color="green">448</FONT>        {<a name="line.448"></a>
<FONT color="green">449</FONT>            if (par5 &gt;= 0 &amp;&amp; par2 &lt; 256)<a name="line.449"></a>
<FONT color="green">450</FONT>            {<a name="line.450"></a>
<FONT color="green">451</FONT>                par1 &gt;&gt;= 4;<a name="line.451"></a>
<FONT color="green">452</FONT>                par3 &gt;&gt;= 4;<a name="line.452"></a>
<FONT color="green">453</FONT>                par4 &gt;&gt;= 4;<a name="line.453"></a>
<FONT color="green">454</FONT>                par6 &gt;&gt;= 4;<a name="line.454"></a>
<FONT color="green">455</FONT>    <a name="line.455"></a>
<FONT color="green">456</FONT>                for (int var7 = par1; var7 &lt;= par4; ++var7)<a name="line.456"></a>
<FONT color="green">457</FONT>                {<a name="line.457"></a>
<FONT color="green">458</FONT>                    for (int var8 = par3; var8 &lt;= par6; ++var8)<a name="line.458"></a>
<FONT color="green">459</FONT>                    {<a name="line.459"></a>
<FONT color="green">460</FONT>                        if (!this.chunkExists(var7, var8))<a name="line.460"></a>
<FONT color="green">461</FONT>                        {<a name="line.461"></a>
<FONT color="green">462</FONT>                            return false;<a name="line.462"></a>
<FONT color="green">463</FONT>                        }<a name="line.463"></a>
<FONT color="green">464</FONT>                    }<a name="line.464"></a>
<FONT color="green">465</FONT>                }<a name="line.465"></a>
<FONT color="green">466</FONT>    <a name="line.466"></a>
<FONT color="green">467</FONT>                return true;<a name="line.467"></a>
<FONT color="green">468</FONT>            }<a name="line.468"></a>
<FONT color="green">469</FONT>            else<a name="line.469"></a>
<FONT color="green">470</FONT>            {<a name="line.470"></a>
<FONT color="green">471</FONT>                return false;<a name="line.471"></a>
<FONT color="green">472</FONT>            }<a name="line.472"></a>
<FONT color="green">473</FONT>        }<a name="line.473"></a>
<FONT color="green">474</FONT>    <a name="line.474"></a>
<FONT color="green">475</FONT>        /**<a name="line.475"></a>
<FONT color="green">476</FONT>         * Returns whether a chunk exists at chunk coordinates x, y<a name="line.476"></a>
<FONT color="green">477</FONT>         */<a name="line.477"></a>
<FONT color="green">478</FONT>        protected boolean chunkExists(int par1, int par2)<a name="line.478"></a>
<FONT color="green">479</FONT>        {<a name="line.479"></a>
<FONT color="green">480</FONT>            return this.chunkProvider.chunkExists(par1, par2);<a name="line.480"></a>
<FONT color="green">481</FONT>        }<a name="line.481"></a>
<FONT color="green">482</FONT>    <a name="line.482"></a>
<FONT color="green">483</FONT>        /**<a name="line.483"></a>
<FONT color="green">484</FONT>         * Returns a chunk looked up by block coordinates. Args: x, z<a name="line.484"></a>
<FONT color="green">485</FONT>         */<a name="line.485"></a>
<FONT color="green">486</FONT>        public Chunk getChunkFromBlockCoords(int par1, int par2)<a name="line.486"></a>
<FONT color="green">487</FONT>        {<a name="line.487"></a>
<FONT color="green">488</FONT>            return this.getChunkFromChunkCoords(par1 &gt;&gt; 4, par2 &gt;&gt; 4);<a name="line.488"></a>
<FONT color="green">489</FONT>        }<a name="line.489"></a>
<FONT color="green">490</FONT>    <a name="line.490"></a>
<FONT color="green">491</FONT>        /**<a name="line.491"></a>
<FONT color="green">492</FONT>         * Returns back a chunk looked up by chunk coordinates Args: x, y<a name="line.492"></a>
<FONT color="green">493</FONT>         */<a name="line.493"></a>
<FONT color="green">494</FONT>        public Chunk getChunkFromChunkCoords(int par1, int par2)<a name="line.494"></a>
<FONT color="green">495</FONT>        {<a name="line.495"></a>
<FONT color="green">496</FONT>            return this.chunkProvider.provideChunk(par1, par2);<a name="line.496"></a>
<FONT color="green">497</FONT>        }<a name="line.497"></a>
<FONT color="green">498</FONT>    <a name="line.498"></a>
<FONT color="green">499</FONT>        /**<a name="line.499"></a>
<FONT color="green">500</FONT>         * Sets the block ID and metadata of a block in global coordinates<a name="line.500"></a>
<FONT color="green">501</FONT>         */<a name="line.501"></a>
<FONT color="green">502</FONT>        public boolean setBlockAndMetadata(int par1, int par2, int par3, int par4, int par5)<a name="line.502"></a>
<FONT color="green">503</FONT>        {<a name="line.503"></a>
<FONT color="green">504</FONT>            return this.setBlockAndMetadataWithUpdate(par1, par2, par3, par4, par5, true);<a name="line.504"></a>
<FONT color="green">505</FONT>        }<a name="line.505"></a>
<FONT color="green">506</FONT>    <a name="line.506"></a>
<FONT color="green">507</FONT>        /**<a name="line.507"></a>
<FONT color="green">508</FONT>         * Sets the block ID and metadata of a block, optionally marking it as needing update. Args: X,Y,Z, blockID,<a name="line.508"></a>
<FONT color="green">509</FONT>         * metadata, needsUpdate<a name="line.509"></a>
<FONT color="green">510</FONT>         */<a name="line.510"></a>
<FONT color="green">511</FONT>        public boolean setBlockAndMetadataWithUpdate(int par1, int par2, int par3, int par4, int par5, boolean par6)<a name="line.511"></a>
<FONT color="green">512</FONT>        {<a name="line.512"></a>
<FONT color="green">513</FONT>            if (par1 &gt;= -30000000 &amp;&amp; par3 &gt;= -30000000 &amp;&amp; par1 &lt; 30000000 &amp;&amp; par3 &lt; 30000000)<a name="line.513"></a>
<FONT color="green">514</FONT>            {<a name="line.514"></a>
<FONT color="green">515</FONT>                if (par2 &lt; 0)<a name="line.515"></a>
<FONT color="green">516</FONT>                {<a name="line.516"></a>
<FONT color="green">517</FONT>                    return false;<a name="line.517"></a>
<FONT color="green">518</FONT>                }<a name="line.518"></a>
<FONT color="green">519</FONT>                else if (par2 &gt;= 256)<a name="line.519"></a>
<FONT color="green">520</FONT>                {<a name="line.520"></a>
<FONT color="green">521</FONT>                    return false;<a name="line.521"></a>
<FONT color="green">522</FONT>                }<a name="line.522"></a>
<FONT color="green">523</FONT>                else<a name="line.523"></a>
<FONT color="green">524</FONT>                {<a name="line.524"></a>
<FONT color="green">525</FONT>                    Chunk var7 = this.getChunkFromChunkCoords(par1 &gt;&gt; 4, par3 &gt;&gt; 4);<a name="line.525"></a>
<FONT color="green">526</FONT>                    boolean var8 = var7.setBlockIDWithMetadata(par1 &amp; 15, par2, par3 &amp; 15, par4, par5);<a name="line.526"></a>
<FONT color="green">527</FONT>                    this.theProfiler.startSection("checkLight");<a name="line.527"></a>
<FONT color="green">528</FONT>                    this.updateAllLightTypes(par1, par2, par3);<a name="line.528"></a>
<FONT color="green">529</FONT>                    this.theProfiler.endSection();<a name="line.529"></a>
<FONT color="green">530</FONT>    <a name="line.530"></a>
<FONT color="green">531</FONT>                    if (par6 &amp;&amp; var8 &amp;&amp; (this.isRemote || var7.deferRender))<a name="line.531"></a>
<FONT color="green">532</FONT>                    {<a name="line.532"></a>
<FONT color="green">533</FONT>                        this.markBlockForUpdate(par1, par2, par3);<a name="line.533"></a>
<FONT color="green">534</FONT>                    }<a name="line.534"></a>
<FONT color="green">535</FONT>    <a name="line.535"></a>
<FONT color="green">536</FONT>                    return var8;<a name="line.536"></a>
<FONT color="green">537</FONT>                }<a name="line.537"></a>
<FONT color="green">538</FONT>            }<a name="line.538"></a>
<FONT color="green">539</FONT>            else<a name="line.539"></a>
<FONT color="green">540</FONT>            {<a name="line.540"></a>
<FONT color="green">541</FONT>                return false;<a name="line.541"></a>
<FONT color="green">542</FONT>            }<a name="line.542"></a>
<FONT color="green">543</FONT>        }<a name="line.543"></a>
<FONT color="green">544</FONT>    <a name="line.544"></a>
<FONT color="green">545</FONT>        /**<a name="line.545"></a>
<FONT color="green">546</FONT>         * Sets the block to the specified blockID at the block coordinates Args x, y, z, blockID<a name="line.546"></a>
<FONT color="green">547</FONT>         */<a name="line.547"></a>
<FONT color="green">548</FONT>        public boolean setBlock(int par1, int par2, int par3, int par4)<a name="line.548"></a>
<FONT color="green">549</FONT>        {<a name="line.549"></a>
<FONT color="green">550</FONT>            if (par1 &gt;= -30000000 &amp;&amp; par3 &gt;= -30000000 &amp;&amp; par1 &lt; 30000000 &amp;&amp; par3 &lt; 30000000)<a name="line.550"></a>
<FONT color="green">551</FONT>            {<a name="line.551"></a>
<FONT color="green">552</FONT>                if (par2 &lt; 0)<a name="line.552"></a>
<FONT color="green">553</FONT>                {<a name="line.553"></a>
<FONT color="green">554</FONT>                    return false;<a name="line.554"></a>
<FONT color="green">555</FONT>                }<a name="line.555"></a>
<FONT color="green">556</FONT>                else if (par2 &gt;= 256)<a name="line.556"></a>
<FONT color="green">557</FONT>                {<a name="line.557"></a>
<FONT color="green">558</FONT>                    return false;<a name="line.558"></a>
<FONT color="green">559</FONT>                }<a name="line.559"></a>
<FONT color="green">560</FONT>                else<a name="line.560"></a>
<FONT color="green">561</FONT>                {<a name="line.561"></a>
<FONT color="green">562</FONT>                    Chunk var5 = this.getChunkFromChunkCoords(par1 &gt;&gt; 4, par3 &gt;&gt; 4);<a name="line.562"></a>
<FONT color="green">563</FONT>                    boolean var6 = var5.setBlockID(par1 &amp; 15, par2, par3 &amp; 15, par4);<a name="line.563"></a>
<FONT color="green">564</FONT>                    this.theProfiler.startSection("checkLight");<a name="line.564"></a>
<FONT color="green">565</FONT>                    this.updateAllLightTypes(par1, par2, par3);<a name="line.565"></a>
<FONT color="green">566</FONT>                    this.theProfiler.endSection();<a name="line.566"></a>
<FONT color="green">567</FONT>    <a name="line.567"></a>
<FONT color="green">568</FONT>                    if (var6 &amp;&amp; (this.isRemote || var5.deferRender))<a name="line.568"></a>
<FONT color="green">569</FONT>                    {<a name="line.569"></a>
<FONT color="green">570</FONT>                        this.markBlockForUpdate(par1, par2, par3);<a name="line.570"></a>
<FONT color="green">571</FONT>                    }<a name="line.571"></a>
<FONT color="green">572</FONT>    <a name="line.572"></a>
<FONT color="green">573</FONT>                    return var6;<a name="line.573"></a>
<FONT color="green">574</FONT>                }<a name="line.574"></a>
<FONT color="green">575</FONT>            }<a name="line.575"></a>
<FONT color="green">576</FONT>            else<a name="line.576"></a>
<FONT color="green">577</FONT>            {<a name="line.577"></a>
<FONT color="green">578</FONT>                return false;<a name="line.578"></a>
<FONT color="green">579</FONT>            }<a name="line.579"></a>
<FONT color="green">580</FONT>        }<a name="line.580"></a>
<FONT color="green">581</FONT>    <a name="line.581"></a>
<FONT color="green">582</FONT>        /**<a name="line.582"></a>
<FONT color="green">583</FONT>         * Returns the block's material.<a name="line.583"></a>
<FONT color="green">584</FONT>         */<a name="line.584"></a>
<FONT color="green">585</FONT>        public Material getBlockMaterial(int par1, int par2, int par3)<a name="line.585"></a>
<FONT color="green">586</FONT>        {<a name="line.586"></a>
<FONT color="green">587</FONT>            int var4 = this.getBlockId(par1, par2, par3);<a name="line.587"></a>
<FONT color="green">588</FONT>            return var4 == 0 ? Material.air : Block.blocksList[var4].blockMaterial;<a name="line.588"></a>
<FONT color="green">589</FONT>        }<a name="line.589"></a>
<FONT color="green">590</FONT>    <a name="line.590"></a>
<FONT color="green">591</FONT>        /**<a name="line.591"></a>
<FONT color="green">592</FONT>         * Returns the block metadata at coords x,y,z<a name="line.592"></a>
<FONT color="green">593</FONT>         */<a name="line.593"></a>
<FONT color="green">594</FONT>        public int getBlockMetadata(int par1, int par2, int par3)<a name="line.594"></a>
<FONT color="green">595</FONT>        {<a name="line.595"></a>
<FONT color="green">596</FONT>            if (par1 &gt;= -30000000 &amp;&amp; par3 &gt;= -30000000 &amp;&amp; par1 &lt; 30000000 &amp;&amp; par3 &lt; 30000000)<a name="line.596"></a>
<FONT color="green">597</FONT>            {<a name="line.597"></a>
<FONT color="green">598</FONT>                if (par2 &lt; 0)<a name="line.598"></a>
<FONT color="green">599</FONT>                {<a name="line.599"></a>
<FONT color="green">600</FONT>                    return 0;<a name="line.600"></a>
<FONT color="green">601</FONT>                }<a name="line.601"></a>
<FONT color="green">602</FONT>                else if (par2 &gt;= 256)<a name="line.602"></a>
<FONT color="green">603</FONT>                {<a name="line.603"></a>
<FONT color="green">604</FONT>                    return 0;<a name="line.604"></a>
<FONT color="green">605</FONT>                }<a name="line.605"></a>
<FONT color="green">606</FONT>                else<a name="line.606"></a>
<FONT color="green">607</FONT>                {<a name="line.607"></a>
<FONT color="green">608</FONT>                    Chunk var4 = this.getChunkFromChunkCoords(par1 &gt;&gt; 4, par3 &gt;&gt; 4);<a name="line.608"></a>
<FONT color="green">609</FONT>                    par1 &amp;= 15;<a name="line.609"></a>
<FONT color="green">610</FONT>                    par3 &amp;= 15;<a name="line.610"></a>
<FONT color="green">611</FONT>                    return var4.getBlockMetadata(par1, par2, par3);<a name="line.611"></a>
<FONT color="green">612</FONT>                }<a name="line.612"></a>
<FONT color="green">613</FONT>            }<a name="line.613"></a>
<FONT color="green">614</FONT>            else<a name="line.614"></a>
<FONT color="green">615</FONT>            {<a name="line.615"></a>
<FONT color="green">616</FONT>                return 0;<a name="line.616"></a>
<FONT color="green">617</FONT>            }<a name="line.617"></a>
<FONT color="green">618</FONT>        }<a name="line.618"></a>
<FONT color="green">619</FONT>    <a name="line.619"></a>
<FONT color="green">620</FONT>        /**<a name="line.620"></a>
<FONT color="green">621</FONT>         * Sets the blocks metadata and if set will then notify blocks that this block changed. Args: x, y, z, metadata<a name="line.621"></a>
<FONT color="green">622</FONT>         */<a name="line.622"></a>
<FONT color="green">623</FONT>        public void setBlockMetadataWithNotify(int par1, int par2, int par3, int par4)<a name="line.623"></a>
<FONT color="green">624</FONT>        {<a name="line.624"></a>
<FONT color="green">625</FONT>            if (this.setBlockMetadata(par1, par2, par3, par4))<a name="line.625"></a>
<FONT color="green">626</FONT>            {<a name="line.626"></a>
<FONT color="green">627</FONT>                this.notifyBlockChange(par1, par2, par3, this.getBlockId(par1, par2, par3));<a name="line.627"></a>
<FONT color="green">628</FONT>            }<a name="line.628"></a>
<FONT color="green">629</FONT>        }<a name="line.629"></a>
<FONT color="green">630</FONT>    <a name="line.630"></a>
<FONT color="green">631</FONT>        /**<a name="line.631"></a>
<FONT color="green">632</FONT>         * Set the metadata of a block in global coordinates<a name="line.632"></a>
<FONT color="green">633</FONT>         */<a name="line.633"></a>
<FONT color="green">634</FONT>        public boolean setBlockMetadata(int par1, int par2, int par3, int par4)<a name="line.634"></a>
<FONT color="green">635</FONT>        {<a name="line.635"></a>
<FONT color="green">636</FONT>            if (par1 &gt;= -30000000 &amp;&amp; par3 &gt;= -30000000 &amp;&amp; par1 &lt; 30000000 &amp;&amp; par3 &lt; 30000000)<a name="line.636"></a>
<FONT color="green">637</FONT>            {<a name="line.637"></a>
<FONT color="green">638</FONT>                if (par2 &lt; 0)<a name="line.638"></a>
<FONT color="green">639</FONT>                {<a name="line.639"></a>
<FONT color="green">640</FONT>                    return false;<a name="line.640"></a>
<FONT color="green">641</FONT>                }<a name="line.641"></a>
<FONT color="green">642</FONT>                else if (par2 &gt;= 256)<a name="line.642"></a>
<FONT color="green">643</FONT>                {<a name="line.643"></a>
<FONT color="green">644</FONT>                    return false;<a name="line.644"></a>
<FONT color="green">645</FONT>                }<a name="line.645"></a>
<FONT color="green">646</FONT>                else<a name="line.646"></a>
<FONT color="green">647</FONT>                {<a name="line.647"></a>
<FONT color="green">648</FONT>                    Chunk var5 = this.getChunkFromChunkCoords(par1 &gt;&gt; 4, par3 &gt;&gt; 4);<a name="line.648"></a>
<FONT color="green">649</FONT>                    int var6 = par1 &amp; 15;<a name="line.649"></a>
<FONT color="green">650</FONT>                    int var7 = par3 &amp; 15;<a name="line.650"></a>
<FONT color="green">651</FONT>                    boolean var8 = var5.setBlockMetadata(var6, par2, var7, par4);<a name="line.651"></a>
<FONT color="green">652</FONT>    <a name="line.652"></a>
<FONT color="green">653</FONT>                    if (var8 &amp;&amp; (this.isRemote || var5.deferRender &amp;&amp; Block.requiresSelfNotify[var5.getBlockID(var6, par2, var7) &amp; 4095]))<a name="line.653"></a>
<FONT color="green">654</FONT>                    {<a name="line.654"></a>
<FONT color="green">655</FONT>                        this.markBlockForUpdate(par1, par2, par3);<a name="line.655"></a>
<FONT color="green">656</FONT>                    }<a name="line.656"></a>
<FONT color="green">657</FONT>    <a name="line.657"></a>
<FONT color="green">658</FONT>                    return var8;<a name="line.658"></a>
<FONT color="green">659</FONT>                }<a name="line.659"></a>
<FONT color="green">660</FONT>            }<a name="line.660"></a>
<FONT color="green">661</FONT>            else<a name="line.661"></a>
<FONT color="green">662</FONT>            {<a name="line.662"></a>
<FONT color="green">663</FONT>                return false;<a name="line.663"></a>
<FONT color="green">664</FONT>            }<a name="line.664"></a>
<FONT color="green">665</FONT>        }<a name="line.665"></a>
<FONT color="green">666</FONT>    <a name="line.666"></a>
<FONT color="green">667</FONT>        /**<a name="line.667"></a>
<FONT color="green">668</FONT>         * Sets a block and notifies relevant systems with the block change  Args: x, y, z, blockID<a name="line.668"></a>
<FONT color="green">669</FONT>         */<a name="line.669"></a>
<FONT color="green">670</FONT>        public boolean setBlockWithNotify(int par1, int par2, int par3, int par4)<a name="line.670"></a>
<FONT color="green">671</FONT>        {<a name="line.671"></a>
<FONT color="green">672</FONT>            if (this.setBlock(par1, par2, par3, par4))<a name="line.672"></a>
<FONT color="green">673</FONT>            {<a name="line.673"></a>
<FONT color="green">674</FONT>                this.notifyBlockChange(par1, par2, par3, par4);<a name="line.674"></a>
<FONT color="green">675</FONT>                return true;<a name="line.675"></a>
<FONT color="green">676</FONT>            }<a name="line.676"></a>
<FONT color="green">677</FONT>            else<a name="line.677"></a>
<FONT color="green">678</FONT>            {<a name="line.678"></a>
<FONT color="green">679</FONT>                return false;<a name="line.679"></a>
<FONT color="green">680</FONT>            }<a name="line.680"></a>
<FONT color="green">681</FONT>        }<a name="line.681"></a>
<FONT color="green">682</FONT>    <a name="line.682"></a>
<FONT color="green">683</FONT>        /**<a name="line.683"></a>
<FONT color="green">684</FONT>         * Sets the block ID and metadata, then notifies neighboring blocks of the change Params: x, y, z, BlockID, Metadata<a name="line.684"></a>
<FONT color="green">685</FONT>         */<a name="line.685"></a>
<FONT color="green">686</FONT>        public boolean setBlockAndMetadataWithNotify(int par1, int par2, int par3, int par4, int par5)<a name="line.686"></a>
<FONT color="green">687</FONT>        {<a name="line.687"></a>
<FONT color="green">688</FONT>            if (this.setBlockAndMetadata(par1, par2, par3, par4, par5))<a name="line.688"></a>
<FONT color="green">689</FONT>            {<a name="line.689"></a>
<FONT color="green">690</FONT>                this.notifyBlockChange(par1, par2, par3, par4);<a name="line.690"></a>
<FONT color="green">691</FONT>                return true;<a name="line.691"></a>
<FONT color="green">692</FONT>            }<a name="line.692"></a>
<FONT color="green">693</FONT>            else<a name="line.693"></a>
<FONT color="green">694</FONT>            {<a name="line.694"></a>
<FONT color="green">695</FONT>                return false;<a name="line.695"></a>
<FONT color="green">696</FONT>            }<a name="line.696"></a>
<FONT color="green">697</FONT>        }<a name="line.697"></a>
<FONT color="green">698</FONT>    <a name="line.698"></a>
<FONT color="green">699</FONT>        /**<a name="line.699"></a>
<FONT color="green">700</FONT>         * On the client, re-renders the block. On the server, sends the block to the client (which will re-render it),<a name="line.700"></a>
<FONT color="green">701</FONT>         * including the tile entity description packet if applicable. Args: x, y, z<a name="line.701"></a>
<FONT color="green">702</FONT>         */<a name="line.702"></a>
<FONT color="green">703</FONT>        public void markBlockForUpdate(int par1, int par2, int par3)<a name="line.703"></a>
<FONT color="green">704</FONT>        {<a name="line.704"></a>
<FONT color="green">705</FONT>            for (int var4 = 0; var4 &lt; this.worldAccesses.size(); ++var4)<a name="line.705"></a>
<FONT color="green">706</FONT>            {<a name="line.706"></a>
<FONT color="green">707</FONT>                ((IWorldAccess)this.worldAccesses.get(var4)).markBlockForUpdate(par1, par2, par3);<a name="line.707"></a>
<FONT color="green">708</FONT>            }<a name="line.708"></a>
<FONT color="green">709</FONT>        }<a name="line.709"></a>
<FONT color="green">710</FONT>    <a name="line.710"></a>
<FONT color="green">711</FONT>        /**<a name="line.711"></a>
<FONT color="green">712</FONT>         * The block type change and need to notify other systems  Args: x, y, z, blockID<a name="line.712"></a>
<FONT color="green">713</FONT>         */<a name="line.713"></a>
<FONT color="green">714</FONT>        public void notifyBlockChange(int par1, int par2, int par3, int par4)<a name="line.714"></a>
<FONT color="green">715</FONT>        {<a name="line.715"></a>
<FONT color="green">716</FONT>            this.notifyBlocksOfNeighborChange(par1, par2, par3, par4);<a name="line.716"></a>
<FONT color="green">717</FONT>        }<a name="line.717"></a>
<FONT color="green">718</FONT>    <a name="line.718"></a>
<FONT color="green">719</FONT>        /**<a name="line.719"></a>
<FONT color="green">720</FONT>         * marks a vertical line of blocks as dirty<a name="line.720"></a>
<FONT color="green">721</FONT>         */<a name="line.721"></a>
<FONT color="green">722</FONT>        public void markBlocksDirtyVertical(int par1, int par2, int par3, int par4)<a name="line.722"></a>
<FONT color="green">723</FONT>        {<a name="line.723"></a>
<FONT color="green">724</FONT>            int var5;<a name="line.724"></a>
<FONT color="green">725</FONT>    <a name="line.725"></a>
<FONT color="green">726</FONT>            if (par3 &gt; par4)<a name="line.726"></a>
<FONT color="green">727</FONT>            {<a name="line.727"></a>
<FONT color="green">728</FONT>                var5 = par4;<a name="line.728"></a>
<FONT color="green">729</FONT>                par4 = par3;<a name="line.729"></a>
<FONT color="green">730</FONT>                par3 = var5;<a name="line.730"></a>
<FONT color="green">731</FONT>            }<a name="line.731"></a>
<FONT color="green">732</FONT>    <a name="line.732"></a>
<FONT color="green">733</FONT>            if (!this.provider.hasNoSky)<a name="line.733"></a>
<FONT color="green">734</FONT>            {<a name="line.734"></a>
<FONT color="green">735</FONT>                for (var5 = par3; var5 &lt;= par4; ++var5)<a name="line.735"></a>
<FONT color="green">736</FONT>                {<a name="line.736"></a>
<FONT color="green">737</FONT>                    this.updateLightByType(EnumSkyBlock.Sky, par1, var5, par2);<a name="line.737"></a>
<FONT color="green">738</FONT>                }<a name="line.738"></a>
<FONT color="green">739</FONT>            }<a name="line.739"></a>
<FONT color="green">740</FONT>    <a name="line.740"></a>
<FONT color="green">741</FONT>            this.markBlockRangeForRenderUpdate(par1, par3, par2, par1, par4, par2);<a name="line.741"></a>
<FONT color="green">742</FONT>        }<a name="line.742"></a>
<FONT color="green">743</FONT>    <a name="line.743"></a>
<FONT color="green">744</FONT>        /**<a name="line.744"></a>
<FONT color="green">745</FONT>         * On the client, re-renders this block. On the server, does nothing. Appears to be redundant.<a name="line.745"></a>
<FONT color="green">746</FONT>         */<a name="line.746"></a>
<FONT color="green">747</FONT>        public void markBlockForRenderUpdate2(int par1, int par2, int par3)<a name="line.747"></a>
<FONT color="green">748</FONT>        {<a name="line.748"></a>
<FONT color="green">749</FONT>            for (int var4 = 0; var4 &lt; this.worldAccesses.size(); ++var4)<a name="line.749"></a>
<FONT color="green">750</FONT>            {<a name="line.750"></a>
<FONT color="green">751</FONT>                ((IWorldAccess)this.worldAccesses.get(var4)).markBlockRangeForRenderUpdate(par1, par2, par3, par1, par2, par3);<a name="line.751"></a>
<FONT color="green">752</FONT>            }<a name="line.752"></a>
<FONT color="green">753</FONT>        }<a name="line.753"></a>
<FONT color="green">754</FONT>    <a name="line.754"></a>
<FONT color="green">755</FONT>        /**<a name="line.755"></a>
<FONT color="green">756</FONT>         * On the client, re-renders all blocks in this range, inclusive. On the server, does nothing. Args: min x, min y,<a name="line.756"></a>
<FONT color="green">757</FONT>         * min z, max x, max y, max z<a name="line.757"></a>
<FONT color="green">758</FONT>         */<a name="line.758"></a>
<FONT color="green">759</FONT>        public void markBlockRangeForRenderUpdate(int par1, int par2, int par3, int par4, int par5, int par6)<a name="line.759"></a>
<FONT color="green">760</FONT>        {<a name="line.760"></a>
<FONT color="green">761</FONT>            for (int var7 = 0; var7 &lt; this.worldAccesses.size(); ++var7)<a name="line.761"></a>
<FONT color="green">762</FONT>            {<a name="line.762"></a>
<FONT color="green">763</FONT>                ((IWorldAccess)this.worldAccesses.get(var7)).markBlockRangeForRenderUpdate(par1, par2, par3, par4, par5, par6);<a name="line.763"></a>
<FONT color="green">764</FONT>            }<a name="line.764"></a>
<FONT color="green">765</FONT>        }<a name="line.765"></a>
<FONT color="green">766</FONT>    <a name="line.766"></a>
<FONT color="green">767</FONT>        /**<a name="line.767"></a>
<FONT color="green">768</FONT>         * Notifies neighboring blocks that this specified block changed  Args: x, y, z, blockID<a name="line.768"></a>
<FONT color="green">769</FONT>         */<a name="line.769"></a>
<FONT color="green">770</FONT>        public void notifyBlocksOfNeighborChange(int par1, int par2, int par3, int par4)<a name="line.770"></a>
<FONT color="green">771</FONT>        {<a name="line.771"></a>
<FONT color="green">772</FONT>            this.notifyBlockOfNeighborChange(par1 - 1, par2, par3, par4);<a name="line.772"></a>
<FONT color="green">773</FONT>            this.notifyBlockOfNeighborChange(par1 + 1, par2, par3, par4);<a name="line.773"></a>
<FONT color="green">774</FONT>            this.notifyBlockOfNeighborChange(par1, par2 - 1, par3, par4);<a name="line.774"></a>
<FONT color="green">775</FONT>            this.notifyBlockOfNeighborChange(par1, par2 + 1, par3, par4);<a name="line.775"></a>
<FONT color="green">776</FONT>            this.notifyBlockOfNeighborChange(par1, par2, par3 - 1, par4);<a name="line.776"></a>
<FONT color="green">777</FONT>            this.notifyBlockOfNeighborChange(par1, par2, par3 + 1, par4);<a name="line.777"></a>
<FONT color="green">778</FONT>        }<a name="line.778"></a>
<FONT color="green">779</FONT>    <a name="line.779"></a>
<FONT color="green">780</FONT>        /**<a name="line.780"></a>
<FONT color="green">781</FONT>         * Notifies a block that one of its neighbor change to the specified type Args: x, y, z, blockID<a name="line.781"></a>
<FONT color="green">782</FONT>         */<a name="line.782"></a>
<FONT color="green">783</FONT>        private void notifyBlockOfNeighborChange(int par1, int par2, int par3, int par4)<a name="line.783"></a>
<FONT color="green">784</FONT>        {<a name="line.784"></a>
<FONT color="green">785</FONT>            if (!this.editingBlocks &amp;&amp; !this.isRemote)<a name="line.785"></a>
<FONT color="green">786</FONT>            {<a name="line.786"></a>
<FONT color="green">787</FONT>                int var5 = this.getBlockId(par1, par2, par3);<a name="line.787"></a>
<FONT color="green">788</FONT>                Block var6 = Block.blocksList[var5];<a name="line.788"></a>
<FONT color="green">789</FONT>    <a name="line.789"></a>
<FONT color="green">790</FONT>                if (var6 != null)<a name="line.790"></a>
<FONT color="green">791</FONT>                {<a name="line.791"></a>
<FONT color="green">792</FONT>                    try<a name="line.792"></a>
<FONT color="green">793</FONT>                    {<a name="line.793"></a>
<FONT color="green">794</FONT>                        var6.onNeighborBlockChange(this, par1, par2, par3, par4);<a name="line.794"></a>
<FONT color="green">795</FONT>                    }<a name="line.795"></a>
<FONT color="green">796</FONT>                    catch (Throwable var13)<a name="line.796"></a>
<FONT color="green">797</FONT>                    {<a name="line.797"></a>
<FONT color="green">798</FONT>                        CrashReport var8 = CrashReport.func_85055_a(var13, "Exception while updating neighbours");<a name="line.798"></a>
<FONT color="green">799</FONT>                        CrashReportCategory var9 = var8.func_85058_a("Block being updated");<a name="line.799"></a>
<FONT color="green">800</FONT>                        int var10;<a name="line.800"></a>
<FONT color="green">801</FONT>    <a name="line.801"></a>
<FONT color="green">802</FONT>                        try<a name="line.802"></a>
<FONT color="green">803</FONT>                        {<a name="line.803"></a>
<FONT color="green">804</FONT>                            var10 = this.getBlockMetadata(par1, par2, par3);<a name="line.804"></a>
<FONT color="green">805</FONT>                        }<a name="line.805"></a>
<FONT color="green">806</FONT>                        catch (Throwable var12)<a name="line.806"></a>
<FONT color="green">807</FONT>                        {<a name="line.807"></a>
<FONT color="green">808</FONT>                            var10 = -1;<a name="line.808"></a>
<FONT color="green">809</FONT>                        }<a name="line.809"></a>
<FONT color="green">810</FONT>    <a name="line.810"></a>
<FONT color="green">811</FONT>                        var9.addCrashSectionCallable("Source block type", new CallableLvl1(this, par4));<a name="line.811"></a>
<FONT color="green">812</FONT>                        CrashReportCategory.func_85068_a(var9, par1, par2, par3, var5, var10);<a name="line.812"></a>
<FONT color="green">813</FONT>                        throw new ReportedException(var8);<a name="line.813"></a>
<FONT color="green">814</FONT>                    }<a name="line.814"></a>
<FONT color="green">815</FONT>                }<a name="line.815"></a>
<FONT color="green">816</FONT>            }<a name="line.816"></a>
<FONT color="green">817</FONT>        }<a name="line.817"></a>
<FONT color="green">818</FONT>    <a name="line.818"></a>
<FONT color="green">819</FONT>        /**<a name="line.819"></a>
<FONT color="green">820</FONT>         * Checks if the specified block is able to see the sky<a name="line.820"></a>
<FONT color="green">821</FONT>         */<a name="line.821"></a>
<FONT color="green">822</FONT>        public boolean canBlockSeeTheSky(int par1, int par2, int par3)<a name="line.822"></a>
<FONT color="green">823</FONT>        {<a name="line.823"></a>
<FONT color="green">824</FONT>            return this.getChunkFromChunkCoords(par1 &gt;&gt; 4, par3 &gt;&gt; 4).canBlockSeeTheSky(par1 &amp; 15, par2, par3 &amp; 15);<a name="line.824"></a>
<FONT color="green">825</FONT>        }<a name="line.825"></a>
<FONT color="green">826</FONT>    <a name="line.826"></a>
<FONT color="green">827</FONT>        /**<a name="line.827"></a>
<FONT color="green">828</FONT>         * Does the same as getBlockLightValue_do but without checking if its not a normal block<a name="line.828"></a>
<FONT color="green">829</FONT>         */<a name="line.829"></a>
<FONT color="green">830</FONT>        public int getFullBlockLightValue(int par1, int par2, int par3)<a name="line.830"></a>
<FONT color="green">831</FONT>        {<a name="line.831"></a>
<FONT color="green">832</FONT>            if (par2 &lt; 0)<a name="line.832"></a>
<FONT color="green">833</FONT>            {<a name="line.833"></a>
<FONT color="green">834</FONT>                return 0;<a name="line.834"></a>
<FONT color="green">835</FONT>            }<a name="line.835"></a>
<FONT color="green">836</FONT>            else<a name="line.836"></a>
<FONT color="green">837</FONT>            {<a name="line.837"></a>
<FONT color="green">838</FONT>                if (par2 &gt;= 256)<a name="line.838"></a>
<FONT color="green">839</FONT>                {<a name="line.839"></a>
<FONT color="green">840</FONT>                    par2 = 255;<a name="line.840"></a>
<FONT color="green">841</FONT>                }<a name="line.841"></a>
<FONT color="green">842</FONT>    <a name="line.842"></a>
<FONT color="green">843</FONT>                return this.getChunkFromChunkCoords(par1 &gt;&gt; 4, par3 &gt;&gt; 4).getBlockLightValue(par1 &amp; 15, par2, par3 &amp; 15, 0);<a name="line.843"></a>
<FONT color="green">844</FONT>            }<a name="line.844"></a>
<FONT color="green">845</FONT>        }<a name="line.845"></a>
<FONT color="green">846</FONT>    <a name="line.846"></a>
<FONT color="green">847</FONT>        /**<a name="line.847"></a>
<FONT color="green">848</FONT>         * Gets the light value of a block location<a name="line.848"></a>
<FONT color="green">849</FONT>         */<a name="line.849"></a>
<FONT color="green">850</FONT>        public int getBlockLightValue(int par1, int par2, int par3)<a name="line.850"></a>
<FONT color="green">851</FONT>        {<a name="line.851"></a>
<FONT color="green">852</FONT>            return this.getBlockLightValue_do(par1, par2, par3, true);<a name="line.852"></a>
<FONT color="green">853</FONT>        }<a name="line.853"></a>
<FONT color="green">854</FONT>    <a name="line.854"></a>
<FONT color="green">855</FONT>        /**<a name="line.855"></a>
<FONT color="green">856</FONT>         * Gets the light value of a block location. This is the actual function that gets the value and has a bool flag<a name="line.856"></a>
<FONT color="green">857</FONT>         * that indicates if its a half step block to get the maximum light value of a direct neighboring block (left,<a name="line.857"></a>
<FONT color="green">858</FONT>         * right, forward, back, and up)<a name="line.858"></a>
<FONT color="green">859</FONT>         */<a name="line.859"></a>
<FONT color="green">860</FONT>        public int getBlockLightValue_do(int par1, int par2, int par3, boolean par4)<a name="line.860"></a>
<FONT color="green">861</FONT>        {<a name="line.861"></a>
<FONT color="green">862</FONT>            if (par1 &gt;= -30000000 &amp;&amp; par3 &gt;= -30000000 &amp;&amp; par1 &lt; 30000000 &amp;&amp; par3 &lt; 30000000)<a name="line.862"></a>
<FONT color="green">863</FONT>            {<a name="line.863"></a>
<FONT color="green">864</FONT>                if (par4)<a name="line.864"></a>
<FONT color="green">865</FONT>                {<a name="line.865"></a>
<FONT color="green">866</FONT>                    int var5 = this.getBlockId(par1, par2, par3);<a name="line.866"></a>
<FONT color="green">867</FONT>    <a name="line.867"></a>
<FONT color="green">868</FONT>                    if (var5 == Block.stoneSingleSlab.blockID || var5 == Block.woodSingleSlab.blockID || var5 == Block.tilledField.blockID || var5 == Block.stairCompactCobblestone.blockID || var5 == Block.stairCompactPlanks.blockID)<a name="line.868"></a>
<FONT color="green">869</FONT>                    {<a name="line.869"></a>
<FONT color="green">870</FONT>                        int var6 = this.getBlockLightValue_do(par1, par2 + 1, par3, false);<a name="line.870"></a>
<FONT color="green">871</FONT>                        int var7 = this.getBlockLightValue_do(par1 + 1, par2, par3, false);<a name="line.871"></a>
<FONT color="green">872</FONT>                        int var8 = this.getBlockLightValue_do(par1 - 1, par2, par3, false);<a name="line.872"></a>
<FONT color="green">873</FONT>                        int var9 = this.getBlockLightValue_do(par1, par2, par3 + 1, false);<a name="line.873"></a>
<FONT color="green">874</FONT>                        int var10 = this.getBlockLightValue_do(par1, par2, par3 - 1, false);<a name="line.874"></a>
<FONT color="green">875</FONT>    <a name="line.875"></a>
<FONT color="green">876</FONT>                        if (var7 &gt; var6)<a name="line.876"></a>
<FONT color="green">877</FONT>                        {<a name="line.877"></a>
<FONT color="green">878</FONT>                            var6 = var7;<a name="line.878"></a>
<FONT color="green">879</FONT>                        }<a name="line.879"></a>
<FONT color="green">880</FONT>    <a name="line.880"></a>
<FONT color="green">881</FONT>                        if (var8 &gt; var6)<a name="line.881"></a>
<FONT color="green">882</FONT>                        {<a name="line.882"></a>
<FONT color="green">883</FONT>                            var6 = var8;<a name="line.883"></a>
<FONT color="green">884</FONT>                        }<a name="line.884"></a>
<FONT color="green">885</FONT>    <a name="line.885"></a>
<FONT color="green">886</FONT>                        if (var9 &gt; var6)<a name="line.886"></a>
<FONT color="green">887</FONT>                        {<a name="line.887"></a>
<FONT color="green">888</FONT>                            var6 = var9;<a name="line.888"></a>
<FONT color="green">889</FONT>                        }<a name="line.889"></a>
<FONT color="green">890</FONT>    <a name="line.890"></a>
<FONT color="green">891</FONT>                        if (var10 &gt; var6)<a name="line.891"></a>
<FONT color="green">892</FONT>                        {<a name="line.892"></a>
<FONT color="green">893</FONT>                            var6 = var10;<a name="line.893"></a>
<FONT color="green">894</FONT>                        }<a name="line.894"></a>
<FONT color="green">895</FONT>    <a name="line.895"></a>
<FONT color="green">896</FONT>                        return var6;<a name="line.896"></a>
<FONT color="green">897</FONT>                    }<a name="line.897"></a>
<FONT color="green">898</FONT>                }<a name="line.898"></a>
<FONT color="green">899</FONT>    <a name="line.899"></a>
<FONT color="green">900</FONT>                if (par2 &lt; 0)<a name="line.900"></a>
<FONT color="green">901</FONT>                {<a name="line.901"></a>
<FONT color="green">902</FONT>                    return 0;<a name="line.902"></a>
<FONT color="green">903</FONT>                }<a name="line.903"></a>
<FONT color="green">904</FONT>                else<a name="line.904"></a>
<FONT color="green">905</FONT>                {<a name="line.905"></a>
<FONT color="green">906</FONT>                    if (par2 &gt;= 256)<a name="line.906"></a>
<FONT color="green">907</FONT>                    {<a name="line.907"></a>
<FONT color="green">908</FONT>                        par2 = 255;<a name="line.908"></a>
<FONT color="green">909</FONT>                    }<a name="line.909"></a>
<FONT color="green">910</FONT>    <a name="line.910"></a>
<FONT color="green">911</FONT>                    Chunk var11 = this.getChunkFromChunkCoords(par1 &gt;&gt; 4, par3 &gt;&gt; 4);<a name="line.911"></a>
<FONT color="green">912</FONT>                    par1 &amp;= 15;<a name="line.912"></a>
<FONT color="green">913</FONT>                    par3 &amp;= 15;<a name="line.913"></a>
<FONT color="green">914</FONT>                    return var11.getBlockLightValue(par1, par2, par3, this.skylightSubtracted);<a name="line.914"></a>
<FONT color="green">915</FONT>                }<a name="line.915"></a>
<FONT color="green">916</FONT>            }<a name="line.916"></a>
<FONT color="green">917</FONT>            else<a name="line.917"></a>
<FONT color="green">918</FONT>            {<a name="line.918"></a>
<FONT color="green">919</FONT>                return 15;<a name="line.919"></a>
<FONT color="green">920</FONT>            }<a name="line.920"></a>
<FONT color="green">921</FONT>        }<a name="line.921"></a>
<FONT color="green">922</FONT>    <a name="line.922"></a>
<FONT color="green">923</FONT>        /**<a name="line.923"></a>
<FONT color="green">924</FONT>         * Returns the y coordinate with a block in it at this x, z coordinate<a name="line.924"></a>
<FONT color="green">925</FONT>         */<a name="line.925"></a>
<FONT color="green">926</FONT>        public int getHeightValue(int par1, int par2)<a name="line.926"></a>
<FONT color="green">927</FONT>        {<a name="line.927"></a>
<FONT color="green">928</FONT>            if (par1 &gt;= -30000000 &amp;&amp; par2 &gt;= -30000000 &amp;&amp; par1 &lt; 30000000 &amp;&amp; par2 &lt; 30000000)<a name="line.928"></a>
<FONT color="green">929</FONT>            {<a name="line.929"></a>
<FONT color="green">930</FONT>                if (!this.chunkExists(par1 &gt;&gt; 4, par2 &gt;&gt; 4))<a name="line.930"></a>
<FONT color="green">931</FONT>                {<a name="line.931"></a>
<FONT color="green">932</FONT>                    return 0;<a name="line.932"></a>
<FONT color="green">933</FONT>                }<a name="line.933"></a>
<FONT color="green">934</FONT>                else<a name="line.934"></a>
<FONT color="green">935</FONT>                {<a name="line.935"></a>
<FONT color="green">936</FONT>                    Chunk var3 = this.getChunkFromChunkCoords(par1 &gt;&gt; 4, par2 &gt;&gt; 4);<a name="line.936"></a>
<FONT color="green">937</FONT>                    return var3.getHeightValue(par1 &amp; 15, par2 &amp; 15);<a name="line.937"></a>
<FONT color="green">938</FONT>                }<a name="line.938"></a>
<FONT color="green">939</FONT>            }<a name="line.939"></a>
<FONT color="green">940</FONT>            else<a name="line.940"></a>
<FONT color="green">941</FONT>            {<a name="line.941"></a>
<FONT color="green">942</FONT>                return 0;<a name="line.942"></a>
<FONT color="green">943</FONT>            }<a name="line.943"></a>
<FONT color="green">944</FONT>        }<a name="line.944"></a>
<FONT color="green">945</FONT>    <a name="line.945"></a>
<FONT color="green">946</FONT>        public int func_82734_g(int par1, int par2)<a name="line.946"></a>
<FONT color="green">947</FONT>        {<a name="line.947"></a>
<FONT color="green">948</FONT>            if (par1 &gt;= -30000000 &amp;&amp; par2 &gt;= -30000000 &amp;&amp; par1 &lt; 30000000 &amp;&amp; par2 &lt; 30000000)<a name="line.948"></a>
<FONT color="green">949</FONT>            {<a name="line.949"></a>
<FONT color="green">950</FONT>                if (!this.chunkExists(par1 &gt;&gt; 4, par2 &gt;&gt; 4))<a name="line.950"></a>
<FONT color="green">951</FONT>                {<a name="line.951"></a>
<FONT color="green">952</FONT>                    return 0;<a name="line.952"></a>
<FONT color="green">953</FONT>                }<a name="line.953"></a>
<FONT color="green">954</FONT>                else<a name="line.954"></a>
<FONT color="green">955</FONT>                {<a name="line.955"></a>
<FONT color="green">956</FONT>                    Chunk var3 = this.getChunkFromChunkCoords(par1 &gt;&gt; 4, par2 &gt;&gt; 4);<a name="line.956"></a>
<FONT color="green">957</FONT>                    return var3.field_82912_p;<a name="line.957"></a>
<FONT color="green">958</FONT>                }<a name="line.958"></a>
<FONT color="green">959</FONT>            }<a name="line.959"></a>
<FONT color="green">960</FONT>            else<a name="line.960"></a>
<FONT color="green">961</FONT>            {<a name="line.961"></a>
<FONT color="green">962</FONT>                return 0;<a name="line.962"></a>
<FONT color="green">963</FONT>            }<a name="line.963"></a>
<FONT color="green">964</FONT>        }<a name="line.964"></a>
<FONT color="green">965</FONT>    <a name="line.965"></a>
<FONT color="green">966</FONT>        @SideOnly(Side.CLIENT)<a name="line.966"></a>
<FONT color="green">967</FONT>    <a name="line.967"></a>
<FONT color="green">968</FONT>        /**<a name="line.968"></a>
<FONT color="green">969</FONT>         * Brightness for SkyBlock.Sky is clear white and (through color computing it is assumed) DEPENDENT ON DAYTIME.<a name="line.969"></a>
<FONT color="green">970</FONT>         * Brightness for SkyBlock.Block is yellowish and independent.<a name="line.970"></a>
<FONT color="green">971</FONT>         */<a name="line.971"></a>
<FONT color="green">972</FONT>        public int getSkyBlockTypeBrightness(EnumSkyBlock par1EnumSkyBlock, int par2, int par3, int par4)<a name="line.972"></a>
<FONT color="green">973</FONT>        {<a name="line.973"></a>
<FONT color="green">974</FONT>            if (this.provider.hasNoSky &amp;&amp; par1EnumSkyBlock == EnumSkyBlock.Sky)<a name="line.974"></a>
<FONT color="green">975</FONT>            {<a name="line.975"></a>
<FONT color="green">976</FONT>                return 0;<a name="line.976"></a>
<FONT color="green">977</FONT>            }<a name="line.977"></a>
<FONT color="green">978</FONT>            else<a name="line.978"></a>
<FONT color="green">979</FONT>            {<a name="line.979"></a>
<FONT color="green">980</FONT>                if (par3 &lt; 0)<a name="line.980"></a>
<FONT color="green">981</FONT>                {<a name="line.981"></a>
<FONT color="green">982</FONT>                    par3 = 0;<a name="line.982"></a>
<FONT color="green">983</FONT>                }<a name="line.983"></a>
<FONT color="green">984</FONT>    <a name="line.984"></a>
<FONT color="green">985</FONT>                if (par3 &gt;= 256)<a name="line.985"></a>
<FONT color="green">986</FONT>                {<a name="line.986"></a>
<FONT color="green">987</FONT>                    return par1EnumSkyBlock.defaultLightValue;<a name="line.987"></a>
<FONT color="green">988</FONT>                }<a name="line.988"></a>
<FONT color="green">989</FONT>                else if (par2 &gt;= -30000000 &amp;&amp; par4 &gt;= -30000000 &amp;&amp; par2 &lt; 30000000 &amp;&amp; par4 &lt; 30000000)<a name="line.989"></a>
<FONT color="green">990</FONT>                {<a name="line.990"></a>
<FONT color="green">991</FONT>                    int var5 = par2 &gt;&gt; 4;<a name="line.991"></a>
<FONT color="green">992</FONT>                    int var6 = par4 &gt;&gt; 4;<a name="line.992"></a>
<FONT color="green">993</FONT>    <a name="line.993"></a>
<FONT color="green">994</FONT>                    if (!this.chunkExists(var5, var6))<a name="line.994"></a>
<FONT color="green">995</FONT>                    {<a name="line.995"></a>
<FONT color="green">996</FONT>                        return par1EnumSkyBlock.defaultLightValue;<a name="line.996"></a>
<FONT color="green">997</FONT>                    }<a name="line.997"></a>
<FONT color="green">998</FONT>                    else if (Block.useNeighborBrightness[this.getBlockId(par2, par3, par4)])<a name="line.998"></a>
<FONT color="green">999</FONT>                    {<a name="line.999"></a>
<FONT color="green">1000</FONT>                        int var12 = this.getSavedLightValue(par1EnumSkyBlock, par2, par3 + 1, par4);<a name="line.1000"></a>
<FONT color="green">1001</FONT>                        int var8 = this.getSavedLightValue(par1EnumSkyBlock, par2 + 1, par3, par4);<a name="line.1001"></a>
<FONT color="green">1002</FONT>                        int var9 = this.getSavedLightValue(par1EnumSkyBlock, par2 - 1, par3, par4);<a name="line.1002"></a>
<FONT color="green">1003</FONT>                        int var10 = this.getSavedLightValue(par1EnumSkyBlock, par2, par3, par4 + 1);<a name="line.1003"></a>
<FONT color="green">1004</FONT>                        int var11 = this.getSavedLightValue(par1EnumSkyBlock, par2, par3, par4 - 1);<a name="line.1004"></a>
<FONT color="green">1005</FONT>    <a name="line.1005"></a>
<FONT color="green">1006</FONT>                        if (var8 &gt; var12)<a name="line.1006"></a>
<FONT color="green">1007</FONT>                        {<a name="line.1007"></a>
<FONT color="green">1008</FONT>                            var12 = var8;<a name="line.1008"></a>
<FONT color="green">1009</FONT>                        }<a name="line.1009"></a>
<FONT color="green">1010</FONT>    <a name="line.1010"></a>
<FONT color="green">1011</FONT>                        if (var9 &gt; var12)<a name="line.1011"></a>
<FONT color="green">1012</FONT>                        {<a name="line.1012"></a>
<FONT color="green">1013</FONT>                            var12 = var9;<a name="line.1013"></a>
<FONT color="green">1014</FONT>                        }<a name="line.1014"></a>
<FONT color="green">1015</FONT>    <a name="line.1015"></a>
<FONT color="green">1016</FONT>                        if (var10 &gt; var12)<a name="line.1016"></a>
<FONT color="green">1017</FONT>                        {<a name="line.1017"></a>
<FONT color="green">1018</FONT>                            var12 = var10;<a name="line.1018"></a>
<FONT color="green">1019</FONT>                        }<a name="line.1019"></a>
<FONT color="green">1020</FONT>    <a name="line.1020"></a>
<FONT color="green">1021</FONT>                        if (var11 &gt; var12)<a name="line.1021"></a>
<FONT color="green">1022</FONT>                        {<a name="line.1022"></a>
<FONT color="green">1023</FONT>                            var12 = var11;<a name="line.1023"></a>
<FONT color="green">1024</FONT>                        }<a name="line.1024"></a>
<FONT color="green">1025</FONT>    <a name="line.1025"></a>
<FONT color="green">1026</FONT>                        return var12;<a name="line.1026"></a>
<FONT color="green">1027</FONT>                    }<a name="line.1027"></a>
<FONT color="green">1028</FONT>                    else<a name="line.1028"></a>
<FONT color="green">1029</FONT>                    {<a name="line.1029"></a>
<FONT color="green">1030</FONT>                        Chunk var7 = this.getChunkFromChunkCoords(var5, var6);<a name="line.1030"></a>
<FONT color="green">1031</FONT>                        return var7.getSavedLightValue(par1EnumSkyBlock, par2 &amp; 15, par3, par4 &amp; 15);<a name="line.1031"></a>
<FONT color="green">1032</FONT>                    }<a name="line.1032"></a>
<FONT color="green">1033</FONT>                }<a name="line.1033"></a>
<FONT color="green">1034</FONT>                else<a name="line.1034"></a>
<FONT color="green">1035</FONT>                {<a name="line.1035"></a>
<FONT color="green">1036</FONT>                    return par1EnumSkyBlock.defaultLightValue;<a name="line.1036"></a>
<FONT color="green">1037</FONT>                }<a name="line.1037"></a>
<FONT color="green">1038</FONT>            }<a name="line.1038"></a>
<FONT color="green">1039</FONT>        }<a name="line.1039"></a>
<FONT color="green">1040</FONT>    <a name="line.1040"></a>
<FONT color="green">1041</FONT>        /**<a name="line.1041"></a>
<FONT color="green">1042</FONT>         * Returns saved light value without taking into account the time of day.  Either looks in the sky light map or<a name="line.1042"></a>
<FONT color="green">1043</FONT>         * block light map based on the enumSkyBlock arg.<a name="line.1043"></a>
<FONT color="green">1044</FONT>         */<a name="line.1044"></a>
<FONT color="green">1045</FONT>        public int getSavedLightValue(EnumSkyBlock par1EnumSkyBlock, int par2, int par3, int par4)<a name="line.1045"></a>
<FONT color="green">1046</FONT>        {<a name="line.1046"></a>
<FONT color="green">1047</FONT>            if (par3 &lt; 0)<a name="line.1047"></a>
<FONT color="green">1048</FONT>            {<a name="line.1048"></a>
<FONT color="green">1049</FONT>                par3 = 0;<a name="line.1049"></a>
<FONT color="green">1050</FONT>            }<a name="line.1050"></a>
<FONT color="green">1051</FONT>    <a name="line.1051"></a>
<FONT color="green">1052</FONT>            if (par3 &gt;= 256)<a name="line.1052"></a>
<FONT color="green">1053</FONT>            {<a name="line.1053"></a>
<FONT color="green">1054</FONT>                par3 = 255;<a name="line.1054"></a>
<FONT color="green">1055</FONT>            }<a name="line.1055"></a>
<FONT color="green">1056</FONT>    <a name="line.1056"></a>
<FONT color="green">1057</FONT>            if (par2 &gt;= -30000000 &amp;&amp; par4 &gt;= -30000000 &amp;&amp; par2 &lt; 30000000 &amp;&amp; par4 &lt; 30000000)<a name="line.1057"></a>
<FONT color="green">1058</FONT>            {<a name="line.1058"></a>
<FONT color="green">1059</FONT>                int var5 = par2 &gt;&gt; 4;<a name="line.1059"></a>
<FONT color="green">1060</FONT>                int var6 = par4 &gt;&gt; 4;<a name="line.1060"></a>
<FONT color="green">1061</FONT>    <a name="line.1061"></a>
<FONT color="green">1062</FONT>                if (!this.chunkExists(var5, var6))<a name="line.1062"></a>
<FONT color="green">1063</FONT>                {<a name="line.1063"></a>
<FONT color="green">1064</FONT>                    return par1EnumSkyBlock.defaultLightValue;<a name="line.1064"></a>
<FONT color="green">1065</FONT>                }<a name="line.1065"></a>
<FONT color="green">1066</FONT>                else<a name="line.1066"></a>
<FONT color="green">1067</FONT>                {<a name="line.1067"></a>
<FONT color="green">1068</FONT>                    Chunk var7 = this.getChunkFromChunkCoords(var5, var6);<a name="line.1068"></a>
<FONT color="green">1069</FONT>                    return var7.getSavedLightValue(par1EnumSkyBlock, par2 &amp; 15, par3, par4 &amp; 15);<a name="line.1069"></a>
<FONT color="green">1070</FONT>                }<a name="line.1070"></a>
<FONT color="green">1071</FONT>            }<a name="line.1071"></a>
<FONT color="green">1072</FONT>            else<a name="line.1072"></a>
<FONT color="green">1073</FONT>            {<a name="line.1073"></a>
<FONT color="green">1074</FONT>                return par1EnumSkyBlock.defaultLightValue;<a name="line.1074"></a>
<FONT color="green">1075</FONT>            }<a name="line.1075"></a>
<FONT color="green">1076</FONT>        }<a name="line.1076"></a>
<FONT color="green">1077</FONT>    <a name="line.1077"></a>
<FONT color="green">1078</FONT>        /**<a name="line.1078"></a>
<FONT color="green">1079</FONT>         * Sets the light value either into the sky map or block map depending on if enumSkyBlock is set to sky or block.<a name="line.1079"></a>
<FONT color="green">1080</FONT>         * Args: enumSkyBlock, x, y, z, lightValue<a name="line.1080"></a>
<FONT color="green">1081</FONT>         */<a name="line.1081"></a>
<FONT color="green">1082</FONT>        public void setLightValue(EnumSkyBlock par1EnumSkyBlock, int par2, int par3, int par4, int par5)<a name="line.1082"></a>
<FONT color="green">1083</FONT>        {<a name="line.1083"></a>
<FONT color="green">1084</FONT>            if (par2 &gt;= -30000000 &amp;&amp; par4 &gt;= -30000000 &amp;&amp; par2 &lt; 30000000 &amp;&amp; par4 &lt; 30000000)<a name="line.1084"></a>
<FONT color="green">1085</FONT>            {<a name="line.1085"></a>
<FONT color="green">1086</FONT>                if (par3 &gt;= 0)<a name="line.1086"></a>
<FONT color="green">1087</FONT>                {<a name="line.1087"></a>
<FONT color="green">1088</FONT>                    if (par3 &lt; 256)<a name="line.1088"></a>
<FONT color="green">1089</FONT>                    {<a name="line.1089"></a>
<FONT color="green">1090</FONT>                        if (this.chunkExists(par2 &gt;&gt; 4, par4 &gt;&gt; 4))<a name="line.1090"></a>
<FONT color="green">1091</FONT>                        {<a name="line.1091"></a>
<FONT color="green">1092</FONT>                            Chunk var6 = this.getChunkFromChunkCoords(par2 &gt;&gt; 4, par4 &gt;&gt; 4);<a name="line.1092"></a>
<FONT color="green">1093</FONT>                            var6.setLightValue(par1EnumSkyBlock, par2 &amp; 15, par3, par4 &amp; 15, par5);<a name="line.1093"></a>
<FONT color="green">1094</FONT>    <a name="line.1094"></a>
<FONT color="green">1095</FONT>                            for (int var7 = 0; var7 &lt; this.worldAccesses.size(); ++var7)<a name="line.1095"></a>
<FONT color="green">1096</FONT>                            {<a name="line.1096"></a>
<FONT color="green">1097</FONT>                                ((IWorldAccess)this.worldAccesses.get(var7)).markBlockForRenderUpdate(par2, par3, par4);<a name="line.1097"></a>
<FONT color="green">1098</FONT>                            }<a name="line.1098"></a>
<FONT color="green">1099</FONT>                        }<a name="line.1099"></a>
<FONT color="green">1100</FONT>                    }<a name="line.1100"></a>
<FONT color="green">1101</FONT>                }<a name="line.1101"></a>
<FONT color="green">1102</FONT>            }<a name="line.1102"></a>
<FONT color="green">1103</FONT>        }<a name="line.1103"></a>
<FONT color="green">1104</FONT>    <a name="line.1104"></a>
<FONT color="green">1105</FONT>        /**<a name="line.1105"></a>
<FONT color="green">1106</FONT>         * On the client, re-renders this block. On the server, does nothing. Used for lighting updates.<a name="line.1106"></a>
<FONT color="green">1107</FONT>         */<a name="line.1107"></a>
<FONT color="green">1108</FONT>        public void markBlockForRenderUpdate(int par1, int par2, int par3)<a name="line.1108"></a>
<FONT color="green">1109</FONT>        {<a name="line.1109"></a>
<FONT color="green">1110</FONT>            for (int var4 = 0; var4 &lt; this.worldAccesses.size(); ++var4)<a name="line.1110"></a>
<FONT color="green">1111</FONT>            {<a name="line.1111"></a>
<FONT color="green">1112</FONT>                ((IWorldAccess)this.worldAccesses.get(var4)).markBlockForRenderUpdate(par1, par2, par3);<a name="line.1112"></a>
<FONT color="green">1113</FONT>            }<a name="line.1113"></a>
<FONT color="green">1114</FONT>        }<a name="line.1114"></a>
<FONT color="green">1115</FONT>    <a name="line.1115"></a>
<FONT color="green">1116</FONT>        @SideOnly(Side.CLIENT)<a name="line.1116"></a>
<FONT color="green">1117</FONT>    <a name="line.1117"></a>
<FONT color="green">1118</FONT>        /**<a name="line.1118"></a>
<FONT color="green">1119</FONT>         * Any Light rendered on a 1.8 Block goes through here<a name="line.1119"></a>
<FONT color="green">1120</FONT>         */<a name="line.1120"></a>
<FONT color="green">1121</FONT>        public int getLightBrightnessForSkyBlocks(int par1, int par2, int par3, int par4)<a name="line.1121"></a>
<FONT color="green">1122</FONT>        {<a name="line.1122"></a>
<FONT color="green">1123</FONT>            int var5 = this.getSkyBlockTypeBrightness(EnumSkyBlock.Sky, par1, par2, par3);<a name="line.1123"></a>
<FONT color="green">1124</FONT>            int var6 = this.getSkyBlockTypeBrightness(EnumSkyBlock.Block, par1, par2, par3);<a name="line.1124"></a>
<FONT color="green">1125</FONT>    <a name="line.1125"></a>
<FONT color="green">1126</FONT>            if (var6 &lt; par4)<a name="line.1126"></a>
<FONT color="green">1127</FONT>            {<a name="line.1127"></a>
<FONT color="green">1128</FONT>                var6 = par4;<a name="line.1128"></a>
<FONT color="green">1129</FONT>            }<a name="line.1129"></a>
<FONT color="green">1130</FONT>    <a name="line.1130"></a>
<FONT color="green">1131</FONT>            return var5 &lt;&lt; 20 | var6 &lt;&lt; 4;<a name="line.1131"></a>
<FONT color="green">1132</FONT>        }<a name="line.1132"></a>
<FONT color="green">1133</FONT>    <a name="line.1133"></a>
<FONT color="green">1134</FONT>        @SideOnly(Side.CLIENT)<a name="line.1134"></a>
<FONT color="green">1135</FONT>        public float getBrightness(int par1, int par2, int par3, int par4)<a name="line.1135"></a>
<FONT color="green">1136</FONT>        {<a name="line.1136"></a>
<FONT color="green">1137</FONT>            int var5 = this.getBlockLightValue(par1, par2, par3);<a name="line.1137"></a>
<FONT color="green">1138</FONT>    <a name="line.1138"></a>
<FONT color="green">1139</FONT>            if (var5 &lt; par4)<a name="line.1139"></a>
<FONT color="green">1140</FONT>            {<a name="line.1140"></a>
<FONT color="green">1141</FONT>                var5 = par4;<a name="line.1141"></a>
<FONT color="green">1142</FONT>            }<a name="line.1142"></a>
<FONT color="green">1143</FONT>    <a name="line.1143"></a>
<FONT color="green">1144</FONT>            return this.provider.lightBrightnessTable[var5];<a name="line.1144"></a>
<FONT color="green">1145</FONT>        }<a name="line.1145"></a>
<FONT color="green">1146</FONT>    <a name="line.1146"></a>
<FONT color="green">1147</FONT>        /**<a name="line.1147"></a>
<FONT color="green">1148</FONT>         * Returns how bright the block is shown as which is the block's light value looked up in a lookup table (light<a name="line.1148"></a>
<FONT color="green">1149</FONT>         * values aren't linear for brightness). Args: x, y, z<a name="line.1149"></a>
<FONT color="green">1150</FONT>         */<a name="line.1150"></a>
<FONT color="green">1151</FONT>        public float getLightBrightness(int par1, int par2, int par3)<a name="line.1151"></a>
<FONT color="green">1152</FONT>        {<a name="line.1152"></a>
<FONT color="green">1153</FONT>            return this.provider.lightBrightnessTable[this.getBlockLightValue(par1, par2, par3)];<a name="line.1153"></a>
<FONT color="green">1154</FONT>        }<a name="line.1154"></a>
<FONT color="green">1155</FONT>    <a name="line.1155"></a>
<FONT color="green">1156</FONT>        /**<a name="line.1156"></a>
<FONT color="green">1157</FONT>         * Checks whether its daytime by seeing if the light subtracted from the skylight is less than 4<a name="line.1157"></a>
<FONT color="green">1158</FONT>         */<a name="line.1158"></a>
<FONT color="green">1159</FONT>        public boolean isDaytime()<a name="line.1159"></a>
<FONT color="green">1160</FONT>        {<a name="line.1160"></a>
<FONT color="green">1161</FONT>            return provider.isDaytime();<a name="line.1161"></a>
<FONT color="green">1162</FONT>        }<a name="line.1162"></a>
<FONT color="green">1163</FONT>    <a name="line.1163"></a>
<FONT color="green">1164</FONT>        /**<a name="line.1164"></a>
<FONT color="green">1165</FONT>         * ray traces all blocks, including non-collideable ones<a name="line.1165"></a>
<FONT color="green">1166</FONT>         */<a name="line.1166"></a>
<FONT color="green">1167</FONT>        public MovingObjectPosition rayTraceBlocks(Vec3 par1Vec3, Vec3 par2Vec3)<a name="line.1167"></a>
<FONT color="green">1168</FONT>        {<a name="line.1168"></a>
<FONT color="green">1169</FONT>            return this.rayTraceBlocks_do_do(par1Vec3, par2Vec3, false, false);<a name="line.1169"></a>
<FONT color="green">1170</FONT>        }<a name="line.1170"></a>
<FONT color="green">1171</FONT>    <a name="line.1171"></a>
<FONT color="green">1172</FONT>        public MovingObjectPosition rayTraceBlocks_do(Vec3 par1Vec3, Vec3 par2Vec3, boolean par3)<a name="line.1172"></a>
<FONT color="green">1173</FONT>        {<a name="line.1173"></a>
<FONT color="green">1174</FONT>            return this.rayTraceBlocks_do_do(par1Vec3, par2Vec3, par3, false);<a name="line.1174"></a>
<FONT color="green">1175</FONT>        }<a name="line.1175"></a>
<FONT color="green">1176</FONT>    <a name="line.1176"></a>
<FONT color="green">1177</FONT>        public MovingObjectPosition rayTraceBlocks_do_do(Vec3 par1Vec3, Vec3 par2Vec3, boolean par3, boolean par4)<a name="line.1177"></a>
<FONT color="green">1178</FONT>        {<a name="line.1178"></a>
<FONT color="green">1179</FONT>            if (!Double.isNaN(par1Vec3.xCoord) &amp;&amp; !Double.isNaN(par1Vec3.yCoord) &amp;&amp; !Double.isNaN(par1Vec3.zCoord))<a name="line.1179"></a>
<FONT color="green">1180</FONT>            {<a name="line.1180"></a>
<FONT color="green">1181</FONT>                if (!Double.isNaN(par2Vec3.xCoord) &amp;&amp; !Double.isNaN(par2Vec3.yCoord) &amp;&amp; !Double.isNaN(par2Vec3.zCoord))<a name="line.1181"></a>
<FONT color="green">1182</FONT>                {<a name="line.1182"></a>
<FONT color="green">1183</FONT>                    int var5 = MathHelper.floor_double(par2Vec3.xCoord);<a name="line.1183"></a>
<FONT color="green">1184</FONT>                    int var6 = MathHelper.floor_double(par2Vec3.yCoord);<a name="line.1184"></a>
<FONT color="green">1185</FONT>                    int var7 = MathHelper.floor_double(par2Vec3.zCoord);<a name="line.1185"></a>
<FONT color="green">1186</FONT>                    int var8 = MathHelper.floor_double(par1Vec3.xCoord);<a name="line.1186"></a>
<FONT color="green">1187</FONT>                    int var9 = MathHelper.floor_double(par1Vec3.yCoord);<a name="line.1187"></a>
<FONT color="green">1188</FONT>                    int var10 = MathHelper.floor_double(par1Vec3.zCoord);<a name="line.1188"></a>
<FONT color="green">1189</FONT>                    int var11 = this.getBlockId(var8, var9, var10);<a name="line.1189"></a>
<FONT color="green">1190</FONT>                    int var12 = this.getBlockMetadata(var8, var9, var10);<a name="line.1190"></a>
<FONT color="green">1191</FONT>                    Block var13 = Block.blocksList[var11];<a name="line.1191"></a>
<FONT color="green">1192</FONT>    <a name="line.1192"></a>
<FONT color="green">1193</FONT>                    if (var13 != null &amp;&amp; (!par4 || var13 == null || var13.getCollisionBoundingBoxFromPool(this, var8, var9, var10) != null) &amp;&amp; var11 &gt; 0 &amp;&amp; var13.canCollideCheck(var12, par3))<a name="line.1193"></a>
<FONT color="green">1194</FONT>                    {<a name="line.1194"></a>
<FONT color="green">1195</FONT>                        MovingObjectPosition var14 = var13.collisionRayTrace(this, var8, var9, var10, par1Vec3, par2Vec3);<a name="line.1195"></a>
<FONT color="green">1196</FONT>    <a name="line.1196"></a>
<FONT color="green">1197</FONT>                        if (var14 != null)<a name="line.1197"></a>
<FONT color="green">1198</FONT>                        {<a name="line.1198"></a>
<FONT color="green">1199</FONT>                            return var14;<a name="line.1199"></a>
<FONT color="green">1200</FONT>                        }<a name="line.1200"></a>
<FONT color="green">1201</FONT>                    }<a name="line.1201"></a>
<FONT color="green">1202</FONT>    <a name="line.1202"></a>
<FONT color="green">1203</FONT>                    var11 = 200;<a name="line.1203"></a>
<FONT color="green">1204</FONT>    <a name="line.1204"></a>
<FONT color="green">1205</FONT>                    while (var11-- &gt;= 0)<a name="line.1205"></a>
<FONT color="green">1206</FONT>                    {<a name="line.1206"></a>
<FONT color="green">1207</FONT>                        if (Double.isNaN(par1Vec3.xCoord) || Double.isNaN(par1Vec3.yCoord) || Double.isNaN(par1Vec3.zCoord))<a name="line.1207"></a>
<FONT color="green">1208</FONT>                        {<a name="line.1208"></a>
<FONT color="green">1209</FONT>                            return null;<a name="line.1209"></a>
<FONT color="green">1210</FONT>                        }<a name="line.1210"></a>
<FONT color="green">1211</FONT>    <a name="line.1211"></a>
<FONT color="green">1212</FONT>                        if (var8 == var5 &amp;&amp; var9 == var6 &amp;&amp; var10 == var7)<a name="line.1212"></a>
<FONT color="green">1213</FONT>                        {<a name="line.1213"></a>
<FONT color="green">1214</FONT>                            return null;<a name="line.1214"></a>
<FONT color="green">1215</FONT>                        }<a name="line.1215"></a>
<FONT color="green">1216</FONT>    <a name="line.1216"></a>
<FONT color="green">1217</FONT>                        boolean var39 = true;<a name="line.1217"></a>
<FONT color="green">1218</FONT>                        boolean var40 = true;<a name="line.1218"></a>
<FONT color="green">1219</FONT>                        boolean var41 = true;<a name="line.1219"></a>
<FONT color="green">1220</FONT>                        double var15 = 999.0D;<a name="line.1220"></a>
<FONT color="green">1221</FONT>                        double var17 = 999.0D;<a name="line.1221"></a>
<FONT color="green">1222</FONT>                        double var19 = 999.0D;<a name="line.1222"></a>
<FONT color="green">1223</FONT>    <a name="line.1223"></a>
<FONT color="green">1224</FONT>                        if (var5 &gt; var8)<a name="line.1224"></a>
<FONT color="green">1225</FONT>                        {<a name="line.1225"></a>
<FONT color="green">1226</FONT>                            var15 = (double)var8 + 1.0D;<a name="line.1226"></a>
<FONT color="green">1227</FONT>                        }<a name="line.1227"></a>
<FONT color="green">1228</FONT>                        else if (var5 &lt; var8)<a name="line.1228"></a>
<FONT color="green">1229</FONT>                        {<a name="line.1229"></a>
<FONT color="green">1230</FONT>                            var15 = (double)var8 + 0.0D;<a name="line.1230"></a>
<FONT color="green">1231</FONT>                        }<a name="line.1231"></a>
<FONT color="green">1232</FONT>                        else<a name="line.1232"></a>
<FONT color="green">1233</FONT>                        {<a name="line.1233"></a>
<FONT color="green">1234</FONT>                            var39 = false;<a name="line.1234"></a>
<FONT color="green">1235</FONT>                        }<a name="line.1235"></a>
<FONT color="green">1236</FONT>    <a name="line.1236"></a>
<FONT color="green">1237</FONT>                        if (var6 &gt; var9)<a name="line.1237"></a>
<FONT color="green">1238</FONT>                        {<a name="line.1238"></a>
<FONT color="green">1239</FONT>                            var17 = (double)var9 + 1.0D;<a name="line.1239"></a>
<FONT color="green">1240</FONT>                        }<a name="line.1240"></a>
<FONT color="green">1241</FONT>                        else if (var6 &lt; var9)<a name="line.1241"></a>
<FONT color="green">1242</FONT>                        {<a name="line.1242"></a>
<FONT color="green">1243</FONT>                            var17 = (double)var9 + 0.0D;<a name="line.1243"></a>
<FONT color="green">1244</FONT>                        }<a name="line.1244"></a>
<FONT color="green">1245</FONT>                        else<a name="line.1245"></a>
<FONT color="green">1246</FONT>                        {<a name="line.1246"></a>
<FONT color="green">1247</FONT>                            var40 = false;<a name="line.1247"></a>
<FONT color="green">1248</FONT>                        }<a name="line.1248"></a>
<FONT color="green">1249</FONT>    <a name="line.1249"></a>
<FONT color="green">1250</FONT>                        if (var7 &gt; var10)<a name="line.1250"></a>
<FONT color="green">1251</FONT>                        {<a name="line.1251"></a>
<FONT color="green">1252</FONT>                            var19 = (double)var10 + 1.0D;<a name="line.1252"></a>
<FONT color="green">1253</FONT>                        }<a name="line.1253"></a>
<FONT color="green">1254</FONT>                        else if (var7 &lt; var10)<a name="line.1254"></a>
<FONT color="green">1255</FONT>                        {<a name="line.1255"></a>
<FONT color="green">1256</FONT>                            var19 = (double)var10 + 0.0D;<a name="line.1256"></a>
<FONT color="green">1257</FONT>                        }<a name="line.1257"></a>
<FONT color="green">1258</FONT>                        else<a name="line.1258"></a>
<FONT color="green">1259</FONT>                        {<a name="line.1259"></a>
<FONT color="green">1260</FONT>                            var41 = false;<a name="line.1260"></a>
<FONT color="green">1261</FONT>                        }<a name="line.1261"></a>
<FONT color="green">1262</FONT>    <a name="line.1262"></a>
<FONT color="green">1263</FONT>                        double var21 = 999.0D;<a name="line.1263"></a>
<FONT color="green">1264</FONT>                        double var23 = 999.0D;<a name="line.1264"></a>
<FONT color="green">1265</FONT>                        double var25 = 999.0D;<a name="line.1265"></a>
<FONT color="green">1266</FONT>                        double var27 = par2Vec3.xCoord - par1Vec3.xCoord;<a name="line.1266"></a>
<FONT color="green">1267</FONT>                        double var29 = par2Vec3.yCoord - par1Vec3.yCoord;<a name="line.1267"></a>
<FONT color="green">1268</FONT>                        double var31 = par2Vec3.zCoord - par1Vec3.zCoord;<a name="line.1268"></a>
<FONT color="green">1269</FONT>    <a name="line.1269"></a>
<FONT color="green">1270</FONT>                        if (var39)<a name="line.1270"></a>
<FONT color="green">1271</FONT>                        {<a name="line.1271"></a>
<FONT color="green">1272</FONT>                            var21 = (var15 - par1Vec3.xCoord) / var27;<a name="line.1272"></a>
<FONT color="green">1273</FONT>                        }<a name="line.1273"></a>
<FONT color="green">1274</FONT>    <a name="line.1274"></a>
<FONT color="green">1275</FONT>                        if (var40)<a name="line.1275"></a>
<FONT color="green">1276</FONT>                        {<a name="line.1276"></a>
<FONT color="green">1277</FONT>                            var23 = (var17 - par1Vec3.yCoord) / var29;<a name="line.1277"></a>
<FONT color="green">1278</FONT>                        }<a name="line.1278"></a>
<FONT color="green">1279</FONT>    <a name="line.1279"></a>
<FONT color="green">1280</FONT>                        if (var41)<a name="line.1280"></a>
<FONT color="green">1281</FONT>                        {<a name="line.1281"></a>
<FONT color="green">1282</FONT>                            var25 = (var19 - par1Vec3.zCoord) / var31;<a name="line.1282"></a>
<FONT color="green">1283</FONT>                        }<a name="line.1283"></a>
<FONT color="green">1284</FONT>    <a name="line.1284"></a>
<FONT color="green">1285</FONT>                        boolean var33 = false;<a name="line.1285"></a>
<FONT color="green">1286</FONT>                        byte var42;<a name="line.1286"></a>
<FONT color="green">1287</FONT>    <a name="line.1287"></a>
<FONT color="green">1288</FONT>                        if (var21 &lt; var23 &amp;&amp; var21 &lt; var25)<a name="line.1288"></a>
<FONT color="green">1289</FONT>                        {<a name="line.1289"></a>
<FONT color="green">1290</FONT>                            if (var5 &gt; var8)<a name="line.1290"></a>
<FONT color="green">1291</FONT>                            {<a name="line.1291"></a>
<FONT color="green">1292</FONT>                                var42 = 4;<a name="line.1292"></a>
<FONT color="green">1293</FONT>                            }<a name="line.1293"></a>
<FONT color="green">1294</FONT>                            else<a name="line.1294"></a>
<FONT color="green">1295</FONT>                            {<a name="line.1295"></a>
<FONT color="green">1296</FONT>                                var42 = 5;<a name="line.1296"></a>
<FONT color="green">1297</FONT>                            }<a name="line.1297"></a>
<FONT color="green">1298</FONT>    <a name="line.1298"></a>
<FONT color="green">1299</FONT>                            par1Vec3.xCoord = var15;<a name="line.1299"></a>
<FONT color="green">1300</FONT>                            par1Vec3.yCoord += var29 * var21;<a name="line.1300"></a>
<FONT color="green">1301</FONT>                            par1Vec3.zCoord += var31 * var21;<a name="line.1301"></a>
<FONT color="green">1302</FONT>                        }<a name="line.1302"></a>
<FONT color="green">1303</FONT>                        else if (var23 &lt; var25)<a name="line.1303"></a>
<FONT color="green">1304</FONT>                        {<a name="line.1304"></a>
<FONT color="green">1305</FONT>                            if (var6 &gt; var9)<a name="line.1305"></a>
<FONT color="green">1306</FONT>                            {<a name="line.1306"></a>
<FONT color="green">1307</FONT>                                var42 = 0;<a name="line.1307"></a>
<FONT color="green">1308</FONT>                            }<a name="line.1308"></a>
<FONT color="green">1309</FONT>                            else<a name="line.1309"></a>
<FONT color="green">1310</FONT>                            {<a name="line.1310"></a>
<FONT color="green">1311</FONT>                                var42 = 1;<a name="line.1311"></a>
<FONT color="green">1312</FONT>                            }<a name="line.1312"></a>
<FONT color="green">1313</FONT>    <a name="line.1313"></a>
<FONT color="green">1314</FONT>                            par1Vec3.xCoord += var27 * var23;<a name="line.1314"></a>
<FONT color="green">1315</FONT>                            par1Vec3.yCoord = var17;<a name="line.1315"></a>
<FONT color="green">1316</FONT>                            par1Vec3.zCoord += var31 * var23;<a name="line.1316"></a>
<FONT color="green">1317</FONT>                        }<a name="line.1317"></a>
<FONT color="green">1318</FONT>                        else<a name="line.1318"></a>
<FONT color="green">1319</FONT>                        {<a name="line.1319"></a>
<FONT color="green">1320</FONT>                            if (var7 &gt; var10)<a name="line.1320"></a>
<FONT color="green">1321</FONT>                            {<a name="line.1321"></a>
<FONT color="green">1322</FONT>                                var42 = 2;<a name="line.1322"></a>
<FONT color="green">1323</FONT>                            }<a name="line.1323"></a>
<FONT color="green">1324</FONT>                            else<a name="line.1324"></a>
<FONT color="green">1325</FONT>                            {<a name="line.1325"></a>
<FONT color="green">1326</FONT>                                var42 = 3;<a name="line.1326"></a>
<FONT color="green">1327</FONT>                            }<a name="line.1327"></a>
<FONT color="green">1328</FONT>    <a name="line.1328"></a>
<FONT color="green">1329</FONT>                            par1Vec3.xCoord += var27 * var25;<a name="line.1329"></a>
<FONT color="green">1330</FONT>                            par1Vec3.yCoord += var29 * var25;<a name="line.1330"></a>
<FONT color="green">1331</FONT>                            par1Vec3.zCoord = var19;<a name="line.1331"></a>
<FONT color="green">1332</FONT>                        }<a name="line.1332"></a>
<FONT color="green">1333</FONT>    <a name="line.1333"></a>
<FONT color="green">1334</FONT>                        Vec3 var34 = this.getWorldVec3Pool().getVecFromPool(par1Vec3.xCoord, par1Vec3.yCoord, par1Vec3.zCoord);<a name="line.1334"></a>
<FONT color="green">1335</FONT>                        var8 = (int)(var34.xCoord = (double)MathHelper.floor_double(par1Vec3.xCoord));<a name="line.1335"></a>
<FONT color="green">1336</FONT>    <a name="line.1336"></a>
<FONT color="green">1337</FONT>                        if (var42 == 5)<a name="line.1337"></a>
<FONT color="green">1338</FONT>                        {<a name="line.1338"></a>
<FONT color="green">1339</FONT>                            --var8;<a name="line.1339"></a>
<FONT color="green">1340</FONT>                            ++var34.xCoord;<a name="line.1340"></a>
<FONT color="green">1341</FONT>                        }<a name="line.1341"></a>
<FONT color="green">1342</FONT>    <a name="line.1342"></a>
<FONT color="green">1343</FONT>                        var9 = (int)(var34.yCoord = (double)MathHelper.floor_double(par1Vec3.yCoord));<a name="line.1343"></a>
<FONT color="green">1344</FONT>    <a name="line.1344"></a>
<FONT color="green">1345</FONT>                        if (var42 == 1)<a name="line.1345"></a>
<FONT color="green">1346</FONT>                        {<a name="line.1346"></a>
<FONT color="green">1347</FONT>                            --var9;<a name="line.1347"></a>
<FONT color="green">1348</FONT>                            ++var34.yCoord;<a name="line.1348"></a>
<FONT color="green">1349</FONT>                        }<a name="line.1349"></a>
<FONT color="green">1350</FONT>    <a name="line.1350"></a>
<FONT color="green">1351</FONT>                        var10 = (int)(var34.zCoord = (double)MathHelper.floor_double(par1Vec3.zCoord));<a name="line.1351"></a>
<FONT color="green">1352</FONT>    <a name="line.1352"></a>
<FONT color="green">1353</FONT>                        if (var42 == 3)<a name="line.1353"></a>
<FONT color="green">1354</FONT>                        {<a name="line.1354"></a>
<FONT color="green">1355</FONT>                            --var10;<a name="line.1355"></a>
<FONT color="green">1356</FONT>                            ++var34.zCoord;<a name="line.1356"></a>
<FONT color="green">1357</FONT>                        }<a name="line.1357"></a>
<FONT color="green">1358</FONT>    <a name="line.1358"></a>
<FONT color="green">1359</FONT>                        int var35 = this.getBlockId(var8, var9, var10);<a name="line.1359"></a>
<FONT color="green">1360</FONT>                        int var36 = this.getBlockMetadata(var8, var9, var10);<a name="line.1360"></a>
<FONT color="green">1361</FONT>                        Block var37 = Block.blocksList[var35];<a name="line.1361"></a>
<FONT color="green">1362</FONT>    <a name="line.1362"></a>
<FONT color="green">1363</FONT>                        if ((!par4 || var37 == null || var37.getCollisionBoundingBoxFromPool(this, var8, var9, var10) != null) &amp;&amp; var35 &gt; 0 &amp;&amp; var37.canCollideCheck(var36, par3))<a name="line.1363"></a>
<FONT color="green">1364</FONT>                        {<a name="line.1364"></a>
<FONT color="green">1365</FONT>                            MovingObjectPosition var38 = var37.collisionRayTrace(this, var8, var9, var10, par1Vec3, par2Vec3);<a name="line.1365"></a>
<FONT color="green">1366</FONT>    <a name="line.1366"></a>
<FONT color="green">1367</FONT>                            if (var38 != null)<a name="line.1367"></a>
<FONT color="green">1368</FONT>                            {<a name="line.1368"></a>
<FONT color="green">1369</FONT>                                return var38;<a name="line.1369"></a>
<FONT color="green">1370</FONT>                            }<a name="line.1370"></a>
<FONT color="green">1371</FONT>                        }<a name="line.1371"></a>
<FONT color="green">1372</FONT>                    }<a name="line.1372"></a>
<FONT color="green">1373</FONT>    <a name="line.1373"></a>
<FONT color="green">1374</FONT>                    return null;<a name="line.1374"></a>
<FONT color="green">1375</FONT>                }<a name="line.1375"></a>
<FONT color="green">1376</FONT>                else<a name="line.1376"></a>
<FONT color="green">1377</FONT>                {<a name="line.1377"></a>
<FONT color="green">1378</FONT>                    return null;<a name="line.1378"></a>
<FONT color="green">1379</FONT>                }<a name="line.1379"></a>
<FONT color="green">1380</FONT>            }<a name="line.1380"></a>
<FONT color="green">1381</FONT>            else<a name="line.1381"></a>
<FONT color="green">1382</FONT>            {<a name="line.1382"></a>
<FONT color="green">1383</FONT>                return null;<a name="line.1383"></a>
<FONT color="green">1384</FONT>            }<a name="line.1384"></a>
<FONT color="green">1385</FONT>        }<a name="line.1385"></a>
<FONT color="green">1386</FONT>    <a name="line.1386"></a>
<FONT color="green">1387</FONT>        /**<a name="line.1387"></a>
<FONT color="green">1388</FONT>         * Plays a sound at the entity's position. Args: entity, sound, volume (relative to 1.0), and frequency (or pitch,<a name="line.1388"></a>
<FONT color="green">1389</FONT>         * also relative to 1.0).<a name="line.1389"></a>
<FONT color="green">1390</FONT>         */<a name="line.1390"></a>
<FONT color="green">1391</FONT>        public void playSoundAtEntity(Entity par1Entity, String par2Str, float par3, float par4)<a name="line.1391"></a>
<FONT color="green">1392</FONT>        {<a name="line.1392"></a>
<FONT color="green">1393</FONT>            PlaySoundAtEntityEvent event = new PlaySoundAtEntityEvent(par1Entity, par2Str, par3, par4);<a name="line.1393"></a>
<FONT color="green">1394</FONT>            if (MinecraftForge.EVENT_BUS.post(event))<a name="line.1394"></a>
<FONT color="green">1395</FONT>            {<a name="line.1395"></a>
<FONT color="green">1396</FONT>                return;<a name="line.1396"></a>
<FONT color="green">1397</FONT>            }<a name="line.1397"></a>
<FONT color="green">1398</FONT>            par2Str = event.name;<a name="line.1398"></a>
<FONT color="green">1399</FONT>            if (par1Entity != null &amp;&amp; par2Str != null)<a name="line.1399"></a>
<FONT color="green">1400</FONT>            {<a name="line.1400"></a>
<FONT color="green">1401</FONT>                for (int var5 = 0; var5 &lt; this.worldAccesses.size(); ++var5)<a name="line.1401"></a>
<FONT color="green">1402</FONT>                {<a name="line.1402"></a>
<FONT color="green">1403</FONT>                    ((IWorldAccess)this.worldAccesses.get(var5)).playSound(par2Str, par1Entity.posX, par1Entity.posY - (double)par1Entity.yOffset, par1Entity.posZ, par3, par4);<a name="line.1403"></a>
<FONT color="green">1404</FONT>                }<a name="line.1404"></a>
<FONT color="green">1405</FONT>            }<a name="line.1405"></a>
<FONT color="green">1406</FONT>        }<a name="line.1406"></a>
<FONT color="green">1407</FONT>    <a name="line.1407"></a>
<FONT color="green">1408</FONT>        public void func_85173_a(EntityPlayer par1EntityPlayer, String par2Str, float par3, float par4)<a name="line.1408"></a>
<FONT color="green">1409</FONT>        {<a name="line.1409"></a>
<FONT color="green">1410</FONT>            if (par1EntityPlayer != null &amp;&amp; par2Str != null)<a name="line.1410"></a>
<FONT color="green">1411</FONT>            {<a name="line.1411"></a>
<FONT color="green">1412</FONT>                for (int var5 = 0; var5 &lt; this.worldAccesses.size(); ++var5)<a name="line.1412"></a>
<FONT color="green">1413</FONT>                {<a name="line.1413"></a>
<FONT color="green">1414</FONT>                    ((IWorldAccess)this.worldAccesses.get(var5)).func_85102_a(par1EntityPlayer, par2Str, par1EntityPlayer.posX, par1EntityPlayer.posY - (double)par1EntityPlayer.yOffset, par1EntityPlayer.posZ, par3, par4);<a name="line.1414"></a>
<FONT color="green">1415</FONT>                }<a name="line.1415"></a>
<FONT color="green">1416</FONT>            }<a name="line.1416"></a>
<FONT color="green">1417</FONT>        }<a name="line.1417"></a>
<FONT color="green">1418</FONT>    <a name="line.1418"></a>
<FONT color="green">1419</FONT>        /**<a name="line.1419"></a>
<FONT color="green">1420</FONT>         * Play a sound effect. Many many parameters for this function. Not sure what they do, but a classic call is :<a name="line.1420"></a>
<FONT color="green">1421</FONT>         * (double)i + 0.5D, (double)j + 0.5D, (double)k + 0.5D, 'random.door_open', 1.0F, world.rand.nextFloat() * 0.1F +<a name="line.1421"></a>
<FONT color="green">1422</FONT>         * 0.9F with i,j,k position of the block.<a name="line.1422"></a>
<FONT color="green">1423</FONT>         */<a name="line.1423"></a>
<FONT color="green">1424</FONT>        public void playSoundEffect(double par1, double par3, double par5, String par7Str, float par8, float par9)<a name="line.1424"></a>
<FONT color="green">1425</FONT>        {<a name="line.1425"></a>
<FONT color="green">1426</FONT>            if (par7Str != null)<a name="line.1426"></a>
<FONT color="green">1427</FONT>            {<a name="line.1427"></a>
<FONT color="green">1428</FONT>                for (int var10 = 0; var10 &lt; this.worldAccesses.size(); ++var10)<a name="line.1428"></a>
<FONT color="green">1429</FONT>                {<a name="line.1429"></a>
<FONT color="green">1430</FONT>                    ((IWorldAccess)this.worldAccesses.get(var10)).playSound(par7Str, par1, par3, par5, par8, par9);<a name="line.1430"></a>
<FONT color="green">1431</FONT>                }<a name="line.1431"></a>
<FONT color="green">1432</FONT>            }<a name="line.1432"></a>
<FONT color="green">1433</FONT>        }<a name="line.1433"></a>
<FONT color="green">1434</FONT>    <a name="line.1434"></a>
<FONT color="green">1435</FONT>        /**<a name="line.1435"></a>
<FONT color="green">1436</FONT>         * par8 is loudness, all pars passed to minecraftInstance.sndManager.playSound<a name="line.1436"></a>
<FONT color="green">1437</FONT>         */<a name="line.1437"></a>
<FONT color="green">1438</FONT>        public void playSound(double par1, double par3, double par5, String par7Str, float par8, float par9) {}<a name="line.1438"></a>
<FONT color="green">1439</FONT>    <a name="line.1439"></a>
<FONT color="green">1440</FONT>        /**<a name="line.1440"></a>
<FONT color="green">1441</FONT>         * Plays a record at the specified coordinates of the specified name. Args: recordName, x, y, z<a name="line.1441"></a>
<FONT color="green">1442</FONT>         */<a name="line.1442"></a>
<FONT color="green">1443</FONT>        public void playRecord(String par1Str, int par2, int par3, int par4)<a name="line.1443"></a>
<FONT color="green">1444</FONT>        {<a name="line.1444"></a>
<FONT color="green">1445</FONT>            for (int var5 = 0; var5 &lt; this.worldAccesses.size(); ++var5)<a name="line.1445"></a>
<FONT color="green">1446</FONT>            {<a name="line.1446"></a>
<FONT color="green">1447</FONT>                ((IWorldAccess)this.worldAccesses.get(var5)).playRecord(par1Str, par2, par3, par4);<a name="line.1447"></a>
<FONT color="green">1448</FONT>            }<a name="line.1448"></a>
<FONT color="green">1449</FONT>        }<a name="line.1449"></a>
<FONT color="green">1450</FONT>    <a name="line.1450"></a>
<FONT color="green">1451</FONT>        /**<a name="line.1451"></a>
<FONT color="green">1452</FONT>         * Spawns a particle.  Args particleName, x, y, z, velX, velY, velZ<a name="line.1452"></a>
<FONT color="green">1453</FONT>         */<a name="line.1453"></a>
<FONT color="green">1454</FONT>        public void spawnParticle(String par1Str, double par2, double par4, double par6, double par8, double par10, double par12)<a name="line.1454"></a>
<FONT color="green">1455</FONT>        {<a name="line.1455"></a>
<FONT color="green">1456</FONT>            for (int var14 = 0; var14 &lt; this.worldAccesses.size(); ++var14)<a name="line.1456"></a>
<FONT color="green">1457</FONT>            {<a name="line.1457"></a>
<FONT color="green">1458</FONT>                ((IWorldAccess)this.worldAccesses.get(var14)).spawnParticle(par1Str, par2, par4, par6, par8, par10, par12);<a name="line.1458"></a>
<FONT color="green">1459</FONT>            }<a name="line.1459"></a>
<FONT color="green">1460</FONT>        }<a name="line.1460"></a>
<FONT color="green">1461</FONT>    <a name="line.1461"></a>
<FONT color="green">1462</FONT>        /**<a name="line.1462"></a>
<FONT color="green">1463</FONT>         * adds a lightning bolt to the list of lightning bolts in this world.<a name="line.1463"></a>
<FONT color="green">1464</FONT>         */<a name="line.1464"></a>
<FONT color="green">1465</FONT>        public boolean addWeatherEffect(Entity par1Entity)<a name="line.1465"></a>
<FONT color="green">1466</FONT>        {<a name="line.1466"></a>
<FONT color="green">1467</FONT>            this.weatherEffects.add(par1Entity);<a name="line.1467"></a>
<FONT color="green">1468</FONT>            return true;<a name="line.1468"></a>
<FONT color="green">1469</FONT>        }<a name="line.1469"></a>
<FONT color="green">1470</FONT>    <a name="line.1470"></a>
<FONT color="green">1471</FONT>        /**<a name="line.1471"></a>
<FONT color="green">1472</FONT>         * Called to place all entities as part of a world<a name="line.1472"></a>
<FONT color="green">1473</FONT>         */<a name="line.1473"></a>
<FONT color="green">1474</FONT>        public boolean spawnEntityInWorld(Entity par1Entity)<a name="line.1474"></a>
<FONT color="green">1475</FONT>        {<a name="line.1475"></a>
<FONT color="green">1476</FONT>            int var2 = MathHelper.floor_double(par1Entity.posX / 16.0D);<a name="line.1476"></a>
<FONT color="green">1477</FONT>            int var3 = MathHelper.floor_double(par1Entity.posZ / 16.0D);<a name="line.1477"></a>
<FONT color="green">1478</FONT>            boolean var4 = false;<a name="line.1478"></a>
<FONT color="green">1479</FONT>    <a name="line.1479"></a>
<FONT color="green">1480</FONT>            if (par1Entity instanceof EntityPlayer)<a name="line.1480"></a>
<FONT color="green">1481</FONT>            {<a name="line.1481"></a>
<FONT color="green">1482</FONT>                var4 = true;<a name="line.1482"></a>
<FONT color="green">1483</FONT>            }<a name="line.1483"></a>
<FONT color="green">1484</FONT>    <a name="line.1484"></a>
<FONT color="green">1485</FONT>            if (!var4 &amp;&amp; !this.chunkExists(var2, var3))<a name="line.1485"></a>
<FONT color="green">1486</FONT>            {<a name="line.1486"></a>
<FONT color="green">1487</FONT>                return false;<a name="line.1487"></a>
<FONT color="green">1488</FONT>            }<a name="line.1488"></a>
<FONT color="green">1489</FONT>            else<a name="line.1489"></a>
<FONT color="green">1490</FONT>            {<a name="line.1490"></a>
<FONT color="green">1491</FONT>                if (par1Entity instanceof EntityPlayer)<a name="line.1491"></a>
<FONT color="green">1492</FONT>                {<a name="line.1492"></a>
<FONT color="green">1493</FONT>                    EntityPlayer var5 = (EntityPlayer)par1Entity;<a name="line.1493"></a>
<FONT color="green">1494</FONT>                    this.playerEntities.add(var5);<a name="line.1494"></a>
<FONT color="green">1495</FONT>                    this.updateAllPlayersSleepingFlag();<a name="line.1495"></a>
<FONT color="green">1496</FONT>                }<a name="line.1496"></a>
<FONT color="green">1497</FONT>    <a name="line.1497"></a>
<FONT color="green">1498</FONT>                if (!var4 &amp;&amp; MinecraftForge.EVENT_BUS.post(new EntityJoinWorldEvent(par1Entity, this)))<a name="line.1498"></a>
<FONT color="green">1499</FONT>                {<a name="line.1499"></a>
<FONT color="green">1500</FONT>                    return false;<a name="line.1500"></a>
<FONT color="green">1501</FONT>                }<a name="line.1501"></a>
<FONT color="green">1502</FONT>    <a name="line.1502"></a>
<FONT color="green">1503</FONT>                this.getChunkFromChunkCoords(var2, var3).addEntity(par1Entity);<a name="line.1503"></a>
<FONT color="green">1504</FONT>                this.loadedEntityList.add(par1Entity);<a name="line.1504"></a>
<FONT color="green">1505</FONT>                this.obtainEntitySkin(par1Entity);<a name="line.1505"></a>
<FONT color="green">1506</FONT>                return true;<a name="line.1506"></a>
<FONT color="green">1507</FONT>            }<a name="line.1507"></a>
<FONT color="green">1508</FONT>        }<a name="line.1508"></a>
<FONT color="green">1509</FONT>    <a name="line.1509"></a>
<FONT color="green">1510</FONT>        /**<a name="line.1510"></a>
<FONT color="green">1511</FONT>         * Start the skin for this entity downloading, if necessary, and increment its reference counter<a name="line.1511"></a>
<FONT color="green">1512</FONT>         */<a name="line.1512"></a>
<FONT color="green">1513</FONT>        protected void obtainEntitySkin(Entity par1Entity)<a name="line.1513"></a>
<FONT color="green">1514</FONT>        {<a name="line.1514"></a>
<FONT color="green">1515</FONT>            for (int var2 = 0; var2 &lt; this.worldAccesses.size(); ++var2)<a name="line.1515"></a>
<FONT color="green">1516</FONT>            {<a name="line.1516"></a>
<FONT color="green">1517</FONT>                ((IWorldAccess)this.worldAccesses.get(var2)).obtainEntitySkin(par1Entity);<a name="line.1517"></a>
<FONT color="green">1518</FONT>            }<a name="line.1518"></a>
<FONT color="green">1519</FONT>        }<a name="line.1519"></a>
<FONT color="green">1520</FONT>    <a name="line.1520"></a>
<FONT color="green">1521</FONT>        /**<a name="line.1521"></a>
<FONT color="green">1522</FONT>         * Decrement the reference counter for this entity's skin image data<a name="line.1522"></a>
<FONT color="green">1523</FONT>         */<a name="line.1523"></a>
<FONT color="green">1524</FONT>        protected void releaseEntitySkin(Entity par1Entity)<a name="line.1524"></a>
<FONT color="green">1525</FONT>        {<a name="line.1525"></a>
<FONT color="green">1526</FONT>            for (int var2 = 0; var2 &lt; this.worldAccesses.size(); ++var2)<a name="line.1526"></a>
<FONT color="green">1527</FONT>            {<a name="line.1527"></a>
<FONT color="green">1528</FONT>                ((IWorldAccess)this.worldAccesses.get(var2)).releaseEntitySkin(par1Entity);<a name="line.1528"></a>
<FONT color="green">1529</FONT>            }<a name="line.1529"></a>
<FONT color="green">1530</FONT>        }<a name="line.1530"></a>
<FONT color="green">1531</FONT>    <a name="line.1531"></a>
<FONT color="green">1532</FONT>        /**<a name="line.1532"></a>
<FONT color="green">1533</FONT>         * Dismounts the entity (and anything riding the entity), sets the dead flag, and removes the player entity from the<a name="line.1533"></a>
<FONT color="green">1534</FONT>         * player entity list. Called by the playerLoggedOut function.<a name="line.1534"></a>
<FONT color="green">1535</FONT>         */<a name="line.1535"></a>
<FONT color="green">1536</FONT>        public void setEntityDead(Entity par1Entity)<a name="line.1536"></a>
<FONT color="green">1537</FONT>        {<a name="line.1537"></a>
<FONT color="green">1538</FONT>            if (par1Entity.riddenByEntity != null)<a name="line.1538"></a>
<FONT color="green">1539</FONT>            {<a name="line.1539"></a>
<FONT color="green">1540</FONT>                par1Entity.riddenByEntity.mountEntity((Entity)null);<a name="line.1540"></a>
<FONT color="green">1541</FONT>            }<a name="line.1541"></a>
<FONT color="green">1542</FONT>    <a name="line.1542"></a>
<FONT color="green">1543</FONT>            if (par1Entity.ridingEntity != null)<a name="line.1543"></a>
<FONT color="green">1544</FONT>            {<a name="line.1544"></a>
<FONT color="green">1545</FONT>                par1Entity.mountEntity((Entity)null);<a name="line.1545"></a>
<FONT color="green">1546</FONT>            }<a name="line.1546"></a>
<FONT color="green">1547</FONT>    <a name="line.1547"></a>
<FONT color="green">1548</FONT>            par1Entity.setDead();<a name="line.1548"></a>
<FONT color="green">1549</FONT>    <a name="line.1549"></a>
<FONT color="green">1550</FONT>            if (par1Entity instanceof EntityPlayer)<a name="line.1550"></a>
<FONT color="green">1551</FONT>            {<a name="line.1551"></a>
<FONT color="green">1552</FONT>                this.playerEntities.remove(par1Entity);<a name="line.1552"></a>
<FONT color="green">1553</FONT>                this.updateAllPlayersSleepingFlag();<a name="line.1553"></a>
<FONT color="green">1554</FONT>            }<a name="line.1554"></a>
<FONT color="green">1555</FONT>        }<a name="line.1555"></a>
<FONT color="green">1556</FONT>    <a name="line.1556"></a>
<FONT color="green">1557</FONT>        /**<a name="line.1557"></a>
<FONT color="green">1558</FONT>         * remove dat player from dem servers<a name="line.1558"></a>
<FONT color="green">1559</FONT>         */<a name="line.1559"></a>
<FONT color="green">1560</FONT>        public void removeEntity(Entity par1Entity)<a name="line.1560"></a>
<FONT color="green">1561</FONT>        {<a name="line.1561"></a>
<FONT color="green">1562</FONT>            par1Entity.setDead();<a name="line.1562"></a>
<FONT color="green">1563</FONT>    <a name="line.1563"></a>
<FONT color="green">1564</FONT>            if (par1Entity instanceof EntityPlayer)<a name="line.1564"></a>
<FONT color="green">1565</FONT>            {<a name="line.1565"></a>
<FONT color="green">1566</FONT>                this.playerEntities.remove(par1Entity);<a name="line.1566"></a>
<FONT color="green">1567</FONT>                this.updateAllPlayersSleepingFlag();<a name="line.1567"></a>
<FONT color="green">1568</FONT>            }<a name="line.1568"></a>
<FONT color="green">1569</FONT>    <a name="line.1569"></a>
<FONT color="green">1570</FONT>            int var2 = par1Entity.chunkCoordX;<a name="line.1570"></a>
<FONT color="green">1571</FONT>            int var3 = par1Entity.chunkCoordZ;<a name="line.1571"></a>
<FONT color="green">1572</FONT>    <a name="line.1572"></a>
<FONT color="green">1573</FONT>            if (par1Entity.addedToChunk &amp;&amp; this.chunkExists(var2, var3))<a name="line.1573"></a>
<FONT color="green">1574</FONT>            {<a name="line.1574"></a>
<FONT color="green">1575</FONT>                this.getChunkFromChunkCoords(var2, var3).removeEntity(par1Entity);<a name="line.1575"></a>
<FONT color="green">1576</FONT>            }<a name="line.1576"></a>
<FONT color="green">1577</FONT>    <a name="line.1577"></a>
<FONT color="green">1578</FONT>            this.loadedEntityList.remove(par1Entity);<a name="line.1578"></a>
<FONT color="green">1579</FONT>            this.releaseEntitySkin(par1Entity);<a name="line.1579"></a>
<FONT color="green">1580</FONT>        }<a name="line.1580"></a>
<FONT color="green">1581</FONT>    <a name="line.1581"></a>
<FONT color="green">1582</FONT>        /**<a name="line.1582"></a>
<FONT color="green">1583</FONT>         * Adds a IWorldAccess to the list of worldAccesses<a name="line.1583"></a>
<FONT color="green">1584</FONT>         */<a name="line.1584"></a>
<FONT color="green">1585</FONT>        public void addWorldAccess(IWorldAccess par1IWorldAccess)<a name="line.1585"></a>
<FONT color="green">1586</FONT>        {<a name="line.1586"></a>
<FONT color="green">1587</FONT>            this.worldAccesses.add(par1IWorldAccess);<a name="line.1587"></a>
<FONT color="green">1588</FONT>        }<a name="line.1588"></a>
<FONT color="green">1589</FONT>    <a name="line.1589"></a>
<FONT color="green">1590</FONT>        /**<a name="line.1590"></a>
<FONT color="green">1591</FONT>         * Returns a list of bounding boxes that collide with aabb excluding the passed in entity's collision. Args: entity,<a name="line.1591"></a>
<FONT color="green">1592</FONT>         * aabb<a name="line.1592"></a>
<FONT color="green">1593</FONT>         */<a name="line.1593"></a>
<FONT color="green">1594</FONT>        public List getCollidingBoundingBoxes(Entity par1Entity, AxisAlignedBB par2AxisAlignedBB)<a name="line.1594"></a>
<FONT color="green">1595</FONT>        {<a name="line.1595"></a>
<FONT color="green">1596</FONT>            this.collidingBoundingBoxes.clear();<a name="line.1596"></a>
<FONT color="green">1597</FONT>            int var3 = MathHelper.floor_double(par2AxisAlignedBB.minX);<a name="line.1597"></a>
<FONT color="green">1598</FONT>            int var4 = MathHelper.floor_double(par2AxisAlignedBB.maxX + 1.0D);<a name="line.1598"></a>
<FONT color="green">1599</FONT>            int var5 = MathHelper.floor_double(par2AxisAlignedBB.minY);<a name="line.1599"></a>
<FONT color="green">1600</FONT>            int var6 = MathHelper.floor_double(par2AxisAlignedBB.maxY + 1.0D);<a name="line.1600"></a>
<FONT color="green">1601</FONT>            int var7 = MathHelper.floor_double(par2AxisAlignedBB.minZ);<a name="line.1601"></a>
<FONT color="green">1602</FONT>            int var8 = MathHelper.floor_double(par2AxisAlignedBB.maxZ + 1.0D);<a name="line.1602"></a>
<FONT color="green">1603</FONT>    <a name="line.1603"></a>
<FONT color="green">1604</FONT>            for (int var9 = var3; var9 &lt; var4; ++var9)<a name="line.1604"></a>
<FONT color="green">1605</FONT>            {<a name="line.1605"></a>
<FONT color="green">1606</FONT>                for (int var10 = var7; var10 &lt; var8; ++var10)<a name="line.1606"></a>
<FONT color="green">1607</FONT>                {<a name="line.1607"></a>
<FONT color="green">1608</FONT>                    if (this.blockExists(var9, 64, var10))<a name="line.1608"></a>
<FONT color="green">1609</FONT>                    {<a name="line.1609"></a>
<FONT color="green">1610</FONT>                        for (int var11 = var5 - 1; var11 &lt; var6; ++var11)<a name="line.1610"></a>
<FONT color="green">1611</FONT>                        {<a name="line.1611"></a>
<FONT color="green">1612</FONT>                            Block var12 = Block.blocksList[this.getBlockId(var9, var11, var10)];<a name="line.1612"></a>
<FONT color="green">1613</FONT>    <a name="line.1613"></a>
<FONT color="green">1614</FONT>                            if (var12 != null)<a name="line.1614"></a>
<FONT color="green">1615</FONT>                            {<a name="line.1615"></a>
<FONT color="green">1616</FONT>                                var12.addCollidingBlockToList(this, var9, var11, var10, par2AxisAlignedBB, this.collidingBoundingBoxes, par1Entity);<a name="line.1616"></a>
<FONT color="green">1617</FONT>                            }<a name="line.1617"></a>
<FONT color="green">1618</FONT>                        }<a name="line.1618"></a>
<FONT color="green">1619</FONT>                    }<a name="line.1619"></a>
<FONT color="green">1620</FONT>                }<a name="line.1620"></a>
<FONT color="green">1621</FONT>            }<a name="line.1621"></a>
<FONT color="green">1622</FONT>    <a name="line.1622"></a>
<FONT color="green">1623</FONT>            double var14 = 0.25D;<a name="line.1623"></a>
<FONT color="green">1624</FONT>            List var16 = this.getEntitiesWithinAABBExcludingEntity(par1Entity, par2AxisAlignedBB.expand(var14, var14, var14));<a name="line.1624"></a>
<FONT color="green">1625</FONT>    <a name="line.1625"></a>
<FONT color="green">1626</FONT>            for (int var15 = 0; var15 &lt; var16.size(); ++var15)<a name="line.1626"></a>
<FONT color="green">1627</FONT>            {<a name="line.1627"></a>
<FONT color="green">1628</FONT>                AxisAlignedBB var13 = ((Entity)var16.get(var15)).getBoundingBox();<a name="line.1628"></a>
<FONT color="green">1629</FONT>    <a name="line.1629"></a>
<FONT color="green">1630</FONT>                if (var13 != null &amp;&amp; var13.intersectsWith(par2AxisAlignedBB))<a name="line.1630"></a>
<FONT color="green">1631</FONT>                {<a name="line.1631"></a>
<FONT color="green">1632</FONT>                    this.collidingBoundingBoxes.add(var13);<a name="line.1632"></a>
<FONT color="green">1633</FONT>                }<a name="line.1633"></a>
<FONT color="green">1634</FONT>    <a name="line.1634"></a>
<FONT color="green">1635</FONT>                var13 = par1Entity.getCollisionBox((Entity)var16.get(var15));<a name="line.1635"></a>
<FONT color="green">1636</FONT>    <a name="line.1636"></a>
<FONT color="green">1637</FONT>                if (var13 != null &amp;&amp; var13.intersectsWith(par2AxisAlignedBB))<a name="line.1637"></a>
<FONT color="green">1638</FONT>                {<a name="line.1638"></a>
<FONT color="green">1639</FONT>                    this.collidingBoundingBoxes.add(var13);<a name="line.1639"></a>
<FONT color="green">1640</FONT>                }<a name="line.1640"></a>
<FONT color="green">1641</FONT>            }<a name="line.1641"></a>
<FONT color="green">1642</FONT>    <a name="line.1642"></a>
<FONT color="green">1643</FONT>            return this.collidingBoundingBoxes;<a name="line.1643"></a>
<FONT color="green">1644</FONT>        }<a name="line.1644"></a>
<FONT color="green">1645</FONT>    <a name="line.1645"></a>
<FONT color="green">1646</FONT>        /**<a name="line.1646"></a>
<FONT color="green">1647</FONT>         * calculates and returns a list of colliding bounding boxes within a given AABB<a name="line.1647"></a>
<FONT color="green">1648</FONT>         */<a name="line.1648"></a>
<FONT color="green">1649</FONT>        public List getAllCollidingBoundingBoxes(AxisAlignedBB par1AxisAlignedBB)<a name="line.1649"></a>
<FONT color="green">1650</FONT>        {<a name="line.1650"></a>
<FONT color="green">1651</FONT>            this.collidingBoundingBoxes.clear();<a name="line.1651"></a>
<FONT color="green">1652</FONT>            int var2 = MathHelper.floor_double(par1AxisAlignedBB.minX);<a name="line.1652"></a>
<FONT color="green">1653</FONT>            int var3 = MathHelper.floor_double(par1AxisAlignedBB.maxX + 1.0D);<a name="line.1653"></a>
<FONT color="green">1654</FONT>            int var4 = MathHelper.floor_double(par1AxisAlignedBB.minY);<a name="line.1654"></a>
<FONT color="green">1655</FONT>            int var5 = MathHelper.floor_double(par1AxisAlignedBB.maxY + 1.0D);<a name="line.1655"></a>
<FONT color="green">1656</FONT>            int var6 = MathHelper.floor_double(par1AxisAlignedBB.minZ);<a name="line.1656"></a>
<FONT color="green">1657</FONT>            int var7 = MathHelper.floor_double(par1AxisAlignedBB.maxZ + 1.0D);<a name="line.1657"></a>
<FONT color="green">1658</FONT>    <a name="line.1658"></a>
<FONT color="green">1659</FONT>            for (int var8 = var2; var8 &lt; var3; ++var8)<a name="line.1659"></a>
<FONT color="green">1660</FONT>            {<a name="line.1660"></a>
<FONT color="green">1661</FONT>                for (int var9 = var6; var9 &lt; var7; ++var9)<a name="line.1661"></a>
<FONT color="green">1662</FONT>                {<a name="line.1662"></a>
<FONT color="green">1663</FONT>                    if (this.blockExists(var8, 64, var9))<a name="line.1663"></a>
<FONT color="green">1664</FONT>                    {<a name="line.1664"></a>
<FONT color="green">1665</FONT>                        for (int var10 = var4 - 1; var10 &lt; var5; ++var10)<a name="line.1665"></a>
<FONT color="green">1666</FONT>                        {<a name="line.1666"></a>
<FONT color="green">1667</FONT>                            Block var11 = Block.blocksList[this.getBlockId(var8, var10, var9)];<a name="line.1667"></a>
<FONT color="green">1668</FONT>    <a name="line.1668"></a>
<FONT color="green">1669</FONT>                            if (var11 != null)<a name="line.1669"></a>
<FONT color="green">1670</FONT>                            {<a name="line.1670"></a>
<FONT color="green">1671</FONT>                                var11.addCollidingBlockToList(this, var8, var10, var9, par1AxisAlignedBB, this.collidingBoundingBoxes, (Entity)null);<a name="line.1671"></a>
<FONT color="green">1672</FONT>                            }<a name="line.1672"></a>
<FONT color="green">1673</FONT>                        }<a name="line.1673"></a>
<FONT color="green">1674</FONT>                    }<a name="line.1674"></a>
<FONT color="green">1675</FONT>                }<a name="line.1675"></a>
<FONT color="green">1676</FONT>            }<a name="line.1676"></a>
<FONT color="green">1677</FONT>    <a name="line.1677"></a>
<FONT color="green">1678</FONT>            return this.collidingBoundingBoxes;<a name="line.1678"></a>
<FONT color="green">1679</FONT>        }<a name="line.1679"></a>
<FONT color="green">1680</FONT>    <a name="line.1680"></a>
<FONT color="green">1681</FONT>        /**<a name="line.1681"></a>
<FONT color="green">1682</FONT>         * Returns the amount of skylight subtracted for the current time<a name="line.1682"></a>
<FONT color="green">1683</FONT>         */<a name="line.1683"></a>
<FONT color="green">1684</FONT>        public int calculateSkylightSubtracted(float par1)<a name="line.1684"></a>
<FONT color="green">1685</FONT>        {<a name="line.1685"></a>
<FONT color="green">1686</FONT>            float var2 = this.getCelestialAngle(par1);<a name="line.1686"></a>
<FONT color="green">1687</FONT>            float var3 = 1.0F - (MathHelper.cos(var2 * (float)Math.PI * 2.0F) * 2.0F + 0.5F);<a name="line.1687"></a>
<FONT color="green">1688</FONT>    <a name="line.1688"></a>
<FONT color="green">1689</FONT>            if (var3 &lt; 0.0F)<a name="line.1689"></a>
<FONT color="green">1690</FONT>            {<a name="line.1690"></a>
<FONT color="green">1691</FONT>                var3 = 0.0F;<a name="line.1691"></a>
<FONT color="green">1692</FONT>            }<a name="line.1692"></a>
<FONT color="green">1693</FONT>    <a name="line.1693"></a>
<FONT color="green">1694</FONT>            if (var3 &gt; 1.0F)<a name="line.1694"></a>
<FONT color="green">1695</FONT>            {<a name="line.1695"></a>
<FONT color="green">1696</FONT>                var3 = 1.0F;<a name="line.1696"></a>
<FONT color="green">1697</FONT>            }<a name="line.1697"></a>
<FONT color="green">1698</FONT>    <a name="line.1698"></a>
<FONT color="green">1699</FONT>            var3 = 1.0F - var3;<a name="line.1699"></a>
<FONT color="green">1700</FONT>            var3 = (float)((double)var3 * (1.0D - (double)(this.getRainStrength(par1) * 5.0F) / 16.0D));<a name="line.1700"></a>
<FONT color="green">1701</FONT>            var3 = (float)((double)var3 * (1.0D - (double)(this.getWeightedThunderStrength(par1) * 5.0F) / 16.0D));<a name="line.1701"></a>
<FONT color="green">1702</FONT>            var3 = 1.0F - var3;<a name="line.1702"></a>
<FONT color="green">1703</FONT>            return (int)(var3 * 11.0F);<a name="line.1703"></a>
<FONT color="green">1704</FONT>        }<a name="line.1704"></a>
<FONT color="green">1705</FONT>    <a name="line.1705"></a>
<FONT color="green">1706</FONT>        @SideOnly(Side.CLIENT)<a name="line.1706"></a>
<FONT color="green">1707</FONT>    <a name="line.1707"></a>
<FONT color="green">1708</FONT>        /**<a name="line.1708"></a>
<FONT color="green">1709</FONT>         * Removes a worldAccess from the worldAccesses object<a name="line.1709"></a>
<FONT color="green">1710</FONT>         */<a name="line.1710"></a>
<FONT color="green">1711</FONT>        public void removeWorldAccess(IWorldAccess par1IWorldAccess)<a name="line.1711"></a>
<FONT color="green">1712</FONT>        {<a name="line.1712"></a>
<FONT color="green">1713</FONT>            this.worldAccesses.remove(par1IWorldAccess);<a name="line.1713"></a>
<FONT color="green">1714</FONT>        }<a name="line.1714"></a>
<FONT color="green">1715</FONT>    <a name="line.1715"></a>
<FONT color="green">1716</FONT>        @SideOnly(Side.CLIENT)<a name="line.1716"></a>
<FONT color="green">1717</FONT>        public float func_72971_b(float par1)<a name="line.1717"></a>
<FONT color="green">1718</FONT>        {<a name="line.1718"></a>
<FONT color="green">1719</FONT>            float var2 = this.getCelestialAngle(par1);<a name="line.1719"></a>
<FONT color="green">1720</FONT>            float var3 = 1.0F - (MathHelper.cos(var2 * (float)Math.PI * 2.0F) * 2.0F + 0.2F);<a name="line.1720"></a>
<FONT color="green">1721</FONT>    <a name="line.1721"></a>
<FONT color="green">1722</FONT>            if (var3 &lt; 0.0F)<a name="line.1722"></a>
<FONT color="green">1723</FONT>            {<a name="line.1723"></a>
<FONT color="green">1724</FONT>                var3 = 0.0F;<a name="line.1724"></a>
<FONT color="green">1725</FONT>            }<a name="line.1725"></a>
<FONT color="green">1726</FONT>    <a name="line.1726"></a>
<FONT color="green">1727</FONT>            if (var3 &gt; 1.0F)<a name="line.1727"></a>
<FONT color="green">1728</FONT>            {<a name="line.1728"></a>
<FONT color="green">1729</FONT>                var3 = 1.0F;<a name="line.1729"></a>
<FONT color="green">1730</FONT>            }<a name="line.1730"></a>
<FONT color="green">1731</FONT>    <a name="line.1731"></a>
<FONT color="green">1732</FONT>            var3 = 1.0F - var3;<a name="line.1732"></a>
<FONT color="green">1733</FONT>            var3 = (float)((double)var3 * (1.0D - (double)(this.getRainStrength(par1) * 5.0F) / 16.0D));<a name="line.1733"></a>
<FONT color="green">1734</FONT>            var3 = (float)((double)var3 * (1.0D - (double)(this.getWeightedThunderStrength(par1) * 5.0F) / 16.0D));<a name="line.1734"></a>
<FONT color="green">1735</FONT>            return var3 * 0.8F + 0.2F;<a name="line.1735"></a>
<FONT color="green">1736</FONT>        }<a name="line.1736"></a>
<FONT color="green">1737</FONT>    <a name="line.1737"></a>
<FONT color="green">1738</FONT>        @SideOnly(Side.CLIENT)<a name="line.1738"></a>
<FONT color="green">1739</FONT>    <a name="line.1739"></a>
<FONT color="green">1740</FONT>        /**<a name="line.1740"></a>
<FONT color="green">1741</FONT>         * Calculates the color for the skybox<a name="line.1741"></a>
<FONT color="green">1742</FONT>         */<a name="line.1742"></a>
<FONT color="green">1743</FONT>        public Vec3 getSkyColor(Entity par1Entity, float par2)<a name="line.1743"></a>
<FONT color="green">1744</FONT>        {<a name="line.1744"></a>
<FONT color="green">1745</FONT>            return provider.getSkyColor(par1Entity, par2);<a name="line.1745"></a>
<FONT color="green">1746</FONT>        }<a name="line.1746"></a>
<FONT color="green">1747</FONT>    <a name="line.1747"></a>
<FONT color="green">1748</FONT>        @SideOnly(Side.CLIENT)<a name="line.1748"></a>
<FONT color="green">1749</FONT>        public Vec3 getSkyColorBody(Entity par1Entity, float par2)<a name="line.1749"></a>
<FONT color="green">1750</FONT>        {<a name="line.1750"></a>
<FONT color="green">1751</FONT>            float var3 = this.getCelestialAngle(par2);<a name="line.1751"></a>
<FONT color="green">1752</FONT>            float var4 = MathHelper.cos(var3 * (float)Math.PI * 2.0F) * 2.0F + 0.5F;<a name="line.1752"></a>
<FONT color="green">1753</FONT>    <a name="line.1753"></a>
<FONT color="green">1754</FONT>            if (var4 &lt; 0.0F)<a name="line.1754"></a>
<FONT color="green">1755</FONT>            {<a name="line.1755"></a>
<FONT color="green">1756</FONT>                var4 = 0.0F;<a name="line.1756"></a>
<FONT color="green">1757</FONT>            }<a name="line.1757"></a>
<FONT color="green">1758</FONT>    <a name="line.1758"></a>
<FONT color="green">1759</FONT>            if (var4 &gt; 1.0F)<a name="line.1759"></a>
<FONT color="green">1760</FONT>            {<a name="line.1760"></a>
<FONT color="green">1761</FONT>                var4 = 1.0F;<a name="line.1761"></a>
<FONT color="green">1762</FONT>            }<a name="line.1762"></a>
<FONT color="green">1763</FONT>    <a name="line.1763"></a>
<FONT color="green">1764</FONT>            int var5 = MathHelper.floor_double(par1Entity.posX);<a name="line.1764"></a>
<FONT color="green">1765</FONT>            int var6 = MathHelper.floor_double(par1Entity.posZ);<a name="line.1765"></a>
<FONT color="green">1766</FONT>            BiomeGenBase var7 = this.getBiomeGenForCoords(var5, var6);<a name="line.1766"></a>
<FONT color="green">1767</FONT>            float var8 = var7.getFloatTemperature();<a name="line.1767"></a>
<FONT color="green">1768</FONT>            int var9 = var7.getSkyColorByTemp(var8);<a name="line.1768"></a>
<FONT color="green">1769</FONT>            float var10 = (float)(var9 &gt;&gt; 16 &amp; 255) / 255.0F;<a name="line.1769"></a>
<FONT color="green">1770</FONT>            float var11 = (float)(var9 &gt;&gt; 8 &amp; 255) / 255.0F;<a name="line.1770"></a>
<FONT color="green">1771</FONT>            float var12 = (float)(var9 &amp; 255) / 255.0F;<a name="line.1771"></a>
<FONT color="green">1772</FONT>            var10 *= var4;<a name="line.1772"></a>
<FONT color="green">1773</FONT>            var11 *= var4;<a name="line.1773"></a>
<FONT color="green">1774</FONT>            var12 *= var4;<a name="line.1774"></a>
<FONT color="green">1775</FONT>            float var13 = this.getRainStrength(par2);<a name="line.1775"></a>
<FONT color="green">1776</FONT>            float var14;<a name="line.1776"></a>
<FONT color="green">1777</FONT>            float var15;<a name="line.1777"></a>
<FONT color="green">1778</FONT>    <a name="line.1778"></a>
<FONT color="green">1779</FONT>            if (var13 &gt; 0.0F)<a name="line.1779"></a>
<FONT color="green">1780</FONT>            {<a name="line.1780"></a>
<FONT color="green">1781</FONT>                var14 = (var10 * 0.3F + var11 * 0.59F + var12 * 0.11F) * 0.6F;<a name="line.1781"></a>
<FONT color="green">1782</FONT>                var15 = 1.0F - var13 * 0.75F;<a name="line.1782"></a>
<FONT color="green">1783</FONT>                var10 = var10 * var15 + var14 * (1.0F - var15);<a name="line.1783"></a>
<FONT color="green">1784</FONT>                var11 = var11 * var15 + var14 * (1.0F - var15);<a name="line.1784"></a>
<FONT color="green">1785</FONT>                var12 = var12 * var15 + var14 * (1.0F - var15);<a name="line.1785"></a>
<FONT color="green">1786</FONT>            }<a name="line.1786"></a>
<FONT color="green">1787</FONT>    <a name="line.1787"></a>
<FONT color="green">1788</FONT>            var14 = this.getWeightedThunderStrength(par2);<a name="line.1788"></a>
<FONT color="green">1789</FONT>    <a name="line.1789"></a>
<FONT color="green">1790</FONT>            if (var14 &gt; 0.0F)<a name="line.1790"></a>
<FONT color="green">1791</FONT>            {<a name="line.1791"></a>
<FONT color="green">1792</FONT>                var15 = (var10 * 0.3F + var11 * 0.59F + var12 * 0.11F) * 0.2F;<a name="line.1792"></a>
<FONT color="green">1793</FONT>                float var16 = 1.0F - var14 * 0.75F;<a name="line.1793"></a>
<FONT color="green">1794</FONT>                var10 = var10 * var16 + var15 * (1.0F - var16);<a name="line.1794"></a>
<FONT color="green">1795</FONT>                var11 = var11 * var16 + var15 * (1.0F - var16);<a name="line.1795"></a>
<FONT color="green">1796</FONT>                var12 = var12 * var16 + var15 * (1.0F - var16);<a name="line.1796"></a>
<FONT color="green">1797</FONT>            }<a name="line.1797"></a>
<FONT color="green">1798</FONT>    <a name="line.1798"></a>
<FONT color="green">1799</FONT>            if (this.lightningFlash &gt; 0)<a name="line.1799"></a>
<FONT color="green">1800</FONT>            {<a name="line.1800"></a>
<FONT color="green">1801</FONT>                var15 = (float)this.lightningFlash - par2;<a name="line.1801"></a>
<FONT color="green">1802</FONT>    <a name="line.1802"></a>
<FONT color="green">1803</FONT>                if (var15 &gt; 1.0F)<a name="line.1803"></a>
<FONT color="green">1804</FONT>                {<a name="line.1804"></a>
<FONT color="green">1805</FONT>                    var15 = 1.0F;<a name="line.1805"></a>
<FONT color="green">1806</FONT>                }<a name="line.1806"></a>
<FONT color="green">1807</FONT>    <a name="line.1807"></a>
<FONT color="green">1808</FONT>                var15 *= 0.45F;<a name="line.1808"></a>
<FONT color="green">1809</FONT>                var10 = var10 * (1.0F - var15) + 0.8F * var15;<a name="line.1809"></a>
<FONT color="green">1810</FONT>                var11 = var11 * (1.0F - var15) + 0.8F * var15;<a name="line.1810"></a>
<FONT color="green">1811</FONT>                var12 = var12 * (1.0F - var15) + 1.0F * var15;<a name="line.1811"></a>
<FONT color="green">1812</FONT>            }<a name="line.1812"></a>
<FONT color="green">1813</FONT>    <a name="line.1813"></a>
<FONT color="green">1814</FONT>            return this.getWorldVec3Pool().getVecFromPool((double)var10, (double)var11, (double)var12);<a name="line.1814"></a>
<FONT color="green">1815</FONT>        }<a name="line.1815"></a>
<FONT color="green">1816</FONT>    <a name="line.1816"></a>
<FONT color="green">1817</FONT>        /**<a name="line.1817"></a>
<FONT color="green">1818</FONT>         * calls calculateCelestialAngle<a name="line.1818"></a>
<FONT color="green">1819</FONT>         */<a name="line.1819"></a>
<FONT color="green">1820</FONT>        public float getCelestialAngle(float par1)<a name="line.1820"></a>
<FONT color="green">1821</FONT>        {<a name="line.1821"></a>
<FONT color="green">1822</FONT>            return this.provider.calculateCelestialAngle(this.worldInfo.getWorldTime(), par1);<a name="line.1822"></a>
<FONT color="green">1823</FONT>        }<a name="line.1823"></a>
<FONT color="green">1824</FONT>    <a name="line.1824"></a>
<FONT color="green">1825</FONT>        @SideOnly(Side.CLIENT)<a name="line.1825"></a>
<FONT color="green">1826</FONT>        public int getMoonPhase(float par1)<a name="line.1826"></a>
<FONT color="green">1827</FONT>        {<a name="line.1827"></a>
<FONT color="green">1828</FONT>            return this.provider.getMoonPhase(this.worldInfo.getWorldTime(), par1);<a name="line.1828"></a>
<FONT color="green">1829</FONT>        }<a name="line.1829"></a>
<FONT color="green">1830</FONT>    <a name="line.1830"></a>
<FONT color="green">1831</FONT>        @SideOnly(Side.CLIENT)<a name="line.1831"></a>
<FONT color="green">1832</FONT>    <a name="line.1832"></a>
<FONT color="green">1833</FONT>        /**<a name="line.1833"></a>
<FONT color="green">1834</FONT>         * Return getCelestialAngle()*2*PI<a name="line.1834"></a>
<FONT color="green">1835</FONT>         */<a name="line.1835"></a>
<FONT color="green">1836</FONT>        public float getCelestialAngleRadians(float par1)<a name="line.1836"></a>
<FONT color="green">1837</FONT>        {<a name="line.1837"></a>
<FONT color="green">1838</FONT>            float var2 = this.getCelestialAngle(par1);<a name="line.1838"></a>
<FONT color="green">1839</FONT>            return var2 * (float)Math.PI * 2.0F;<a name="line.1839"></a>
<FONT color="green">1840</FONT>        }<a name="line.1840"></a>
<FONT color="green">1841</FONT>    <a name="line.1841"></a>
<FONT color="green">1842</FONT>        @SideOnly(Side.CLIENT)<a name="line.1842"></a>
<FONT color="green">1843</FONT>        public Vec3 drawClouds(float par1)<a name="line.1843"></a>
<FONT color="green">1844</FONT>        {<a name="line.1844"></a>
<FONT color="green">1845</FONT>            return provider.drawClouds(par1);<a name="line.1845"></a>
<FONT color="green">1846</FONT>        }<a name="line.1846"></a>
<FONT color="green">1847</FONT>    <a name="line.1847"></a>
<FONT color="green">1848</FONT>        @SideOnly(Side.CLIENT)<a name="line.1848"></a>
<FONT color="green">1849</FONT>        public Vec3 drawCloudsBody(float par1)<a name="line.1849"></a>
<FONT color="green">1850</FONT>        {<a name="line.1850"></a>
<FONT color="green">1851</FONT>            float var2 = this.getCelestialAngle(par1);<a name="line.1851"></a>
<FONT color="green">1852</FONT>            float var3 = MathHelper.cos(var2 * (float)Math.PI * 2.0F) * 2.0F + 0.5F;<a name="line.1852"></a>
<FONT color="green">1853</FONT>    <a name="line.1853"></a>
<FONT color="green">1854</FONT>            if (var3 &lt; 0.0F)<a name="line.1854"></a>
<FONT color="green">1855</FONT>            {<a name="line.1855"></a>
<FONT color="green">1856</FONT>                var3 = 0.0F;<a name="line.1856"></a>
<FONT color="green">1857</FONT>            }<a name="line.1857"></a>
<FONT color="green">1858</FONT>    <a name="line.1858"></a>
<FONT color="green">1859</FONT>            if (var3 &gt; 1.0F)<a name="line.1859"></a>
<FONT color="green">1860</FONT>            {<a name="line.1860"></a>
<FONT color="green">1861</FONT>                var3 = 1.0F;<a name="line.1861"></a>
<FONT color="green">1862</FONT>            }<a name="line.1862"></a>
<FONT color="green">1863</FONT>    <a name="line.1863"></a>
<FONT color="green">1864</FONT>            float var4 = (float)(this.cloudColour &gt;&gt; 16 &amp; 255L) / 255.0F;<a name="line.1864"></a>
<FONT color="green">1865</FONT>            float var5 = (float)(this.cloudColour &gt;&gt; 8 &amp; 255L) / 255.0F;<a name="line.1865"></a>
<FONT color="green">1866</FONT>            float var6 = (float)(this.cloudColour &amp; 255L) / 255.0F;<a name="line.1866"></a>
<FONT color="green">1867</FONT>            float var7 = this.getRainStrength(par1);<a name="line.1867"></a>
<FONT color="green">1868</FONT>            float var8;<a name="line.1868"></a>
<FONT color="green">1869</FONT>            float var9;<a name="line.1869"></a>
<FONT color="green">1870</FONT>    <a name="line.1870"></a>
<FONT color="green">1871</FONT>            if (var7 &gt; 0.0F)<a name="line.1871"></a>
<FONT color="green">1872</FONT>            {<a name="line.1872"></a>
<FONT color="green">1873</FONT>                var8 = (var4 * 0.3F + var5 * 0.59F + var6 * 0.11F) * 0.6F;<a name="line.1873"></a>
<FONT color="green">1874</FONT>                var9 = 1.0F - var7 * 0.95F;<a name="line.1874"></a>
<FONT color="green">1875</FONT>                var4 = var4 * var9 + var8 * (1.0F - var9);<a name="line.1875"></a>
<FONT color="green">1876</FONT>                var5 = var5 * var9 + var8 * (1.0F - var9);<a name="line.1876"></a>
<FONT color="green">1877</FONT>                var6 = var6 * var9 + var8 * (1.0F - var9);<a name="line.1877"></a>
<FONT color="green">1878</FONT>            }<a name="line.1878"></a>
<FONT color="green">1879</FONT>    <a name="line.1879"></a>
<FONT color="green">1880</FONT>            var4 *= var3 * 0.9F + 0.1F;<a name="line.1880"></a>
<FONT color="green">1881</FONT>            var5 *= var3 * 0.9F + 0.1F;<a name="line.1881"></a>
<FONT color="green">1882</FONT>            var6 *= var3 * 0.85F + 0.15F;<a name="line.1882"></a>
<FONT color="green">1883</FONT>            var8 = this.getWeightedThunderStrength(par1);<a name="line.1883"></a>
<FONT color="green">1884</FONT>    <a name="line.1884"></a>
<FONT color="green">1885</FONT>            if (var8 &gt; 0.0F)<a name="line.1885"></a>
<FONT color="green">1886</FONT>            {<a name="line.1886"></a>
<FONT color="green">1887</FONT>                var9 = (var4 * 0.3F + var5 * 0.59F + var6 * 0.11F) * 0.2F;<a name="line.1887"></a>
<FONT color="green">1888</FONT>                float var10 = 1.0F - var8 * 0.95F;<a name="line.1888"></a>
<FONT color="green">1889</FONT>                var4 = var4 * var10 + var9 * (1.0F - var10);<a name="line.1889"></a>
<FONT color="green">1890</FONT>                var5 = var5 * var10 + var9 * (1.0F - var10);<a name="line.1890"></a>
<FONT color="green">1891</FONT>                var6 = var6 * var10 + var9 * (1.0F - var10);<a name="line.1891"></a>
<FONT color="green">1892</FONT>            }<a name="line.1892"></a>
<FONT color="green">1893</FONT>    <a name="line.1893"></a>
<FONT color="green">1894</FONT>            return this.getWorldVec3Pool().getVecFromPool((double)var4, (double)var5, (double)var6);<a name="line.1894"></a>
<FONT color="green">1895</FONT>        }<a name="line.1895"></a>
<FONT color="green">1896</FONT>    <a name="line.1896"></a>
<FONT color="green">1897</FONT>        @SideOnly(Side.CLIENT)<a name="line.1897"></a>
<FONT color="green">1898</FONT>    <a name="line.1898"></a>
<FONT color="green">1899</FONT>        /**<a name="line.1899"></a>
<FONT color="green">1900</FONT>         * Returns vector(ish) with R/G/B for fog<a name="line.1900"></a>
<FONT color="green">1901</FONT>         */<a name="line.1901"></a>
<FONT color="green">1902</FONT>        public Vec3 getFogColor(float par1)<a name="line.1902"></a>
<FONT color="green">1903</FONT>        {<a name="line.1903"></a>
<FONT color="green">1904</FONT>            float var2 = this.getCelestialAngle(par1);<a name="line.1904"></a>
<FONT color="green">1905</FONT>            return this.provider.getFogColor(var2, par1);<a name="line.1905"></a>
<FONT color="green">1906</FONT>        }<a name="line.1906"></a>
<FONT color="green">1907</FONT>    <a name="line.1907"></a>
<FONT color="green">1908</FONT>        /**<a name="line.1908"></a>
<FONT color="green">1909</FONT>         * Gets the height to which rain/snow will fall. Calculates it if not already stored.<a name="line.1909"></a>
<FONT color="green">1910</FONT>         */<a name="line.1910"></a>
<FONT color="green">1911</FONT>        public int getPrecipitationHeight(int par1, int par2)<a name="line.1911"></a>
<FONT color="green">1912</FONT>        {<a name="line.1912"></a>
<FONT color="green">1913</FONT>            return this.getChunkFromBlockCoords(par1, par2).getPrecipitationHeight(par1 &amp; 15, par2 &amp; 15);<a name="line.1913"></a>
<FONT color="green">1914</FONT>        }<a name="line.1914"></a>
<FONT color="green">1915</FONT>    <a name="line.1915"></a>
<FONT color="green">1916</FONT>        /**<a name="line.1916"></a>
<FONT color="green">1917</FONT>         * Finds the highest block on the x, z coordinate that is solid and returns its y coord. Args x, z<a name="line.1917"></a>
<FONT color="green">1918</FONT>         */<a name="line.1918"></a>
<FONT color="green">1919</FONT>        public int getTopSolidOrLiquidBlock(int par1, int par2)<a name="line.1919"></a>
<FONT color="green">1920</FONT>        {<a name="line.1920"></a>
<FONT color="green">1921</FONT>            Chunk var3 = this.getChunkFromBlockCoords(par1, par2);<a name="line.1921"></a>
<FONT color="green">1922</FONT>            int var4 = var3.getTopFilledSegment() + 15;<a name="line.1922"></a>
<FONT color="green">1923</FONT>            par1 &amp;= 15;<a name="line.1923"></a>
<FONT color="green">1924</FONT>    <a name="line.1924"></a>
<FONT color="green">1925</FONT>            for (par2 &amp;= 15; var4 &gt; 0; --var4)<a name="line.1925"></a>
<FONT color="green">1926</FONT>            {<a name="line.1926"></a>
<FONT color="green">1927</FONT>                int var5 = var3.getBlockID(par1, var4, par2);<a name="line.1927"></a>
<FONT color="green">1928</FONT>    <a name="line.1928"></a>
<FONT color="green">1929</FONT>                if (var5 != 0 &amp;&amp; Block.blocksList[var5].blockMaterial.blocksMovement() &amp;&amp; Block.blocksList[var5].blockMaterial != Material.leaves &amp;&amp; !Block.blocksList[var5].isBlockFoliage(this, par1, var4, par2))<a name="line.1929"></a>
<FONT color="green">1930</FONT>                {<a name="line.1930"></a>
<FONT color="green">1931</FONT>                    return var4 + 1;<a name="line.1931"></a>
<FONT color="green">1932</FONT>                }<a name="line.1932"></a>
<FONT color="green">1933</FONT>            }<a name="line.1933"></a>
<FONT color="green">1934</FONT>    <a name="line.1934"></a>
<FONT color="green">1935</FONT>            return -1;<a name="line.1935"></a>
<FONT color="green">1936</FONT>        }<a name="line.1936"></a>
<FONT color="green">1937</FONT>    <a name="line.1937"></a>
<FONT color="green">1938</FONT>        @SideOnly(Side.CLIENT)<a name="line.1938"></a>
<FONT color="green">1939</FONT>    <a name="line.1939"></a>
<FONT color="green">1940</FONT>        /**<a name="line.1940"></a>
<FONT color="green">1941</FONT>         * How bright are stars in the sky<a name="line.1941"></a>
<FONT color="green">1942</FONT>         */<a name="line.1942"></a>
<FONT color="green">1943</FONT>        public float getStarBrightness(float par1)<a name="line.1943"></a>
<FONT color="green">1944</FONT>        {<a name="line.1944"></a>
<FONT color="green">1945</FONT>            return provider.getStarBrightness(par1);<a name="line.1945"></a>
<FONT color="green">1946</FONT>        }<a name="line.1946"></a>
<FONT color="green">1947</FONT>    <a name="line.1947"></a>
<FONT color="green">1948</FONT>        @SideOnly(Side.CLIENT)<a name="line.1948"></a>
<FONT color="green">1949</FONT>        public float getStarBrightnessBody(float par1)<a name="line.1949"></a>
<FONT color="green">1950</FONT>        {<a name="line.1950"></a>
<FONT color="green">1951</FONT>            float var2 = this.getCelestialAngle(par1);<a name="line.1951"></a>
<FONT color="green">1952</FONT>            float var3 = 1.0F - (MathHelper.cos(var2 * (float)Math.PI * 2.0F) * 2.0F + 0.25F);<a name="line.1952"></a>
<FONT color="green">1953</FONT>    <a name="line.1953"></a>
<FONT color="green">1954</FONT>            if (var3 &lt; 0.0F)<a name="line.1954"></a>
<FONT color="green">1955</FONT>            {<a name="line.1955"></a>
<FONT color="green">1956</FONT>                var3 = 0.0F;<a name="line.1956"></a>
<FONT color="green">1957</FONT>            }<a name="line.1957"></a>
<FONT color="green">1958</FONT>    <a name="line.1958"></a>
<FONT color="green">1959</FONT>            if (var3 &gt; 1.0F)<a name="line.1959"></a>
<FONT color="green">1960</FONT>            {<a name="line.1960"></a>
<FONT color="green">1961</FONT>                var3 = 1.0F;<a name="line.1961"></a>
<FONT color="green">1962</FONT>            }<a name="line.1962"></a>
<FONT color="green">1963</FONT>    <a name="line.1963"></a>
<FONT color="green">1964</FONT>            return var3 * var3 * 0.5F;<a name="line.1964"></a>
<FONT color="green">1965</FONT>        }<a name="line.1965"></a>
<FONT color="green">1966</FONT>    <a name="line.1966"></a>
<FONT color="green">1967</FONT>        /**<a name="line.1967"></a>
<FONT color="green">1968</FONT>         * Schedules a tick to a block with a delay (Most commonly the tick rate)<a name="line.1968"></a>
<FONT color="green">1969</FONT>         */<a name="line.1969"></a>
<FONT color="green">1970</FONT>        public void scheduleBlockUpdate(int par1, int par2, int par3, int par4, int par5) {}<a name="line.1970"></a>
<FONT color="green">1971</FONT>    <a name="line.1971"></a>
<FONT color="green">1972</FONT>        public void func_82740_a(int par1, int par2, int par3, int par4, int par5, int par6) {}<a name="line.1972"></a>
<FONT color="green">1973</FONT>    <a name="line.1973"></a>
<FONT color="green">1974</FONT>        /**<a name="line.1974"></a>
<FONT color="green">1975</FONT>         * Schedules a block update from the saved information in a chunk. Called when the chunk is loaded.<a name="line.1975"></a>
<FONT color="green">1976</FONT>         */<a name="line.1976"></a>
<FONT color="green">1977</FONT>        public void scheduleBlockUpdateFromLoad(int par1, int par2, int par3, int par4, int par5) {}<a name="line.1977"></a>
<FONT color="green">1978</FONT>    <a name="line.1978"></a>
<FONT color="green">1979</FONT>        /**<a name="line.1979"></a>
<FONT color="green">1980</FONT>         * Updates (and cleans up) entities and tile entities<a name="line.1980"></a>
<FONT color="green">1981</FONT>         */<a name="line.1981"></a>
<FONT color="green">1982</FONT>        public void updateEntities()<a name="line.1982"></a>
<FONT color="green">1983</FONT>        {<a name="line.1983"></a>
<FONT color="green">1984</FONT>            this.theProfiler.startSection("entities");<a name="line.1984"></a>
<FONT color="green">1985</FONT>            this.theProfiler.startSection("global");<a name="line.1985"></a>
<FONT color="green">1986</FONT>            int var1;<a name="line.1986"></a>
<FONT color="green">1987</FONT>            Entity var2;<a name="line.1987"></a>
<FONT color="green">1988</FONT>            CrashReport var4;<a name="line.1988"></a>
<FONT color="green">1989</FONT>            CrashReportCategory var5;<a name="line.1989"></a>
<FONT color="green">1990</FONT>    <a name="line.1990"></a>
<FONT color="green">1991</FONT>            for (var1 = 0; var1 &lt; this.weatherEffects.size(); ++var1)<a name="line.1991"></a>
<FONT color="green">1992</FONT>            {<a name="line.1992"></a>
<FONT color="green">1993</FONT>                var2 = (Entity)this.weatherEffects.get(var1);<a name="line.1993"></a>
<FONT color="green">1994</FONT>    <a name="line.1994"></a>
<FONT color="green">1995</FONT>                try<a name="line.1995"></a>
<FONT color="green">1996</FONT>                {<a name="line.1996"></a>
<FONT color="green">1997</FONT>                    var2.onUpdate();<a name="line.1997"></a>
<FONT color="green">1998</FONT>                }<a name="line.1998"></a>
<FONT color="green">1999</FONT>                catch (Throwable var8)<a name="line.1999"></a>
<FONT color="green">2000</FONT>                {<a name="line.2000"></a>
<FONT color="green">2001</FONT>                    var4 = CrashReport.func_85055_a(var8, "Ticking entity");<a name="line.2001"></a>
<FONT color="green">2002</FONT>                    var5 = var4.func_85058_a("Entity being ticked");<a name="line.2002"></a>
<FONT color="green">2003</FONT>    <a name="line.2003"></a>
<FONT color="green">2004</FONT>                    if (var2 == null)<a name="line.2004"></a>
<FONT color="green">2005</FONT>                    {<a name="line.2005"></a>
<FONT color="green">2006</FONT>                        var5.addCrashSection("Entity", "~~NULL~~");<a name="line.2006"></a>
<FONT color="green">2007</FONT>                    }<a name="line.2007"></a>
<FONT color="green">2008</FONT>                    else<a name="line.2008"></a>
<FONT color="green">2009</FONT>                    {<a name="line.2009"></a>
<FONT color="green">2010</FONT>                        var2.func_85029_a(var5);<a name="line.2010"></a>
<FONT color="green">2011</FONT>                    }<a name="line.2011"></a>
<FONT color="green">2012</FONT>    <a name="line.2012"></a>
<FONT color="green">2013</FONT>                    throw new ReportedException(var4);<a name="line.2013"></a>
<FONT color="green">2014</FONT>                }<a name="line.2014"></a>
<FONT color="green">2015</FONT>    <a name="line.2015"></a>
<FONT color="green">2016</FONT>                if (var2.isDead)<a name="line.2016"></a>
<FONT color="green">2017</FONT>                {<a name="line.2017"></a>
<FONT color="green">2018</FONT>                    this.weatherEffects.remove(var1--);<a name="line.2018"></a>
<FONT color="green">2019</FONT>                }<a name="line.2019"></a>
<FONT color="green">2020</FONT>            }<a name="line.2020"></a>
<FONT color="green">2021</FONT>    <a name="line.2021"></a>
<FONT color="green">2022</FONT>            this.theProfiler.endStartSection("remove");<a name="line.2022"></a>
<FONT color="green">2023</FONT>            this.loadedEntityList.removeAll(this.unloadedEntityList);<a name="line.2023"></a>
<FONT color="green">2024</FONT>            int var3;<a name="line.2024"></a>
<FONT color="green">2025</FONT>            int var13;<a name="line.2025"></a>
<FONT color="green">2026</FONT>    <a name="line.2026"></a>
<FONT color="green">2027</FONT>            for (var1 = 0; var1 &lt; this.unloadedEntityList.size(); ++var1)<a name="line.2027"></a>
<FONT color="green">2028</FONT>            {<a name="line.2028"></a>
<FONT color="green">2029</FONT>                var2 = (Entity)this.unloadedEntityList.get(var1);<a name="line.2029"></a>
<FONT color="green">2030</FONT>                var3 = var2.chunkCoordX;<a name="line.2030"></a>
<FONT color="green">2031</FONT>                var13 = var2.chunkCoordZ;<a name="line.2031"></a>
<FONT color="green">2032</FONT>    <a name="line.2032"></a>
<FONT color="green">2033</FONT>                if (var2.addedToChunk &amp;&amp; this.chunkExists(var3, var13))<a name="line.2033"></a>
<FONT color="green">2034</FONT>                {<a name="line.2034"></a>
<FONT color="green">2035</FONT>                    this.getChunkFromChunkCoords(var3, var13).removeEntity(var2);<a name="line.2035"></a>
<FONT color="green">2036</FONT>                }<a name="line.2036"></a>
<FONT color="green">2037</FONT>            }<a name="line.2037"></a>
<FONT color="green">2038</FONT>    <a name="line.2038"></a>
<FONT color="green">2039</FONT>            for (var1 = 0; var1 &lt; this.unloadedEntityList.size(); ++var1)<a name="line.2039"></a>
<FONT color="green">2040</FONT>            {<a name="line.2040"></a>
<FONT color="green">2041</FONT>                this.releaseEntitySkin((Entity)this.unloadedEntityList.get(var1));<a name="line.2041"></a>
<FONT color="green">2042</FONT>            }<a name="line.2042"></a>
<FONT color="green">2043</FONT>    <a name="line.2043"></a>
<FONT color="green">2044</FONT>            this.unloadedEntityList.clear();<a name="line.2044"></a>
<FONT color="green">2045</FONT>            this.theProfiler.endStartSection("regular");<a name="line.2045"></a>
<FONT color="green">2046</FONT>    <a name="line.2046"></a>
<FONT color="green">2047</FONT>            for (var1 = 0; var1 &lt; this.loadedEntityList.size(); ++var1)<a name="line.2047"></a>
<FONT color="green">2048</FONT>            {<a name="line.2048"></a>
<FONT color="green">2049</FONT>                var2 = (Entity)this.loadedEntityList.get(var1);<a name="line.2049"></a>
<FONT color="green">2050</FONT>    <a name="line.2050"></a>
<FONT color="green">2051</FONT>                if (var2.ridingEntity != null)<a name="line.2051"></a>
<FONT color="green">2052</FONT>                {<a name="line.2052"></a>
<FONT color="green">2053</FONT>                    if (!var2.ridingEntity.isDead &amp;&amp; var2.ridingEntity.riddenByEntity == var2)<a name="line.2053"></a>
<FONT color="green">2054</FONT>                    {<a name="line.2054"></a>
<FONT color="green">2055</FONT>                        continue;<a name="line.2055"></a>
<FONT color="green">2056</FONT>                    }<a name="line.2056"></a>
<FONT color="green">2057</FONT>    <a name="line.2057"></a>
<FONT color="green">2058</FONT>                    var2.ridingEntity.riddenByEntity = null;<a name="line.2058"></a>
<FONT color="green">2059</FONT>                    var2.ridingEntity = null;<a name="line.2059"></a>
<FONT color="green">2060</FONT>                }<a name="line.2060"></a>
<FONT color="green">2061</FONT>    <a name="line.2061"></a>
<FONT color="green">2062</FONT>                this.theProfiler.startSection("tick");<a name="line.2062"></a>
<FONT color="green">2063</FONT>    <a name="line.2063"></a>
<FONT color="green">2064</FONT>                if (!var2.isDead)<a name="line.2064"></a>
<FONT color="green">2065</FONT>                {<a name="line.2065"></a>
<FONT color="green">2066</FONT>                    try<a name="line.2066"></a>
<FONT color="green">2067</FONT>                    {<a name="line.2067"></a>
<FONT color="green">2068</FONT>                        this.updateEntity(var2);<a name="line.2068"></a>
<FONT color="green">2069</FONT>                    }<a name="line.2069"></a>
<FONT color="green">2070</FONT>                    catch (Throwable var7)<a name="line.2070"></a>
<FONT color="green">2071</FONT>                    {<a name="line.2071"></a>
<FONT color="green">2072</FONT>                        var4 = CrashReport.func_85055_a(var7, "Ticking entity");<a name="line.2072"></a>
<FONT color="green">2073</FONT>                        var5 = var4.func_85058_a("Entity being ticked");<a name="line.2073"></a>
<FONT color="green">2074</FONT>    <a name="line.2074"></a>
<FONT color="green">2075</FONT>                        if (var2 == null)<a name="line.2075"></a>
<FONT color="green">2076</FONT>                        {<a name="line.2076"></a>
<FONT color="green">2077</FONT>                            var5.addCrashSection("Entity", "~~NULL~~");<a name="line.2077"></a>
<FONT color="green">2078</FONT>                        }<a name="line.2078"></a>
<FONT color="green">2079</FONT>                        else<a name="line.2079"></a>
<FONT color="green">2080</FONT>                        {<a name="line.2080"></a>
<FONT color="green">2081</FONT>                            var2.func_85029_a(var5);<a name="line.2081"></a>
<FONT color="green">2082</FONT>                        }<a name="line.2082"></a>
<FONT color="green">2083</FONT>    <a name="line.2083"></a>
<FONT color="green">2084</FONT>                        throw new ReportedException(var4);<a name="line.2084"></a>
<FONT color="green">2085</FONT>                    }<a name="line.2085"></a>
<FONT color="green">2086</FONT>                }<a name="line.2086"></a>
<FONT color="green">2087</FONT>    <a name="line.2087"></a>
<FONT color="green">2088</FONT>                this.theProfiler.endSection();<a name="line.2088"></a>
<FONT color="green">2089</FONT>                this.theProfiler.startSection("remove");<a name="line.2089"></a>
<FONT color="green">2090</FONT>    <a name="line.2090"></a>
<FONT color="green">2091</FONT>                if (var2.isDead)<a name="line.2091"></a>
<FONT color="green">2092</FONT>                {<a name="line.2092"></a>
<FONT color="green">2093</FONT>                    var3 = var2.chunkCoordX;<a name="line.2093"></a>
<FONT color="green">2094</FONT>                    var13 = var2.chunkCoordZ;<a name="line.2094"></a>
<FONT color="green">2095</FONT>    <a name="line.2095"></a>
<FONT color="green">2096</FONT>                    if (var2.addedToChunk &amp;&amp; this.chunkExists(var3, var13))<a name="line.2096"></a>
<FONT color="green">2097</FONT>                    {<a name="line.2097"></a>
<FONT color="green">2098</FONT>                        this.getChunkFromChunkCoords(var3, var13).removeEntity(var2);<a name="line.2098"></a>
<FONT color="green">2099</FONT>                    }<a name="line.2099"></a>
<FONT color="green">2100</FONT>    <a name="line.2100"></a>
<FONT color="green">2101</FONT>                    this.loadedEntityList.remove(var1--);<a name="line.2101"></a>
<FONT color="green">2102</FONT>                    this.releaseEntitySkin(var2);<a name="line.2102"></a>
<FONT color="green">2103</FONT>                }<a name="line.2103"></a>
<FONT color="green">2104</FONT>    <a name="line.2104"></a>
<FONT color="green">2105</FONT>                this.theProfiler.endSection();<a name="line.2105"></a>
<FONT color="green">2106</FONT>            }<a name="line.2106"></a>
<FONT color="green">2107</FONT>    <a name="line.2107"></a>
<FONT color="green">2108</FONT>            this.theProfiler.endStartSection("tileEntities");<a name="line.2108"></a>
<FONT color="green">2109</FONT>            this.scanningTileEntities = true;<a name="line.2109"></a>
<FONT color="green">2110</FONT>            Iterator var14 = this.loadedTileEntityList.iterator();<a name="line.2110"></a>
<FONT color="green">2111</FONT>    <a name="line.2111"></a>
<FONT color="green">2112</FONT>            while (var14.hasNext())<a name="line.2112"></a>
<FONT color="green">2113</FONT>            {<a name="line.2113"></a>
<FONT color="green">2114</FONT>                TileEntity var9 = (TileEntity)var14.next();<a name="line.2114"></a>
<FONT color="green">2115</FONT>    <a name="line.2115"></a>
<FONT color="green">2116</FONT>                if (!var9.isInvalid() &amp;&amp; var9.func_70309_m() &amp;&amp; this.blockExists(var9.xCoord, var9.yCoord, var9.zCoord))<a name="line.2116"></a>
<FONT color="green">2117</FONT>                {<a name="line.2117"></a>
<FONT color="green">2118</FONT>                    try<a name="line.2118"></a>
<FONT color="green">2119</FONT>                    {<a name="line.2119"></a>
<FONT color="green">2120</FONT>                        var9.updateEntity();<a name="line.2120"></a>
<FONT color="green">2121</FONT>                    }<a name="line.2121"></a>
<FONT color="green">2122</FONT>                    catch (Throwable var6)<a name="line.2122"></a>
<FONT color="green">2123</FONT>                    {<a name="line.2123"></a>
<FONT color="green">2124</FONT>                        var4 = CrashReport.func_85055_a(var6, "Ticking tile entity");<a name="line.2124"></a>
<FONT color="green">2125</FONT>                        var5 = var4.func_85058_a("Tile entity being ticked");<a name="line.2125"></a>
<FONT color="green">2126</FONT>    <a name="line.2126"></a>
<FONT color="green">2127</FONT>                        if (var9 == null)<a name="line.2127"></a>
<FONT color="green">2128</FONT>                        {<a name="line.2128"></a>
<FONT color="green">2129</FONT>                            var5.addCrashSection("Tile entity", "~~NULL~~");<a name="line.2129"></a>
<FONT color="green">2130</FONT>                        }<a name="line.2130"></a>
<FONT color="green">2131</FONT>                        else<a name="line.2131"></a>
<FONT color="green">2132</FONT>                        {<a name="line.2132"></a>
<FONT color="green">2133</FONT>                            var9.func_85027_a(var5);<a name="line.2133"></a>
<FONT color="green">2134</FONT>                        }<a name="line.2134"></a>
<FONT color="green">2135</FONT>    <a name="line.2135"></a>
<FONT color="green">2136</FONT>                        throw new ReportedException(var4);<a name="line.2136"></a>
<FONT color="green">2137</FONT>                    }<a name="line.2137"></a>
<FONT color="green">2138</FONT>                }<a name="line.2138"></a>
<FONT color="green">2139</FONT>    <a name="line.2139"></a>
<FONT color="green">2140</FONT>                if (var9.isInvalid())<a name="line.2140"></a>
<FONT color="green">2141</FONT>                {<a name="line.2141"></a>
<FONT color="green">2142</FONT>                    var14.remove();<a name="line.2142"></a>
<FONT color="green">2143</FONT>    <a name="line.2143"></a>
<FONT color="green">2144</FONT>                    if (this.chunkExists(var9.xCoord &gt;&gt; 4, var9.zCoord &gt;&gt; 4))<a name="line.2144"></a>
<FONT color="green">2145</FONT>                    {<a name="line.2145"></a>
<FONT color="green">2146</FONT>                        Chunk var11 = this.getChunkFromChunkCoords(var9.xCoord &gt;&gt; 4, var9.zCoord &gt;&gt; 4);<a name="line.2146"></a>
<FONT color="green">2147</FONT>    <a name="line.2147"></a>
<FONT color="green">2148</FONT>                        if (var11 != null)<a name="line.2148"></a>
<FONT color="green">2149</FONT>                        {<a name="line.2149"></a>
<FONT color="green">2150</FONT>                            var11.cleanChunkBlockTileEntity(var9.xCoord &amp; 15, var9.yCoord, var9.zCoord &amp; 15);<a name="line.2150"></a>
<FONT color="green">2151</FONT>                        }<a name="line.2151"></a>
<FONT color="green">2152</FONT>                    }<a name="line.2152"></a>
<FONT color="green">2153</FONT>                }<a name="line.2153"></a>
<FONT color="green">2154</FONT>            }<a name="line.2154"></a>
<FONT color="green">2155</FONT>    <a name="line.2155"></a>
<FONT color="green">2156</FONT>            if (!this.entityRemoval.isEmpty())<a name="line.2156"></a>
<FONT color="green">2157</FONT>            {<a name="line.2157"></a>
<FONT color="green">2158</FONT>                for (Object tile : entityRemoval)<a name="line.2158"></a>
<FONT color="green">2159</FONT>                {<a name="line.2159"></a>
<FONT color="green">2160</FONT>                   ((TileEntity)tile).onChunkUnload();<a name="line.2160"></a>
<FONT color="green">2161</FONT>                }<a name="line.2161"></a>
<FONT color="green">2162</FONT>                this.loadedTileEntityList.removeAll(this.entityRemoval);<a name="line.2162"></a>
<FONT color="green">2163</FONT>                this.entityRemoval.clear();<a name="line.2163"></a>
<FONT color="green">2164</FONT>            }<a name="line.2164"></a>
<FONT color="green">2165</FONT>    <a name="line.2165"></a>
<FONT color="green">2166</FONT>            this.scanningTileEntities = false;<a name="line.2166"></a>
<FONT color="green">2167</FONT>    <a name="line.2167"></a>
<FONT color="green">2168</FONT>            this.theProfiler.endStartSection("pendingTileEntities");<a name="line.2168"></a>
<FONT color="green">2169</FONT>    <a name="line.2169"></a>
<FONT color="green">2170</FONT>            if (!this.addedTileEntityList.isEmpty())<a name="line.2170"></a>
<FONT color="green">2171</FONT>            {<a name="line.2171"></a>
<FONT color="green">2172</FONT>                for (int var10 = 0; var10 &lt; this.addedTileEntityList.size(); ++var10)<a name="line.2172"></a>
<FONT color="green">2173</FONT>                {<a name="line.2173"></a>
<FONT color="green">2174</FONT>                    TileEntity var12 = (TileEntity)this.addedTileEntityList.get(var10);<a name="line.2174"></a>
<FONT color="green">2175</FONT>    <a name="line.2175"></a>
<FONT color="green">2176</FONT>                    if (!var12.isInvalid())<a name="line.2176"></a>
<FONT color="green">2177</FONT>                    {<a name="line.2177"></a>
<FONT color="green">2178</FONT>                        if (!this.loadedTileEntityList.contains(var12))<a name="line.2178"></a>
<FONT color="green">2179</FONT>                        {<a name="line.2179"></a>
<FONT color="green">2180</FONT>                            this.loadedTileEntityList.add(var12);<a name="line.2180"></a>
<FONT color="green">2181</FONT>                        }<a name="line.2181"></a>
<FONT color="green">2182</FONT>                    }<a name="line.2182"></a>
<FONT color="green">2183</FONT>                    else<a name="line.2183"></a>
<FONT color="green">2184</FONT>                    {<a name="line.2184"></a>
<FONT color="green">2185</FONT>                        if (this.chunkExists(var12.xCoord &gt;&gt; 4, var12.zCoord &gt;&gt; 4))<a name="line.2185"></a>
<FONT color="green">2186</FONT>                        {<a name="line.2186"></a>
<FONT color="green">2187</FONT>                            Chunk var15 = this.getChunkFromChunkCoords(var12.xCoord &gt;&gt; 4, var12.zCoord &gt;&gt; 4);<a name="line.2187"></a>
<FONT color="green">2188</FONT>    <a name="line.2188"></a>
<FONT color="green">2189</FONT>                            if (var15 != null)<a name="line.2189"></a>
<FONT color="green">2190</FONT>                            {<a name="line.2190"></a>
<FONT color="green">2191</FONT>                                var15.cleanChunkBlockTileEntity(var12.xCoord &amp; 15, var12.yCoord, var12.zCoord &amp; 15);<a name="line.2191"></a>
<FONT color="green">2192</FONT>                            }<a name="line.2192"></a>
<FONT color="green">2193</FONT>                        }<a name="line.2193"></a>
<FONT color="green">2194</FONT>                    }<a name="line.2194"></a>
<FONT color="green">2195</FONT>                }<a name="line.2195"></a>
<FONT color="green">2196</FONT>    <a name="line.2196"></a>
<FONT color="green">2197</FONT>                this.addedTileEntityList.clear();<a name="line.2197"></a>
<FONT color="green">2198</FONT>            }<a name="line.2198"></a>
<FONT color="green">2199</FONT>    <a name="line.2199"></a>
<FONT color="green">2200</FONT>            this.theProfiler.endSection();<a name="line.2200"></a>
<FONT color="green">2201</FONT>            this.theProfiler.endSection();<a name="line.2201"></a>
<FONT color="green">2202</FONT>        }<a name="line.2202"></a>
<FONT color="green">2203</FONT>    <a name="line.2203"></a>
<FONT color="green">2204</FONT>        public void addTileEntity(Collection par1Collection)<a name="line.2204"></a>
<FONT color="green">2205</FONT>        {<a name="line.2205"></a>
<FONT color="green">2206</FONT>            List dest = scanningTileEntities ? addedTileEntityList : loadedTileEntityList;<a name="line.2206"></a>
<FONT color="green">2207</FONT>            for(Object entity : par1Collection)<a name="line.2207"></a>
<FONT color="green">2208</FONT>            {<a name="line.2208"></a>
<FONT color="green">2209</FONT>                if(((TileEntity)entity).canUpdate())<a name="line.2209"></a>
<FONT color="green">2210</FONT>                {<a name="line.2210"></a>
<FONT color="green">2211</FONT>                    dest.add(entity);<a name="line.2211"></a>
<FONT color="green">2212</FONT>                }<a name="line.2212"></a>
<FONT color="green">2213</FONT>            }<a name="line.2213"></a>
<FONT color="green">2214</FONT>        }<a name="line.2214"></a>
<FONT color="green">2215</FONT>    <a name="line.2215"></a>
<FONT color="green">2216</FONT>        /**<a name="line.2216"></a>
<FONT color="green">2217</FONT>         * Will update the entity in the world if the chunk the entity is in is currently loaded. Args: entity<a name="line.2217"></a>
<FONT color="green">2218</FONT>         */<a name="line.2218"></a>
<FONT color="green">2219</FONT>        public void updateEntity(Entity par1Entity)<a name="line.2219"></a>
<FONT color="green">2220</FONT>        {<a name="line.2220"></a>
<FONT color="green">2221</FONT>            this.updateEntityWithOptionalForce(par1Entity, true);<a name="line.2221"></a>
<FONT color="green">2222</FONT>        }<a name="line.2222"></a>
<FONT color="green">2223</FONT>    <a name="line.2223"></a>
<FONT color="green">2224</FONT>        /**<a name="line.2224"></a>
<FONT color="green">2225</FONT>         * Will update the entity in the world if the chunk the entity is in is currently loaded or its forced to update.<a name="line.2225"></a>
<FONT color="green">2226</FONT>         * Args: entity, forceUpdate<a name="line.2226"></a>
<FONT color="green">2227</FONT>         */<a name="line.2227"></a>
<FONT color="green">2228</FONT>        public void updateEntityWithOptionalForce(Entity par1Entity, boolean par2)<a name="line.2228"></a>
<FONT color="green">2229</FONT>        {<a name="line.2229"></a>
<FONT color="green">2230</FONT>            int var3 = MathHelper.floor_double(par1Entity.posX);<a name="line.2230"></a>
<FONT color="green">2231</FONT>            int var4 = MathHelper.floor_double(par1Entity.posZ);<a name="line.2231"></a>
<FONT color="green">2232</FONT>    <a name="line.2232"></a>
<FONT color="green">2233</FONT>            boolean isForced = getPersistentChunks().containsKey(new ChunkCoordIntPair(var3 &gt;&gt; 4, var4 &gt;&gt; 4));<a name="line.2233"></a>
<FONT color="green">2234</FONT>            byte var5 = isForced ? (byte)0 : 32;<a name="line.2234"></a>
<FONT color="green">2235</FONT>            boolean canUpdate = !par2 || this.checkChunksExist(var3 - var5, 0, var4 - var5, var3 + var5, 0, var4 + var5);<a name="line.2235"></a>
<FONT color="green">2236</FONT>            if (!canUpdate)<a name="line.2236"></a>
<FONT color="green">2237</FONT>            {<a name="line.2237"></a>
<FONT color="green">2238</FONT>                EntityEvent.CanUpdate event = new EntityEvent.CanUpdate(par1Entity);<a name="line.2238"></a>
<FONT color="green">2239</FONT>                MinecraftForge.EVENT_BUS.post(event);<a name="line.2239"></a>
<FONT color="green">2240</FONT>                canUpdate = event.canUpdate;<a name="line.2240"></a>
<FONT color="green">2241</FONT>            }<a name="line.2241"></a>
<FONT color="green">2242</FONT>            if (canUpdate)<a name="line.2242"></a>
<FONT color="green">2243</FONT>            {<a name="line.2243"></a>
<FONT color="green">2244</FONT>                par1Entity.lastTickPosX = par1Entity.posX;<a name="line.2244"></a>
<FONT color="green">2245</FONT>                par1Entity.lastTickPosY = par1Entity.posY;<a name="line.2245"></a>
<FONT color="green">2246</FONT>                par1Entity.lastTickPosZ = par1Entity.posZ;<a name="line.2246"></a>
<FONT color="green">2247</FONT>                par1Entity.prevRotationYaw = par1Entity.rotationYaw;<a name="line.2247"></a>
<FONT color="green">2248</FONT>                par1Entity.prevRotationPitch = par1Entity.rotationPitch;<a name="line.2248"></a>
<FONT color="green">2249</FONT>    <a name="line.2249"></a>
<FONT color="green">2250</FONT>                if (par2 &amp;&amp; par1Entity.addedToChunk)<a name="line.2250"></a>
<FONT color="green">2251</FONT>                {<a name="line.2251"></a>
<FONT color="green">2252</FONT>                    if (par1Entity.ridingEntity != null)<a name="line.2252"></a>
<FONT color="green">2253</FONT>                    {<a name="line.2253"></a>
<FONT color="green">2254</FONT>                        par1Entity.updateRidden();<a name="line.2254"></a>
<FONT color="green">2255</FONT>                    }<a name="line.2255"></a>
<FONT color="green">2256</FONT>                    else<a name="line.2256"></a>
<FONT color="green">2257</FONT>                    {<a name="line.2257"></a>
<FONT color="green">2258</FONT>                        par1Entity.onUpdate();<a name="line.2258"></a>
<FONT color="green">2259</FONT>                    }<a name="line.2259"></a>
<FONT color="green">2260</FONT>                }<a name="line.2260"></a>
<FONT color="green">2261</FONT>    <a name="line.2261"></a>
<FONT color="green">2262</FONT>                this.theProfiler.startSection("chunkCheck");<a name="line.2262"></a>
<FONT color="green">2263</FONT>    <a name="line.2263"></a>
<FONT color="green">2264</FONT>                if (Double.isNaN(par1Entity.posX) || Double.isInfinite(par1Entity.posX))<a name="line.2264"></a>
<FONT color="green">2265</FONT>                {<a name="line.2265"></a>
<FONT color="green">2266</FONT>                    par1Entity.posX = par1Entity.lastTickPosX;<a name="line.2266"></a>
<FONT color="green">2267</FONT>                }<a name="line.2267"></a>
<FONT color="green">2268</FONT>    <a name="line.2268"></a>
<FONT color="green">2269</FONT>                if (Double.isNaN(par1Entity.posY) || Double.isInfinite(par1Entity.posY))<a name="line.2269"></a>
<FONT color="green">2270</FONT>                {<a name="line.2270"></a>
<FONT color="green">2271</FONT>                    par1Entity.posY = par1Entity.lastTickPosY;<a name="line.2271"></a>
<FONT color="green">2272</FONT>                }<a name="line.2272"></a>
<FONT color="green">2273</FONT>    <a name="line.2273"></a>
<FONT color="green">2274</FONT>                if (Double.isNaN(par1Entity.posZ) || Double.isInfinite(par1Entity.posZ))<a name="line.2274"></a>
<FONT color="green">2275</FONT>                {<a name="line.2275"></a>
<FONT color="green">2276</FONT>                    par1Entity.posZ = par1Entity.lastTickPosZ;<a name="line.2276"></a>
<FONT color="green">2277</FONT>                }<a name="line.2277"></a>
<FONT color="green">2278</FONT>    <a name="line.2278"></a>
<FONT color="green">2279</FONT>                if (Double.isNaN((double)par1Entity.rotationPitch) || Double.isInfinite((double)par1Entity.rotationPitch))<a name="line.2279"></a>
<FONT color="green">2280</FONT>                {<a name="line.2280"></a>
<FONT color="green">2281</FONT>                    par1Entity.rotationPitch = par1Entity.prevRotationPitch;<a name="line.2281"></a>
<FONT color="green">2282</FONT>                }<a name="line.2282"></a>
<FONT color="green">2283</FONT>    <a name="line.2283"></a>
<FONT color="green">2284</FONT>                if (Double.isNaN((double)par1Entity.rotationYaw) || Double.isInfinite((double)par1Entity.rotationYaw))<a name="line.2284"></a>
<FONT color="green">2285</FONT>                {<a name="line.2285"></a>
<FONT color="green">2286</FONT>                    par1Entity.rotationYaw = par1Entity.prevRotationYaw;<a name="line.2286"></a>
<FONT color="green">2287</FONT>                }<a name="line.2287"></a>
<FONT color="green">2288</FONT>    <a name="line.2288"></a>
<FONT color="green">2289</FONT>                int var6 = MathHelper.floor_double(par1Entity.posX / 16.0D);<a name="line.2289"></a>
<FONT color="green">2290</FONT>                int var7 = MathHelper.floor_double(par1Entity.posY / 16.0D);<a name="line.2290"></a>
<FONT color="green">2291</FONT>                int var8 = MathHelper.floor_double(par1Entity.posZ / 16.0D);<a name="line.2291"></a>
<FONT color="green">2292</FONT>    <a name="line.2292"></a>
<FONT color="green">2293</FONT>                if (!par1Entity.addedToChunk || par1Entity.chunkCoordX != var6 || par1Entity.chunkCoordY != var7 || par1Entity.chunkCoordZ != var8)<a name="line.2293"></a>
<FONT color="green">2294</FONT>                {<a name="line.2294"></a>
<FONT color="green">2295</FONT>                    if (par1Entity.addedToChunk &amp;&amp; this.chunkExists(par1Entity.chunkCoordX, par1Entity.chunkCoordZ))<a name="line.2295"></a>
<FONT color="green">2296</FONT>                    {<a name="line.2296"></a>
<FONT color="green">2297</FONT>                        this.getChunkFromChunkCoords(par1Entity.chunkCoordX, par1Entity.chunkCoordZ).removeEntityAtIndex(par1Entity, par1Entity.chunkCoordY);<a name="line.2297"></a>
<FONT color="green">2298</FONT>                    }<a name="line.2298"></a>
<FONT color="green">2299</FONT>    <a name="line.2299"></a>
<FONT color="green">2300</FONT>                    if (this.chunkExists(var6, var8))<a name="line.2300"></a>
<FONT color="green">2301</FONT>                    {<a name="line.2301"></a>
<FONT color="green">2302</FONT>                        par1Entity.addedToChunk = true;<a name="line.2302"></a>
<FONT color="green">2303</FONT>                        this.getChunkFromChunkCoords(var6, var8).addEntity(par1Entity);<a name="line.2303"></a>
<FONT color="green">2304</FONT>                    }<a name="line.2304"></a>
<FONT color="green">2305</FONT>                    else<a name="line.2305"></a>
<FONT color="green">2306</FONT>                    {<a name="line.2306"></a>
<FONT color="green">2307</FONT>                        par1Entity.addedToChunk = false;<a name="line.2307"></a>
<FONT color="green">2308</FONT>                    }<a name="line.2308"></a>
<FONT color="green">2309</FONT>                }<a name="line.2309"></a>
<FONT color="green">2310</FONT>    <a name="line.2310"></a>
<FONT color="green">2311</FONT>                this.theProfiler.endSection();<a name="line.2311"></a>
<FONT color="green">2312</FONT>    <a name="line.2312"></a>
<FONT color="green">2313</FONT>                if (par2 &amp;&amp; par1Entity.addedToChunk &amp;&amp; par1Entity.riddenByEntity != null)<a name="line.2313"></a>
<FONT color="green">2314</FONT>                {<a name="line.2314"></a>
<FONT color="green">2315</FONT>                    if (!par1Entity.riddenByEntity.isDead &amp;&amp; par1Entity.riddenByEntity.ridingEntity == par1Entity)<a name="line.2315"></a>
<FONT color="green">2316</FONT>                    {<a name="line.2316"></a>
<FONT color="green">2317</FONT>                        this.updateEntity(par1Entity.riddenByEntity);<a name="line.2317"></a>
<FONT color="green">2318</FONT>                    }<a name="line.2318"></a>
<FONT color="green">2319</FONT>                    else<a name="line.2319"></a>
<FONT color="green">2320</FONT>                    {<a name="line.2320"></a>
<FONT color="green">2321</FONT>                        par1Entity.riddenByEntity.ridingEntity = null;<a name="line.2321"></a>
<FONT color="green">2322</FONT>                        par1Entity.riddenByEntity = null;<a name="line.2322"></a>
<FONT color="green">2323</FONT>                    }<a name="line.2323"></a>
<FONT color="green">2324</FONT>                }<a name="line.2324"></a>
<FONT color="green">2325</FONT>            }<a name="line.2325"></a>
<FONT color="green">2326</FONT>        }<a name="line.2326"></a>
<FONT color="green">2327</FONT>    <a name="line.2327"></a>
<FONT color="green">2328</FONT>        /**<a name="line.2328"></a>
<FONT color="green">2329</FONT>         * Returns true if there are no solid, live entities in the specified AxisAlignedBB<a name="line.2329"></a>
<FONT color="green">2330</FONT>         */<a name="line.2330"></a>
<FONT color="green">2331</FONT>        public boolean checkIfAABBIsClear(AxisAlignedBB par1AxisAlignedBB)<a name="line.2331"></a>
<FONT color="green">2332</FONT>        {<a name="line.2332"></a>
<FONT color="green">2333</FONT>            return this.checkIfAABBIsClearExcludingEntity(par1AxisAlignedBB, (Entity)null);<a name="line.2333"></a>
<FONT color="green">2334</FONT>        }<a name="line.2334"></a>
<FONT color="green">2335</FONT>    <a name="line.2335"></a>
<FONT color="green">2336</FONT>        /**<a name="line.2336"></a>
<FONT color="green">2337</FONT>         * Returns true if there are no solid, live entities in the specified AxisAlignedBB, excluding the given entity<a name="line.2337"></a>
<FONT color="green">2338</FONT>         */<a name="line.2338"></a>
<FONT color="green">2339</FONT>        public boolean checkIfAABBIsClearExcludingEntity(AxisAlignedBB par1AxisAlignedBB, Entity par2Entity)<a name="line.2339"></a>
<FONT color="green">2340</FONT>        {<a name="line.2340"></a>
<FONT color="green">2341</FONT>            List var3 = this.getEntitiesWithinAABBExcludingEntity((Entity)null, par1AxisAlignedBB);<a name="line.2341"></a>
<FONT color="green">2342</FONT>    <a name="line.2342"></a>
<FONT color="green">2343</FONT>            for (int var4 = 0; var4 &lt; var3.size(); ++var4)<a name="line.2343"></a>
<FONT color="green">2344</FONT>            {<a name="line.2344"></a>
<FONT color="green">2345</FONT>                Entity var5 = (Entity)var3.get(var4);<a name="line.2345"></a>
<FONT color="green">2346</FONT>    <a name="line.2346"></a>
<FONT color="green">2347</FONT>                if (!var5.isDead &amp;&amp; var5.preventEntitySpawning &amp;&amp; var5 != par2Entity)<a name="line.2347"></a>
<FONT color="green">2348</FONT>                {<a name="line.2348"></a>
<FONT color="green">2349</FONT>                    return false;<a name="line.2349"></a>
<FONT color="green">2350</FONT>                }<a name="line.2350"></a>
<FONT color="green">2351</FONT>            }<a name="line.2351"></a>
<FONT color="green">2352</FONT>    <a name="line.2352"></a>
<FONT color="green">2353</FONT>            return true;<a name="line.2353"></a>
<FONT color="green">2354</FONT>        }<a name="line.2354"></a>
<FONT color="green">2355</FONT>    <a name="line.2355"></a>
<FONT color="green">2356</FONT>        /**<a name="line.2356"></a>
<FONT color="green">2357</FONT>         * Returns true if there are any blocks in the region constrained by an AxisAlignedBB<a name="line.2357"></a>
<FONT color="green">2358</FONT>         */<a name="line.2358"></a>
<FONT color="green">2359</FONT>        public boolean isAABBNonEmpty(AxisAlignedBB par1AxisAlignedBB)<a name="line.2359"></a>
<FONT color="green">2360</FONT>        {<a name="line.2360"></a>
<FONT color="green">2361</FONT>            int var2 = MathHelper.floor_double(par1AxisAlignedBB.minX);<a name="line.2361"></a>
<FONT color="green">2362</FONT>            int var3 = MathHelper.floor_double(par1AxisAlignedBB.maxX + 1.0D);<a name="line.2362"></a>
<FONT color="green">2363</FONT>            int var4 = MathHelper.floor_double(par1AxisAlignedBB.minY);<a name="line.2363"></a>
<FONT color="green">2364</FONT>            int var5 = MathHelper.floor_double(par1AxisAlignedBB.maxY + 1.0D);<a name="line.2364"></a>
<FONT color="green">2365</FONT>            int var6 = MathHelper.floor_double(par1AxisAlignedBB.minZ);<a name="line.2365"></a>
<FONT color="green">2366</FONT>            int var7 = MathHelper.floor_double(par1AxisAlignedBB.maxZ + 1.0D);<a name="line.2366"></a>
<FONT color="green">2367</FONT>    <a name="line.2367"></a>
<FONT color="green">2368</FONT>            if (par1AxisAlignedBB.minX &lt; 0.0D)<a name="line.2368"></a>
<FONT color="green">2369</FONT>            {<a name="line.2369"></a>
<FONT color="green">2370</FONT>                --var2;<a name="line.2370"></a>
<FONT color="green">2371</FONT>            }<a name="line.2371"></a>
<FONT color="green">2372</FONT>    <a name="line.2372"></a>
<FONT color="green">2373</FONT>            if (par1AxisAlignedBB.minY &lt; 0.0D)<a name="line.2373"></a>
<FONT color="green">2374</FONT>            {<a name="line.2374"></a>
<FONT color="green">2375</FONT>                --var4;<a name="line.2375"></a>
<FONT color="green">2376</FONT>            }<a name="line.2376"></a>
<FONT color="green">2377</FONT>    <a name="line.2377"></a>
<FONT color="green">2378</FONT>            if (par1AxisAlignedBB.minZ &lt; 0.0D)<a name="line.2378"></a>
<FONT color="green">2379</FONT>            {<a name="line.2379"></a>
<FONT color="green">2380</FONT>                --var6;<a name="line.2380"></a>
<FONT color="green">2381</FONT>            }<a name="line.2381"></a>
<FONT color="green">2382</FONT>    <a name="line.2382"></a>
<FONT color="green">2383</FONT>            for (int var8 = var2; var8 &lt; var3; ++var8)<a name="line.2383"></a>
<FONT color="green">2384</FONT>            {<a name="line.2384"></a>
<FONT color="green">2385</FONT>                for (int var9 = var4; var9 &lt; var5; ++var9)<a name="line.2385"></a>
<FONT color="green">2386</FONT>                {<a name="line.2386"></a>
<FONT color="green">2387</FONT>                    for (int var10 = var6; var10 &lt; var7; ++var10)<a name="line.2387"></a>
<FONT color="green">2388</FONT>                    {<a name="line.2388"></a>
<FONT color="green">2389</FONT>                        Block var11 = Block.blocksList[this.getBlockId(var8, var9, var10)];<a name="line.2389"></a>
<FONT color="green">2390</FONT>    <a name="line.2390"></a>
<FONT color="green">2391</FONT>                        if (var11 != null)<a name="line.2391"></a>
<FONT color="green">2392</FONT>                        {<a name="line.2392"></a>
<FONT color="green">2393</FONT>                            return true;<a name="line.2393"></a>
<FONT color="green">2394</FONT>                        }<a name="line.2394"></a>
<FONT color="green">2395</FONT>                    }<a name="line.2395"></a>
<FONT color="green">2396</FONT>                }<a name="line.2396"></a>
<FONT color="green">2397</FONT>            }<a name="line.2397"></a>
<FONT color="green">2398</FONT>    <a name="line.2398"></a>
<FONT color="green">2399</FONT>            return false;<a name="line.2399"></a>
<FONT color="green">2400</FONT>        }<a name="line.2400"></a>
<FONT color="green">2401</FONT>    <a name="line.2401"></a>
<FONT color="green">2402</FONT>        /**<a name="line.2402"></a>
<FONT color="green">2403</FONT>         * Returns if any of the blocks within the aabb are liquids. Args: aabb<a name="line.2403"></a>
<FONT color="green">2404</FONT>         */<a name="line.2404"></a>
<FONT color="green">2405</FONT>        public boolean isAnyLiquid(AxisAlignedBB par1AxisAlignedBB)<a name="line.2405"></a>
<FONT color="green">2406</FONT>        {<a name="line.2406"></a>
<FONT color="green">2407</FONT>            int var2 = MathHelper.floor_double(par1AxisAlignedBB.minX);<a name="line.2407"></a>
<FONT color="green">2408</FONT>            int var3 = MathHelper.floor_double(par1AxisAlignedBB.maxX + 1.0D);<a name="line.2408"></a>
<FONT color="green">2409</FONT>            int var4 = MathHelper.floor_double(par1AxisAlignedBB.minY);<a name="line.2409"></a>
<FONT color="green">2410</FONT>            int var5 = MathHelper.floor_double(par1AxisAlignedBB.maxY + 1.0D);<a name="line.2410"></a>
<FONT color="green">2411</FONT>            int var6 = MathHelper.floor_double(par1AxisAlignedBB.minZ);<a name="line.2411"></a>
<FONT color="green">2412</FONT>            int var7 = MathHelper.floor_double(par1AxisAlignedBB.maxZ + 1.0D);<a name="line.2412"></a>
<FONT color="green">2413</FONT>    <a name="line.2413"></a>
<FONT color="green">2414</FONT>            if (par1AxisAlignedBB.minX &lt; 0.0D)<a name="line.2414"></a>
<FONT color="green">2415</FONT>            {<a name="line.2415"></a>
<FONT color="green">2416</FONT>                --var2;<a name="line.2416"></a>
<FONT color="green">2417</FONT>            }<a name="line.2417"></a>
<FONT color="green">2418</FONT>    <a name="line.2418"></a>
<FONT color="green">2419</FONT>            if (par1AxisAlignedBB.minY &lt; 0.0D)<a name="line.2419"></a>
<FONT color="green">2420</FONT>            {<a name="line.2420"></a>
<FONT color="green">2421</FONT>                --var4;<a name="line.2421"></a>
<FONT color="green">2422</FONT>            }<a name="line.2422"></a>
<FONT color="green">2423</FONT>    <a name="line.2423"></a>
<FONT color="green">2424</FONT>            if (par1AxisAlignedBB.minZ &lt; 0.0D)<a name="line.2424"></a>
<FONT color="green">2425</FONT>            {<a name="line.2425"></a>
<FONT color="green">2426</FONT>                --var6;<a name="line.2426"></a>
<FONT color="green">2427</FONT>            }<a name="line.2427"></a>
<FONT color="green">2428</FONT>    <a name="line.2428"></a>
<FONT color="green">2429</FONT>            for (int var8 = var2; var8 &lt; var3; ++var8)<a name="line.2429"></a>
<FONT color="green">2430</FONT>            {<a name="line.2430"></a>
<FONT color="green">2431</FONT>                for (int var9 = var4; var9 &lt; var5; ++var9)<a name="line.2431"></a>
<FONT color="green">2432</FONT>                {<a name="line.2432"></a>
<FONT color="green">2433</FONT>                    for (int var10 = var6; var10 &lt; var7; ++var10)<a name="line.2433"></a>
<FONT color="green">2434</FONT>                    {<a name="line.2434"></a>
<FONT color="green">2435</FONT>                        Block var11 = Block.blocksList[this.getBlockId(var8, var9, var10)];<a name="line.2435"></a>
<FONT color="green">2436</FONT>    <a name="line.2436"></a>
<FONT color="green">2437</FONT>                        if (var11 != null &amp;&amp; var11.blockMaterial.isLiquid())<a name="line.2437"></a>
<FONT color="green">2438</FONT>                        {<a name="line.2438"></a>
<FONT color="green">2439</FONT>                            return true;<a name="line.2439"></a>
<FONT color="green">2440</FONT>                        }<a name="line.2440"></a>
<FONT color="green">2441</FONT>                    }<a name="line.2441"></a>
<FONT color="green">2442</FONT>                }<a name="line.2442"></a>
<FONT color="green">2443</FONT>            }<a name="line.2443"></a>
<FONT color="green">2444</FONT>    <a name="line.2444"></a>
<FONT color="green">2445</FONT>            return false;<a name="line.2445"></a>
<FONT color="green">2446</FONT>        }<a name="line.2446"></a>
<FONT color="green">2447</FONT>    <a name="line.2447"></a>
<FONT color="green">2448</FONT>        /**<a name="line.2448"></a>
<FONT color="green">2449</FONT>         * Returns whether or not the given bounding box is on fire or not<a name="line.2449"></a>
<FONT color="green">2450</FONT>         */<a name="line.2450"></a>
<FONT color="green">2451</FONT>        public boolean isBoundingBoxBurning(AxisAlignedBB par1AxisAlignedBB)<a name="line.2451"></a>
<FONT color="green">2452</FONT>        {<a name="line.2452"></a>
<FONT color="green">2453</FONT>            int var2 = MathHelper.floor_double(par1AxisAlignedBB.minX);<a name="line.2453"></a>
<FONT color="green">2454</FONT>            int var3 = MathHelper.floor_double(par1AxisAlignedBB.maxX + 1.0D);<a name="line.2454"></a>
<FONT color="green">2455</FONT>            int var4 = MathHelper.floor_double(par1AxisAlignedBB.minY);<a name="line.2455"></a>
<FONT color="green">2456</FONT>            int var5 = MathHelper.floor_double(par1AxisAlignedBB.maxY + 1.0D);<a name="line.2456"></a>
<FONT color="green">2457</FONT>            int var6 = MathHelper.floor_double(par1AxisAlignedBB.minZ);<a name="line.2457"></a>
<FONT color="green">2458</FONT>            int var7 = MathHelper.floor_double(par1AxisAlignedBB.maxZ + 1.0D);<a name="line.2458"></a>
<FONT color="green">2459</FONT>    <a name="line.2459"></a>
<FONT color="green">2460</FONT>            if (this.checkChunksExist(var2, var4, var6, var3, var5, var7))<a name="line.2460"></a>
<FONT color="green">2461</FONT>            {<a name="line.2461"></a>
<FONT color="green">2462</FONT>                for (int var8 = var2; var8 &lt; var3; ++var8)<a name="line.2462"></a>
<FONT color="green">2463</FONT>                {<a name="line.2463"></a>
<FONT color="green">2464</FONT>                    for (int var9 = var4; var9 &lt; var5; ++var9)<a name="line.2464"></a>
<FONT color="green">2465</FONT>                    {<a name="line.2465"></a>
<FONT color="green">2466</FONT>                        for (int var10 = var6; var10 &lt; var7; ++var10)<a name="line.2466"></a>
<FONT color="green">2467</FONT>                        {<a name="line.2467"></a>
<FONT color="green">2468</FONT>                            int var11 = this.getBlockId(var8, var9, var10);<a name="line.2468"></a>
<FONT color="green">2469</FONT>    <a name="line.2469"></a>
<FONT color="green">2470</FONT>                            if (var11 == Block.fire.blockID || var11 == Block.lavaMoving.blockID || var11 == Block.lavaStill.blockID)<a name="line.2470"></a>
<FONT color="green">2471</FONT>                            {<a name="line.2471"></a>
<FONT color="green">2472</FONT>                                return true;<a name="line.2472"></a>
<FONT color="green">2473</FONT>                            }<a name="line.2473"></a>
<FONT color="green">2474</FONT>                            else<a name="line.2474"></a>
<FONT color="green">2475</FONT>                            {<a name="line.2475"></a>
<FONT color="green">2476</FONT>                                Block block = Block.blocksList[var11];<a name="line.2476"></a>
<FONT color="green">2477</FONT>                                if (block != null &amp;&amp; block.isBlockBurning(this, var8, var9, var10))<a name="line.2477"></a>
<FONT color="green">2478</FONT>                                {<a name="line.2478"></a>
<FONT color="green">2479</FONT>                                    return true;<a name="line.2479"></a>
<FONT color="green">2480</FONT>                                }<a name="line.2480"></a>
<FONT color="green">2481</FONT>                            }<a name="line.2481"></a>
<FONT color="green">2482</FONT>                        }<a name="line.2482"></a>
<FONT color="green">2483</FONT>                    }<a name="line.2483"></a>
<FONT color="green">2484</FONT>                }<a name="line.2484"></a>
<FONT color="green">2485</FONT>            }<a name="line.2485"></a>
<FONT color="green">2486</FONT>    <a name="line.2486"></a>
<FONT color="green">2487</FONT>            return false;<a name="line.2487"></a>
<FONT color="green">2488</FONT>        }<a name="line.2488"></a>
<FONT color="green">2489</FONT>    <a name="line.2489"></a>
<FONT color="green">2490</FONT>        /**<a name="line.2490"></a>
<FONT color="green">2491</FONT>         * handles the acceleration of an object whilst in water. Not sure if it is used elsewhere.<a name="line.2491"></a>
<FONT color="green">2492</FONT>         */<a name="line.2492"></a>
<FONT color="green">2493</FONT>        public boolean handleMaterialAcceleration(AxisAlignedBB par1AxisAlignedBB, Material par2Material, Entity par3Entity)<a name="line.2493"></a>
<FONT color="green">2494</FONT>        {<a name="line.2494"></a>
<FONT color="green">2495</FONT>            int var4 = MathHelper.floor_double(par1AxisAlignedBB.minX);<a name="line.2495"></a>
<FONT color="green">2496</FONT>            int var5 = MathHelper.floor_double(par1AxisAlignedBB.maxX + 1.0D);<a name="line.2496"></a>
<FONT color="green">2497</FONT>            int var6 = MathHelper.floor_double(par1AxisAlignedBB.minY);<a name="line.2497"></a>
<FONT color="green">2498</FONT>            int var7 = MathHelper.floor_double(par1AxisAlignedBB.maxY + 1.0D);<a name="line.2498"></a>
<FONT color="green">2499</FONT>            int var8 = MathHelper.floor_double(par1AxisAlignedBB.minZ);<a name="line.2499"></a>
<FONT color="green">2500</FONT>            int var9 = MathHelper.floor_double(par1AxisAlignedBB.maxZ + 1.0D);<a name="line.2500"></a>
<FONT color="green">2501</FONT>    <a name="line.2501"></a>
<FONT color="green">2502</FONT>            if (!this.checkChunksExist(var4, var6, var8, var5, var7, var9))<a name="line.2502"></a>
<FONT color="green">2503</FONT>            {<a name="line.2503"></a>
<FONT color="green">2504</FONT>                return false;<a name="line.2504"></a>
<FONT color="green">2505</FONT>            }<a name="line.2505"></a>
<FONT color="green">2506</FONT>            else<a name="line.2506"></a>
<FONT color="green">2507</FONT>            {<a name="line.2507"></a>
<FONT color="green">2508</FONT>                boolean var10 = false;<a name="line.2508"></a>
<FONT color="green">2509</FONT>                Vec3 var11 = this.getWorldVec3Pool().getVecFromPool(0.0D, 0.0D, 0.0D);<a name="line.2509"></a>
<FONT color="green">2510</FONT>    <a name="line.2510"></a>
<FONT color="green">2511</FONT>                for (int var12 = var4; var12 &lt; var5; ++var12)<a name="line.2511"></a>
<FONT color="green">2512</FONT>                {<a name="line.2512"></a>
<FONT color="green">2513</FONT>                    for (int var13 = var6; var13 &lt; var7; ++var13)<a name="line.2513"></a>
<FONT color="green">2514</FONT>                    {<a name="line.2514"></a>
<FONT color="green">2515</FONT>                        for (int var14 = var8; var14 &lt; var9; ++var14)<a name="line.2515"></a>
<FONT color="green">2516</FONT>                        {<a name="line.2516"></a>
<FONT color="green">2517</FONT>                            Block var15 = Block.blocksList[this.getBlockId(var12, var13, var14)];<a name="line.2517"></a>
<FONT color="green">2518</FONT>    <a name="line.2518"></a>
<FONT color="green">2519</FONT>                            if (var15 != null &amp;&amp; var15.blockMaterial == par2Material)<a name="line.2519"></a>
<FONT color="green">2520</FONT>                            {<a name="line.2520"></a>
<FONT color="green">2521</FONT>                                double var16 = (double)((float)(var13 + 1) - BlockFluid.getFluidHeightPercent(this.getBlockMetadata(var12, var13, var14)));<a name="line.2521"></a>
<FONT color="green">2522</FONT>    <a name="line.2522"></a>
<FONT color="green">2523</FONT>                                if ((double)var7 &gt;= var16)<a name="line.2523"></a>
<FONT color="green">2524</FONT>                                {<a name="line.2524"></a>
<FONT color="green">2525</FONT>                                    var10 = true;<a name="line.2525"></a>
<FONT color="green">2526</FONT>                                    var15.velocityToAddToEntity(this, var12, var13, var14, par3Entity, var11);<a name="line.2526"></a>
<FONT color="green">2527</FONT>                                }<a name="line.2527"></a>
<FONT color="green">2528</FONT>                            }<a name="line.2528"></a>
<FONT color="green">2529</FONT>                        }<a name="line.2529"></a>
<FONT color="green">2530</FONT>                    }<a name="line.2530"></a>
<FONT color="green">2531</FONT>                }<a name="line.2531"></a>
<FONT color="green">2532</FONT>    <a name="line.2532"></a>
<FONT color="green">2533</FONT>                if (var11.lengthVector() &gt; 0.0D)<a name="line.2533"></a>
<FONT color="green">2534</FONT>                {<a name="line.2534"></a>
<FONT color="green">2535</FONT>                    var11 = var11.normalize();<a name="line.2535"></a>
<FONT color="green">2536</FONT>                    double var18 = 0.014D;<a name="line.2536"></a>
<FONT color="green">2537</FONT>                    par3Entity.motionX += var11.xCoord * var18;<a name="line.2537"></a>
<FONT color="green">2538</FONT>                    par3Entity.motionY += var11.yCoord * var18;<a name="line.2538"></a>
<FONT color="green">2539</FONT>                    par3Entity.motionZ += var11.zCoord * var18;<a name="line.2539"></a>
<FONT color="green">2540</FONT>                }<a name="line.2540"></a>
<FONT color="green">2541</FONT>    <a name="line.2541"></a>
<FONT color="green">2542</FONT>                return var10;<a name="line.2542"></a>
<FONT color="green">2543</FONT>            }<a name="line.2543"></a>
<FONT color="green">2544</FONT>        }<a name="line.2544"></a>
<FONT color="green">2545</FONT>    <a name="line.2545"></a>
<FONT color="green">2546</FONT>        /**<a name="line.2546"></a>
<FONT color="green">2547</FONT>         * Returns true if the given bounding box contains the given material<a name="line.2547"></a>
<FONT color="green">2548</FONT>         */<a name="line.2548"></a>
<FONT color="green">2549</FONT>        public boolean isMaterialInBB(AxisAlignedBB par1AxisAlignedBB, Material par2Material)<a name="line.2549"></a>
<FONT color="green">2550</FONT>        {<a name="line.2550"></a>
<FONT color="green">2551</FONT>            int var3 = MathHelper.floor_double(par1AxisAlignedBB.minX);<a name="line.2551"></a>
<FONT color="green">2552</FONT>            int var4 = MathHelper.floor_double(par1AxisAlignedBB.maxX + 1.0D);<a name="line.2552"></a>
<FONT color="green">2553</FONT>            int var5 = MathHelper.floor_double(par1AxisAlignedBB.minY);<a name="line.2553"></a>
<FONT color="green">2554</FONT>            int var6 = MathHelper.floor_double(par1AxisAlignedBB.maxY + 1.0D);<a name="line.2554"></a>
<FONT color="green">2555</FONT>            int var7 = MathHelper.floor_double(par1AxisAlignedBB.minZ);<a name="line.2555"></a>
<FONT color="green">2556</FONT>            int var8 = MathHelper.floor_double(par1AxisAlignedBB.maxZ + 1.0D);<a name="line.2556"></a>
<FONT color="green">2557</FONT>    <a name="line.2557"></a>
<FONT color="green">2558</FONT>            for (int var9 = var3; var9 &lt; var4; ++var9)<a name="line.2558"></a>
<FONT color="green">2559</FONT>            {<a name="line.2559"></a>
<FONT color="green">2560</FONT>                for (int var10 = var5; var10 &lt; var6; ++var10)<a name="line.2560"></a>
<FONT color="green">2561</FONT>                {<a name="line.2561"></a>
<FONT color="green">2562</FONT>                    for (int var11 = var7; var11 &lt; var8; ++var11)<a name="line.2562"></a>
<FONT color="green">2563</FONT>                    {<a name="line.2563"></a>
<FONT color="green">2564</FONT>                        Block var12 = Block.blocksList[this.getBlockId(var9, var10, var11)];<a name="line.2564"></a>
<FONT color="green">2565</FONT>    <a name="line.2565"></a>
<FONT color="green">2566</FONT>                        if (var12 != null &amp;&amp; var12.blockMaterial == par2Material)<a name="line.2566"></a>
<FONT color="green">2567</FONT>                        {<a name="line.2567"></a>
<FONT color="green">2568</FONT>                            return true;<a name="line.2568"></a>
<FONT color="green">2569</FONT>                        }<a name="line.2569"></a>
<FONT color="green">2570</FONT>                    }<a name="line.2570"></a>
<FONT color="green">2571</FONT>                }<a name="line.2571"></a>
<FONT color="green">2572</FONT>            }<a name="line.2572"></a>
<FONT color="green">2573</FONT>    <a name="line.2573"></a>
<FONT color="green">2574</FONT>            return false;<a name="line.2574"></a>
<FONT color="green">2575</FONT>        }<a name="line.2575"></a>
<FONT color="green">2576</FONT>    <a name="line.2576"></a>
<FONT color="green">2577</FONT>        /**<a name="line.2577"></a>
<FONT color="green">2578</FONT>         * checks if the given AABB is in the material given. Used while swimming.<a name="line.2578"></a>
<FONT color="green">2579</FONT>         */<a name="line.2579"></a>
<FONT color="green">2580</FONT>        public boolean isAABBInMaterial(AxisAlignedBB par1AxisAlignedBB, Material par2Material)<a name="line.2580"></a>
<FONT color="green">2581</FONT>        {<a name="line.2581"></a>
<FONT color="green">2582</FONT>            int var3 = MathHelper.floor_double(par1AxisAlignedBB.minX);<a name="line.2582"></a>
<FONT color="green">2583</FONT>            int var4 = MathHelper.floor_double(par1AxisAlignedBB.maxX + 1.0D);<a name="line.2583"></a>
<FONT color="green">2584</FONT>            int var5 = MathHelper.floor_double(par1AxisAlignedBB.minY);<a name="line.2584"></a>
<FONT color="green">2585</FONT>            int var6 = MathHelper.floor_double(par1AxisAlignedBB.maxY + 1.0D);<a name="line.2585"></a>
<FONT color="green">2586</FONT>            int var7 = MathHelper.floor_double(par1AxisAlignedBB.minZ);<a name="line.2586"></a>
<FONT color="green">2587</FONT>            int var8 = MathHelper.floor_double(par1AxisAlignedBB.maxZ + 1.0D);<a name="line.2587"></a>
<FONT color="green">2588</FONT>    <a name="line.2588"></a>
<FONT color="green">2589</FONT>            for (int var9 = var3; var9 &lt; var4; ++var9)<a name="line.2589"></a>
<FONT color="green">2590</FONT>            {<a name="line.2590"></a>
<FONT color="green">2591</FONT>                for (int var10 = var5; var10 &lt; var6; ++var10)<a name="line.2591"></a>
<FONT color="green">2592</FONT>                {<a name="line.2592"></a>
<FONT color="green">2593</FONT>                    for (int var11 = var7; var11 &lt; var8; ++var11)<a name="line.2593"></a>
<FONT color="green">2594</FONT>                    {<a name="line.2594"></a>
<FONT color="green">2595</FONT>                        Block var12 = Block.blocksList[this.getBlockId(var9, var10, var11)];<a name="line.2595"></a>
<FONT color="green">2596</FONT>    <a name="line.2596"></a>
<FONT color="green">2597</FONT>                        if (var12 != null &amp;&amp; var12.blockMaterial == par2Material)<a name="line.2597"></a>
<FONT color="green">2598</FONT>                        {<a name="line.2598"></a>
<FONT color="green">2599</FONT>                            int var13 = this.getBlockMetadata(var9, var10, var11);<a name="line.2599"></a>
<FONT color="green">2600</FONT>                            double var14 = (double)(var10 + 1);<a name="line.2600"></a>
<FONT color="green">2601</FONT>    <a name="line.2601"></a>
<FONT color="green">2602</FONT>                            if (var13 &lt; 8)<a name="line.2602"></a>
<FONT color="green">2603</FONT>                            {<a name="line.2603"></a>
<FONT color="green">2604</FONT>                                var14 = (double)(var10 + 1) - (double)var13 / 8.0D;<a name="line.2604"></a>
<FONT color="green">2605</FONT>                            }<a name="line.2605"></a>
<FONT color="green">2606</FONT>    <a name="line.2606"></a>
<FONT color="green">2607</FONT>                            if (var14 &gt;= par1AxisAlignedBB.minY)<a name="line.2607"></a>
<FONT color="green">2608</FONT>                            {<a name="line.2608"></a>
<FONT color="green">2609</FONT>                                return true;<a name="line.2609"></a>
<FONT color="green">2610</FONT>                            }<a name="line.2610"></a>
<FONT color="green">2611</FONT>                        }<a name="line.2611"></a>
<FONT color="green">2612</FONT>                    }<a name="line.2612"></a>
<FONT color="green">2613</FONT>                }<a name="line.2613"></a>
<FONT color="green">2614</FONT>            }<a name="line.2614"></a>
<FONT color="green">2615</FONT>    <a name="line.2615"></a>
<FONT color="green">2616</FONT>            return false;<a name="line.2616"></a>
<FONT color="green">2617</FONT>        }<a name="line.2617"></a>
<FONT color="green">2618</FONT>    <a name="line.2618"></a>
<FONT color="green">2619</FONT>        /**<a name="line.2619"></a>
<FONT color="green">2620</FONT>         * Creates an explosion. Args: entity, x, y, z, strength<a name="line.2620"></a>
<FONT color="green">2621</FONT>         */<a name="line.2621"></a>
<FONT color="green">2622</FONT>        public Explosion createExplosion(Entity par1Entity, double par2, double par4, double par6, float par8, boolean par9)<a name="line.2622"></a>
<FONT color="green">2623</FONT>        {<a name="line.2623"></a>
<FONT color="green">2624</FONT>            return this.newExplosion(par1Entity, par2, par4, par6, par8, false, par9);<a name="line.2624"></a>
<FONT color="green">2625</FONT>        }<a name="line.2625"></a>
<FONT color="green">2626</FONT>    <a name="line.2626"></a>
<FONT color="green">2627</FONT>        /**<a name="line.2627"></a>
<FONT color="green">2628</FONT>         * returns a new explosion. Does initiation (at time of writing Explosion is not finished)<a name="line.2628"></a>
<FONT color="green">2629</FONT>         */<a name="line.2629"></a>
<FONT color="green">2630</FONT>        public Explosion newExplosion(Entity par1Entity, double par2, double par4, double par6, float par8, boolean par9, boolean par10)<a name="line.2630"></a>
<FONT color="green">2631</FONT>        {<a name="line.2631"></a>
<FONT color="green">2632</FONT>            Explosion var11 = new Explosion(this, par1Entity, par2, par4, par6, par8);<a name="line.2632"></a>
<FONT color="green">2633</FONT>            var11.isFlaming = par9;<a name="line.2633"></a>
<FONT color="green">2634</FONT>            var11.isSmoking = par10;<a name="line.2634"></a>
<FONT color="green">2635</FONT>            var11.doExplosionA();<a name="line.2635"></a>
<FONT color="green">2636</FONT>            var11.doExplosionB(true);<a name="line.2636"></a>
<FONT color="green">2637</FONT>            return var11;<a name="line.2637"></a>
<FONT color="green">2638</FONT>        }<a name="line.2638"></a>
<FONT color="green">2639</FONT>    <a name="line.2639"></a>
<FONT color="green">2640</FONT>        /**<a name="line.2640"></a>
<FONT color="green">2641</FONT>         * Gets the percentage of real blocks within within a bounding box, along a specified vector.<a name="line.2641"></a>
<FONT color="green">2642</FONT>         */<a name="line.2642"></a>
<FONT color="green">2643</FONT>        public float getBlockDensity(Vec3 par1Vec3, AxisAlignedBB par2AxisAlignedBB)<a name="line.2643"></a>
<FONT color="green">2644</FONT>        {<a name="line.2644"></a>
<FONT color="green">2645</FONT>            double var3 = 1.0D / ((par2AxisAlignedBB.maxX - par2AxisAlignedBB.minX) * 2.0D + 1.0D);<a name="line.2645"></a>
<FONT color="green">2646</FONT>            double var5 = 1.0D / ((par2AxisAlignedBB.maxY - par2AxisAlignedBB.minY) * 2.0D + 1.0D);<a name="line.2646"></a>
<FONT color="green">2647</FONT>            double var7 = 1.0D / ((par2AxisAlignedBB.maxZ - par2AxisAlignedBB.minZ) * 2.0D + 1.0D);<a name="line.2647"></a>
<FONT color="green">2648</FONT>            int var9 = 0;<a name="line.2648"></a>
<FONT color="green">2649</FONT>            int var10 = 0;<a name="line.2649"></a>
<FONT color="green">2650</FONT>    <a name="line.2650"></a>
<FONT color="green">2651</FONT>            for (float var11 = 0.0F; var11 &lt;= 1.0F; var11 = (float)((double)var11 + var3))<a name="line.2651"></a>
<FONT color="green">2652</FONT>            {<a name="line.2652"></a>
<FONT color="green">2653</FONT>                for (float var12 = 0.0F; var12 &lt;= 1.0F; var12 = (float)((double)var12 + var5))<a name="line.2653"></a>
<FONT color="green">2654</FONT>                {<a name="line.2654"></a>
<FONT color="green">2655</FONT>                    for (float var13 = 0.0F; var13 &lt;= 1.0F; var13 = (float)((double)var13 + var7))<a name="line.2655"></a>
<FONT color="green">2656</FONT>                    {<a name="line.2656"></a>
<FONT color="green">2657</FONT>                        double var14 = par2AxisAlignedBB.minX + (par2AxisAlignedBB.maxX - par2AxisAlignedBB.minX) * (double)var11;<a name="line.2657"></a>
<FONT color="green">2658</FONT>                        double var16 = par2AxisAlignedBB.minY + (par2AxisAlignedBB.maxY - par2AxisAlignedBB.minY) * (double)var12;<a name="line.2658"></a>
<FONT color="green">2659</FONT>                        double var18 = par2AxisAlignedBB.minZ + (par2AxisAlignedBB.maxZ - par2AxisAlignedBB.minZ) * (double)var13;<a name="line.2659"></a>
<FONT color="green">2660</FONT>    <a name="line.2660"></a>
<FONT color="green">2661</FONT>                        if (this.rayTraceBlocks(this.getWorldVec3Pool().getVecFromPool(var14, var16, var18), par1Vec3) == null)<a name="line.2661"></a>
<FONT color="green">2662</FONT>                        {<a name="line.2662"></a>
<FONT color="green">2663</FONT>                            ++var9;<a name="line.2663"></a>
<FONT color="green">2664</FONT>                        }<a name="line.2664"></a>
<FONT color="green">2665</FONT>    <a name="line.2665"></a>
<FONT color="green">2666</FONT>                        ++var10;<a name="line.2666"></a>
<FONT color="green">2667</FONT>                    }<a name="line.2667"></a>
<FONT color="green">2668</FONT>                }<a name="line.2668"></a>
<FONT color="green">2669</FONT>            }<a name="line.2669"></a>
<FONT color="green">2670</FONT>    <a name="line.2670"></a>
<FONT color="green">2671</FONT>            return (float)var9 / (float)var10;<a name="line.2671"></a>
<FONT color="green">2672</FONT>        }<a name="line.2672"></a>
<FONT color="green">2673</FONT>    <a name="line.2673"></a>
<FONT color="green">2674</FONT>        /**<a name="line.2674"></a>
<FONT color="green">2675</FONT>         * If the block in the given direction of the given coordinate is fire, extinguish it. Args: Player, X,Y,Z,<a name="line.2675"></a>
<FONT color="green">2676</FONT>         * blockDirection<a name="line.2676"></a>
<FONT color="green">2677</FONT>         */<a name="line.2677"></a>
<FONT color="green">2678</FONT>        public boolean extinguishFire(EntityPlayer par1EntityPlayer, int par2, int par3, int par4, int par5)<a name="line.2678"></a>
<FONT color="green">2679</FONT>        {<a name="line.2679"></a>
<FONT color="green">2680</FONT>            if (par5 == 0)<a name="line.2680"></a>
<FONT color="green">2681</FONT>            {<a name="line.2681"></a>
<FONT color="green">2682</FONT>                --par3;<a name="line.2682"></a>
<FONT color="green">2683</FONT>            }<a name="line.2683"></a>
<FONT color="green">2684</FONT>    <a name="line.2684"></a>
<FONT color="green">2685</FONT>            if (par5 == 1)<a name="line.2685"></a>
<FONT color="green">2686</FONT>            {<a name="line.2686"></a>
<FONT color="green">2687</FONT>                ++par3;<a name="line.2687"></a>
<FONT color="green">2688</FONT>            }<a name="line.2688"></a>
<FONT color="green">2689</FONT>    <a name="line.2689"></a>
<FONT color="green">2690</FONT>            if (par5 == 2)<a name="line.2690"></a>
<FONT color="green">2691</FONT>            {<a name="line.2691"></a>
<FONT color="green">2692</FONT>                --par4;<a name="line.2692"></a>
<FONT color="green">2693</FONT>            }<a name="line.2693"></a>
<FONT color="green">2694</FONT>    <a name="line.2694"></a>
<FONT color="green">2695</FONT>            if (par5 == 3)<a name="line.2695"></a>
<FONT color="green">2696</FONT>            {<a name="line.2696"></a>
<FONT color="green">2697</FONT>                ++par4;<a name="line.2697"></a>
<FONT color="green">2698</FONT>            }<a name="line.2698"></a>
<FONT color="green">2699</FONT>    <a name="line.2699"></a>
<FONT color="green">2700</FONT>            if (par5 == 4)<a name="line.2700"></a>
<FONT color="green">2701</FONT>            {<a name="line.2701"></a>
<FONT color="green">2702</FONT>                --par2;<a name="line.2702"></a>
<FONT color="green">2703</FONT>            }<a name="line.2703"></a>
<FONT color="green">2704</FONT>    <a name="line.2704"></a>
<FONT color="green">2705</FONT>            if (par5 == 5)<a name="line.2705"></a>
<FONT color="green">2706</FONT>            {<a name="line.2706"></a>
<FONT color="green">2707</FONT>                ++par2;<a name="line.2707"></a>
<FONT color="green">2708</FONT>            }<a name="line.2708"></a>
<FONT color="green">2709</FONT>    <a name="line.2709"></a>
<FONT color="green">2710</FONT>            if (this.getBlockId(par2, par3, par4) == Block.fire.blockID)<a name="line.2710"></a>
<FONT color="green">2711</FONT>            {<a name="line.2711"></a>
<FONT color="green">2712</FONT>                this.playAuxSFXAtEntity(par1EntityPlayer, 1004, par2, par3, par4, 0);<a name="line.2712"></a>
<FONT color="green">2713</FONT>                this.setBlockWithNotify(par2, par3, par4, 0);<a name="line.2713"></a>
<FONT color="green">2714</FONT>                return true;<a name="line.2714"></a>
<FONT color="green">2715</FONT>            }<a name="line.2715"></a>
<FONT color="green">2716</FONT>            else<a name="line.2716"></a>
<FONT color="green">2717</FONT>            {<a name="line.2717"></a>
<FONT color="green">2718</FONT>                return false;<a name="line.2718"></a>
<FONT color="green">2719</FONT>            }<a name="line.2719"></a>
<FONT color="green">2720</FONT>        }<a name="line.2720"></a>
<FONT color="green">2721</FONT>    <a name="line.2721"></a>
<FONT color="green">2722</FONT>        @SideOnly(Side.CLIENT)<a name="line.2722"></a>
<FONT color="green">2723</FONT>    <a name="line.2723"></a>
<FONT color="green">2724</FONT>        /**<a name="line.2724"></a>
<FONT color="green">2725</FONT>         * This string is 'All: (number of loaded entities)' Viewable by press ing F3<a name="line.2725"></a>
<FONT color="green">2726</FONT>         */<a name="line.2726"></a>
<FONT color="green">2727</FONT>        public String getDebugLoadedEntities()<a name="line.2727"></a>
<FONT color="green">2728</FONT>        {<a name="line.2728"></a>
<FONT color="green">2729</FONT>            return "All: " + this.loadedEntityList.size();<a name="line.2729"></a>
<FONT color="green">2730</FONT>        }<a name="line.2730"></a>
<FONT color="green">2731</FONT>    <a name="line.2731"></a>
<FONT color="green">2732</FONT>        @SideOnly(Side.CLIENT)<a name="line.2732"></a>
<FONT color="green">2733</FONT>    <a name="line.2733"></a>
<FONT color="green">2734</FONT>        /**<a name="line.2734"></a>
<FONT color="green">2735</FONT>         * Returns the name of the current chunk provider, by calling chunkprovider.makeString()<a name="line.2735"></a>
<FONT color="green">2736</FONT>         */<a name="line.2736"></a>
<FONT color="green">2737</FONT>        public String getProviderName()<a name="line.2737"></a>
<FONT color="green">2738</FONT>        {<a name="line.2738"></a>
<FONT color="green">2739</FONT>            return this.chunkProvider.makeString();<a name="line.2739"></a>
<FONT color="green">2740</FONT>        }<a name="line.2740"></a>
<FONT color="green">2741</FONT>    <a name="line.2741"></a>
<FONT color="green">2742</FONT>        /**<a name="line.2742"></a>
<FONT color="green">2743</FONT>         * Returns the TileEntity associated with a given block in X,Y,Z coordinates, or null if no TileEntity exists<a name="line.2743"></a>
<FONT color="green">2744</FONT>         */<a name="line.2744"></a>
<FONT color="green">2745</FONT>        public TileEntity getBlockTileEntity(int par1, int par2, int par3)<a name="line.2745"></a>
<FONT color="green">2746</FONT>        {<a name="line.2746"></a>
<FONT color="green">2747</FONT>            if (par2 &gt;= 256)<a name="line.2747"></a>
<FONT color="green">2748</FONT>            {<a name="line.2748"></a>
<FONT color="green">2749</FONT>                return null;<a name="line.2749"></a>
<FONT color="green">2750</FONT>            }<a name="line.2750"></a>
<FONT color="green">2751</FONT>            else<a name="line.2751"></a>
<FONT color="green">2752</FONT>            {<a name="line.2752"></a>
<FONT color="green">2753</FONT>                Chunk var4 = this.getChunkFromChunkCoords(par1 &gt;&gt; 4, par3 &gt;&gt; 4);<a name="line.2753"></a>
<FONT color="green">2754</FONT>    <a name="line.2754"></a>
<FONT color="green">2755</FONT>                if (var4 == null)<a name="line.2755"></a>
<FONT color="green">2756</FONT>                {<a name="line.2756"></a>
<FONT color="green">2757</FONT>                    return null;<a name="line.2757"></a>
<FONT color="green">2758</FONT>                }<a name="line.2758"></a>
<FONT color="green">2759</FONT>                else<a name="line.2759"></a>
<FONT color="green">2760</FONT>                {<a name="line.2760"></a>
<FONT color="green">2761</FONT>                    TileEntity var5 = var4.getChunkBlockTileEntity(par1 &amp; 15, par2, par3 &amp; 15);<a name="line.2761"></a>
<FONT color="green">2762</FONT>    <a name="line.2762"></a>
<FONT color="green">2763</FONT>                    if (var5 == null)<a name="line.2763"></a>
<FONT color="green">2764</FONT>                    {<a name="line.2764"></a>
<FONT color="green">2765</FONT>                        for (int var6 = 0; var6 &lt; this.addedTileEntityList.size(); ++var6)<a name="line.2765"></a>
<FONT color="green">2766</FONT>                        {<a name="line.2766"></a>
<FONT color="green">2767</FONT>                            TileEntity var7 = (TileEntity)this.addedTileEntityList.get(var6);<a name="line.2767"></a>
<FONT color="green">2768</FONT>    <a name="line.2768"></a>
<FONT color="green">2769</FONT>                            if (!var7.isInvalid() &amp;&amp; var7.xCoord == par1 &amp;&amp; var7.yCoord == par2 &amp;&amp; var7.zCoord == par3)<a name="line.2769"></a>
<FONT color="green">2770</FONT>                            {<a name="line.2770"></a>
<FONT color="green">2771</FONT>                                var5 = var7;<a name="line.2771"></a>
<FONT color="green">2772</FONT>                                break;<a name="line.2772"></a>
<FONT color="green">2773</FONT>                            }<a name="line.2773"></a>
<FONT color="green">2774</FONT>                        }<a name="line.2774"></a>
<FONT color="green">2775</FONT>                    }<a name="line.2775"></a>
<FONT color="green">2776</FONT>    <a name="line.2776"></a>
<FONT color="green">2777</FONT>                    return var5;<a name="line.2777"></a>
<FONT color="green">2778</FONT>                }<a name="line.2778"></a>
<FONT color="green">2779</FONT>            }<a name="line.2779"></a>
<FONT color="green">2780</FONT>        }<a name="line.2780"></a>
<FONT color="green">2781</FONT>    <a name="line.2781"></a>
<FONT color="green">2782</FONT>        /**<a name="line.2782"></a>
<FONT color="green">2783</FONT>         * Sets the TileEntity for a given block in X, Y, Z coordinates<a name="line.2783"></a>
<FONT color="green">2784</FONT>         */<a name="line.2784"></a>
<FONT color="green">2785</FONT>        public void setBlockTileEntity(int par1, int par2, int par3, TileEntity par4TileEntity)<a name="line.2785"></a>
<FONT color="green">2786</FONT>        {<a name="line.2786"></a>
<FONT color="green">2787</FONT>            if (par4TileEntity == null || par4TileEntity.isInvalid())<a name="line.2787"></a>
<FONT color="green">2788</FONT>            {<a name="line.2788"></a>
<FONT color="green">2789</FONT>                return;<a name="line.2789"></a>
<FONT color="green">2790</FONT>            }<a name="line.2790"></a>
<FONT color="green">2791</FONT>    <a name="line.2791"></a>
<FONT color="green">2792</FONT>            if (par4TileEntity.canUpdate())<a name="line.2792"></a>
<FONT color="green">2793</FONT>            {<a name="line.2793"></a>
<FONT color="green">2794</FONT>                List dest = scanningTileEntities ? addedTileEntityList : loadedTileEntityList;<a name="line.2794"></a>
<FONT color="green">2795</FONT>                dest.add(par4TileEntity);<a name="line.2795"></a>
<FONT color="green">2796</FONT>            }<a name="line.2796"></a>
<FONT color="green">2797</FONT>    <a name="line.2797"></a>
<FONT color="green">2798</FONT>            Chunk chunk = getChunkFromChunkCoords(par1 &gt;&gt; 4, par3 &gt;&gt; 4);<a name="line.2798"></a>
<FONT color="green">2799</FONT>            if (chunk != null)<a name="line.2799"></a>
<FONT color="green">2800</FONT>            {<a name="line.2800"></a>
<FONT color="green">2801</FONT>                chunk.setChunkBlockTileEntity(par1 &amp; 15, par2, par3 &amp; 15, par4TileEntity);<a name="line.2801"></a>
<FONT color="green">2802</FONT>            }<a name="line.2802"></a>
<FONT color="green">2803</FONT>        }<a name="line.2803"></a>
<FONT color="green">2804</FONT>    <a name="line.2804"></a>
<FONT color="green">2805</FONT>        /**<a name="line.2805"></a>
<FONT color="green">2806</FONT>         * Removes the TileEntity for a given block in X,Y,Z coordinates<a name="line.2806"></a>
<FONT color="green">2807</FONT>         */<a name="line.2807"></a>
<FONT color="green">2808</FONT>        public void removeBlockTileEntity(int par1, int par2, int par3)<a name="line.2808"></a>
<FONT color="green">2809</FONT>        {<a name="line.2809"></a>
<FONT color="green">2810</FONT>            Chunk chunk = getChunkFromChunkCoords(par1 &gt;&gt; 4, par3 &gt;&gt; 4);<a name="line.2810"></a>
<FONT color="green">2811</FONT>            if (chunk != null)<a name="line.2811"></a>
<FONT color="green">2812</FONT>            {<a name="line.2812"></a>
<FONT color="green">2813</FONT>                chunk.removeChunkBlockTileEntity(par1 &amp; 15, par2, par3 &amp; 15);<a name="line.2813"></a>
<FONT color="green">2814</FONT>            }<a name="line.2814"></a>
<FONT color="green">2815</FONT>        }<a name="line.2815"></a>
<FONT color="green">2816</FONT>    <a name="line.2816"></a>
<FONT color="green">2817</FONT>        /**<a name="line.2817"></a>
<FONT color="green">2818</FONT>         * adds tile entity to despawn list (renamed from markEntityForDespawn)<a name="line.2818"></a>
<FONT color="green">2819</FONT>         */<a name="line.2819"></a>
<FONT color="green">2820</FONT>        public void markTileEntityForDespawn(TileEntity par1TileEntity)<a name="line.2820"></a>
<FONT color="green">2821</FONT>        {<a name="line.2821"></a>
<FONT color="green">2822</FONT>            this.entityRemoval.add(par1TileEntity);<a name="line.2822"></a>
<FONT color="green">2823</FONT>        }<a name="line.2823"></a>
<FONT color="green">2824</FONT>    <a name="line.2824"></a>
<FONT color="green">2825</FONT>        /**<a name="line.2825"></a>
<FONT color="green">2826</FONT>         * Returns true if the block at the specified coordinates is an opaque cube. Args: x, y, z<a name="line.2826"></a>
<FONT color="green">2827</FONT>         */<a name="line.2827"></a>
<FONT color="green">2828</FONT>        public boolean isBlockOpaqueCube(int par1, int par2, int par3)<a name="line.2828"></a>
<FONT color="green">2829</FONT>        {<a name="line.2829"></a>
<FONT color="green">2830</FONT>            Block var4 = Block.blocksList[this.getBlockId(par1, par2, par3)];<a name="line.2830"></a>
<FONT color="green">2831</FONT>            return var4 == null ? false : var4.isOpaqueCube();<a name="line.2831"></a>
<FONT color="green">2832</FONT>        }<a name="line.2832"></a>
<FONT color="green">2833</FONT>    <a name="line.2833"></a>
<FONT color="green">2834</FONT>        /**<a name="line.2834"></a>
<FONT color="green">2835</FONT>         * Indicate if a material is a normal solid opaque cube.<a name="line.2835"></a>
<FONT color="green">2836</FONT>         */<a name="line.2836"></a>
<FONT color="green">2837</FONT>        public boolean isBlockNormalCube(int par1, int par2, int par3)<a name="line.2837"></a>
<FONT color="green">2838</FONT>        {<a name="line.2838"></a>
<FONT color="green">2839</FONT>            Block block = Block.blocksList[getBlockId(par1, par2, par3)];<a name="line.2839"></a>
<FONT color="green">2840</FONT>            return block != null &amp;&amp; block.isBlockNormalCube(this, par1, par2, par3);<a name="line.2840"></a>
<FONT color="green">2841</FONT>        }<a name="line.2841"></a>
<FONT color="green">2842</FONT>    <a name="line.2842"></a>
<FONT color="green">2843</FONT>        public boolean func_85174_u(int par1, int par2, int par3)<a name="line.2843"></a>
<FONT color="green">2844</FONT>        {<a name="line.2844"></a>
<FONT color="green">2845</FONT>            int var4 = this.getBlockId(par1, par2, par3);<a name="line.2845"></a>
<FONT color="green">2846</FONT>    <a name="line.2846"></a>
<FONT color="green">2847</FONT>            if (var4 != 0 &amp;&amp; Block.blocksList[var4] != null)<a name="line.2847"></a>
<FONT color="green">2848</FONT>            {<a name="line.2848"></a>
<FONT color="green">2849</FONT>                AxisAlignedBB var5 = Block.blocksList[var4].getCollisionBoundingBoxFromPool(this, par1, par2, par3);<a name="line.2849"></a>
<FONT color="green">2850</FONT>                return var5 != null &amp;&amp; var5.getAverageEdgeLength() &gt;= 1.0D;<a name="line.2850"></a>
<FONT color="green">2851</FONT>            }<a name="line.2851"></a>
<FONT color="green">2852</FONT>            else<a name="line.2852"></a>
<FONT color="green">2853</FONT>            {<a name="line.2853"></a>
<FONT color="green">2854</FONT>                return false;<a name="line.2854"></a>
<FONT color="green">2855</FONT>            }<a name="line.2855"></a>
<FONT color="green">2856</FONT>        }<a name="line.2856"></a>
<FONT color="green">2857</FONT>    <a name="line.2857"></a>
<FONT color="green">2858</FONT>        /**<a name="line.2858"></a>
<FONT color="green">2859</FONT>         * Returns true if the block at the given coordinate has a solid (buildable) top surface.<a name="line.2859"></a>
<FONT color="green">2860</FONT>         */<a name="line.2860"></a>
<FONT color="green">2861</FONT>        public boolean doesBlockHaveSolidTopSurface(int par1, int par2, int par3)<a name="line.2861"></a>
<FONT color="green">2862</FONT>        {<a name="line.2862"></a>
<FONT color="green">2863</FONT>            return isBlockSolidOnSide(par1, par2, par3, ForgeDirection.UP);<a name="line.2863"></a>
<FONT color="green">2864</FONT>        }<a name="line.2864"></a>
<FONT color="green">2865</FONT>    <a name="line.2865"></a>
<FONT color="green">2866</FONT>        /**<a name="line.2866"></a>
<FONT color="green">2867</FONT>         * Checks if the block is a solid, normal cube. If the chunk does not exist, or is not loaded, it returns the<a name="line.2867"></a>
<FONT color="green">2868</FONT>         * boolean parameter.<a name="line.2868"></a>
<FONT color="green">2869</FONT>         */<a name="line.2869"></a>
<FONT color="green">2870</FONT>        public boolean isBlockNormalCubeDefault(int par1, int par2, int par3, boolean par4)<a name="line.2870"></a>
<FONT color="green">2871</FONT>        {<a name="line.2871"></a>
<FONT color="green">2872</FONT>            if (par1 &gt;= -30000000 &amp;&amp; par3 &gt;= -30000000 &amp;&amp; par1 &lt; 30000000 &amp;&amp; par3 &lt; 30000000)<a name="line.2872"></a>
<FONT color="green">2873</FONT>            {<a name="line.2873"></a>
<FONT color="green">2874</FONT>                Chunk var5 = this.chunkProvider.provideChunk(par1 &gt;&gt; 4, par3 &gt;&gt; 4);<a name="line.2874"></a>
<FONT color="green">2875</FONT>    <a name="line.2875"></a>
<FONT color="green">2876</FONT>                if (var5 != null &amp;&amp; !var5.isEmpty())<a name="line.2876"></a>
<FONT color="green">2877</FONT>                {<a name="line.2877"></a>
<FONT color="green">2878</FONT>                    Block var6 = Block.blocksList[this.getBlockId(par1, par2, par3)];<a name="line.2878"></a>
<FONT color="green">2879</FONT>                    return var6 == null ? false : isBlockNormalCube(par1, par2, par3);<a name="line.2879"></a>
<FONT color="green">2880</FONT>                }<a name="line.2880"></a>
<FONT color="green">2881</FONT>                else<a name="line.2881"></a>
<FONT color="green">2882</FONT>                {<a name="line.2882"></a>
<FONT color="green">2883</FONT>                    return par4;<a name="line.2883"></a>
<FONT color="green">2884</FONT>                }<a name="line.2884"></a>
<FONT color="green">2885</FONT>            }<a name="line.2885"></a>
<FONT color="green">2886</FONT>            else<a name="line.2886"></a>
<FONT color="green">2887</FONT>            {<a name="line.2887"></a>
<FONT color="green">2888</FONT>                return par4;<a name="line.2888"></a>
<FONT color="green">2889</FONT>            }<a name="line.2889"></a>
<FONT color="green">2890</FONT>        }<a name="line.2890"></a>
<FONT color="green">2891</FONT>    <a name="line.2891"></a>
<FONT color="green">2892</FONT>        /**<a name="line.2892"></a>
<FONT color="green">2893</FONT>         * Called on construction of the World class to setup the initial skylight values<a name="line.2893"></a>
<FONT color="green">2894</FONT>         */<a name="line.2894"></a>
<FONT color="green">2895</FONT>        public void calculateInitialSkylight()<a name="line.2895"></a>
<FONT color="green">2896</FONT>        {<a name="line.2896"></a>
<FONT color="green">2897</FONT>            int var1 = this.calculateSkylightSubtracted(1.0F);<a name="line.2897"></a>
<FONT color="green">2898</FONT>    <a name="line.2898"></a>
<FONT color="green">2899</FONT>            if (var1 != this.skylightSubtracted)<a name="line.2899"></a>
<FONT color="green">2900</FONT>            {<a name="line.2900"></a>
<FONT color="green">2901</FONT>                this.skylightSubtracted = var1;<a name="line.2901"></a>
<FONT color="green">2902</FONT>            }<a name="line.2902"></a>
<FONT color="green">2903</FONT>        }<a name="line.2903"></a>
<FONT color="green">2904</FONT>    <a name="line.2904"></a>
<FONT color="green">2905</FONT>        /**<a name="line.2905"></a>
<FONT color="green">2906</FONT>         * Set which types of mobs are allowed to spawn (peaceful vs hostile).<a name="line.2906"></a>
<FONT color="green">2907</FONT>         */<a name="line.2907"></a>
<FONT color="green">2908</FONT>        public void setAllowedSpawnTypes(boolean par1, boolean par2)<a name="line.2908"></a>
<FONT color="green">2909</FONT>        {<a name="line.2909"></a>
<FONT color="green">2910</FONT>            provider.setAllowedSpawnTypes(par1, par2);<a name="line.2910"></a>
<FONT color="green">2911</FONT>        }<a name="line.2911"></a>
<FONT color="green">2912</FONT>    <a name="line.2912"></a>
<FONT color="green">2913</FONT>        /**<a name="line.2913"></a>
<FONT color="green">2914</FONT>         * Runs a single tick for the world<a name="line.2914"></a>
<FONT color="green">2915</FONT>         */<a name="line.2915"></a>
<FONT color="green">2916</FONT>        public void tick()<a name="line.2916"></a>
<FONT color="green">2917</FONT>        {<a name="line.2917"></a>
<FONT color="green">2918</FONT>            this.updateWeather();<a name="line.2918"></a>
<FONT color="green">2919</FONT>        }<a name="line.2919"></a>
<FONT color="green">2920</FONT>    <a name="line.2920"></a>
<FONT color="green">2921</FONT>        /**<a name="line.2921"></a>
<FONT color="green">2922</FONT>         * Called from World constructor to set rainingStrength and thunderingStrength<a name="line.2922"></a>
<FONT color="green">2923</FONT>         */<a name="line.2923"></a>
<FONT color="green">2924</FONT>        private void calculateInitialWeather()<a name="line.2924"></a>
<FONT color="green">2925</FONT>        {<a name="line.2925"></a>
<FONT color="green">2926</FONT>            provider.calculateInitialWeather();<a name="line.2926"></a>
<FONT color="green">2927</FONT>        }<a name="line.2927"></a>
<FONT color="green">2928</FONT>    <a name="line.2928"></a>
<FONT color="green">2929</FONT>        public void calculateInitialWeatherBody()<a name="line.2929"></a>
<FONT color="green">2930</FONT>        {<a name="line.2930"></a>
<FONT color="green">2931</FONT>            if (this.worldInfo.isRaining())<a name="line.2931"></a>
<FONT color="green">2932</FONT>            {<a name="line.2932"></a>
<FONT color="green">2933</FONT>                this.rainingStrength = 1.0F;<a name="line.2933"></a>
<FONT color="green">2934</FONT>    <a name="line.2934"></a>
<FONT color="green">2935</FONT>                if (this.worldInfo.isThundering())<a name="line.2935"></a>
<FONT color="green">2936</FONT>                {<a name="line.2936"></a>
<FONT color="green">2937</FONT>                    this.thunderingStrength = 1.0F;<a name="line.2937"></a>
<FONT color="green">2938</FONT>                }<a name="line.2938"></a>
<FONT color="green">2939</FONT>            }<a name="line.2939"></a>
<FONT color="green">2940</FONT>        }<a name="line.2940"></a>
<FONT color="green">2941</FONT>    <a name="line.2941"></a>
<FONT color="green">2942</FONT>        /**<a name="line.2942"></a>
<FONT color="green">2943</FONT>         * Updates all weather states.<a name="line.2943"></a>
<FONT color="green">2944</FONT>         */<a name="line.2944"></a>
<FONT color="green">2945</FONT>        protected void updateWeather()<a name="line.2945"></a>
<FONT color="green">2946</FONT>        {<a name="line.2946"></a>
<FONT color="green">2947</FONT>            provider.updateWeather();<a name="line.2947"></a>
<FONT color="green">2948</FONT>        }<a name="line.2948"></a>
<FONT color="green">2949</FONT>    <a name="line.2949"></a>
<FONT color="green">2950</FONT>        public void updateWeatherBody()<a name="line.2950"></a>
<FONT color="green">2951</FONT>        {<a name="line.2951"></a>
<FONT color="green">2952</FONT>            if (!this.provider.hasNoSky)<a name="line.2952"></a>
<FONT color="green">2953</FONT>            {<a name="line.2953"></a>
<FONT color="green">2954</FONT>                if (this.lastLightningBolt &gt; 0)<a name="line.2954"></a>
<FONT color="green">2955</FONT>                {<a name="line.2955"></a>
<FONT color="green">2956</FONT>                    --this.lastLightningBolt;<a name="line.2956"></a>
<FONT color="green">2957</FONT>                }<a name="line.2957"></a>
<FONT color="green">2958</FONT>    <a name="line.2958"></a>
<FONT color="green">2959</FONT>                int var1 = this.worldInfo.getThunderTime();<a name="line.2959"></a>
<FONT color="green">2960</FONT>    <a name="line.2960"></a>
<FONT color="green">2961</FONT>                if (var1 &lt;= 0)<a name="line.2961"></a>
<FONT color="green">2962</FONT>                {<a name="line.2962"></a>
<FONT color="green">2963</FONT>                    if (this.worldInfo.isThundering())<a name="line.2963"></a>
<FONT color="green">2964</FONT>                    {<a name="line.2964"></a>
<FONT color="green">2965</FONT>                        this.worldInfo.setThunderTime(this.rand.nextInt(12000) + 3600);<a name="line.2965"></a>
<FONT color="green">2966</FONT>                    }<a name="line.2966"></a>
<FONT color="green">2967</FONT>                    else<a name="line.2967"></a>
<FONT color="green">2968</FONT>                    {<a name="line.2968"></a>
<FONT color="green">2969</FONT>                        this.worldInfo.setThunderTime(this.rand.nextInt(168000) + 12000);<a name="line.2969"></a>
<FONT color="green">2970</FONT>                    }<a name="line.2970"></a>
<FONT color="green">2971</FONT>                }<a name="line.2971"></a>
<FONT color="green">2972</FONT>                else<a name="line.2972"></a>
<FONT color="green">2973</FONT>                {<a name="line.2973"></a>
<FONT color="green">2974</FONT>                    --var1;<a name="line.2974"></a>
<FONT color="green">2975</FONT>                    this.worldInfo.setThunderTime(var1);<a name="line.2975"></a>
<FONT color="green">2976</FONT>    <a name="line.2976"></a>
<FONT color="green">2977</FONT>                    if (var1 &lt;= 0)<a name="line.2977"></a>
<FONT color="green">2978</FONT>                    {<a name="line.2978"></a>
<FONT color="green">2979</FONT>                        this.worldInfo.setThundering(!this.worldInfo.isThundering());<a name="line.2979"></a>
<FONT color="green">2980</FONT>                    }<a name="line.2980"></a>
<FONT color="green">2981</FONT>                }<a name="line.2981"></a>
<FONT color="green">2982</FONT>    <a name="line.2982"></a>
<FONT color="green">2983</FONT>                int var2 = this.worldInfo.getRainTime();<a name="line.2983"></a>
<FONT color="green">2984</FONT>    <a name="line.2984"></a>
<FONT color="green">2985</FONT>                if (var2 &lt;= 0)<a name="line.2985"></a>
<FONT color="green">2986</FONT>                {<a name="line.2986"></a>
<FONT color="green">2987</FONT>                    if (this.worldInfo.isRaining())<a name="line.2987"></a>
<FONT color="green">2988</FONT>                    {<a name="line.2988"></a>
<FONT color="green">2989</FONT>                        this.worldInfo.setRainTime(this.rand.nextInt(12000) + 12000);<a name="line.2989"></a>
<FONT color="green">2990</FONT>                    }<a name="line.2990"></a>
<FONT color="green">2991</FONT>                    else<a name="line.2991"></a>
<FONT color="green">2992</FONT>                    {<a name="line.2992"></a>
<FONT color="green">2993</FONT>                        this.worldInfo.setRainTime(this.rand.nextInt(168000) + 12000);<a name="line.2993"></a>
<FONT color="green">2994</FONT>                    }<a name="line.2994"></a>
<FONT color="green">2995</FONT>                }<a name="line.2995"></a>
<FONT color="green">2996</FONT>                else<a name="line.2996"></a>
<FONT color="green">2997</FONT>                {<a name="line.2997"></a>
<FONT color="green">2998</FONT>                    --var2;<a name="line.2998"></a>
<FONT color="green">2999</FONT>                    this.worldInfo.setRainTime(var2);<a name="line.2999"></a>
<FONT color="green">3000</FONT>    <a name="line.3000"></a>
<FONT color="green">3001</FONT>                    if (var2 &lt;= 0)<a name="line.3001"></a>
<FONT color="green">3002</FONT>                    {<a name="line.3002"></a>
<FONT color="green">3003</FONT>                        this.worldInfo.setRaining(!this.worldInfo.isRaining());<a name="line.3003"></a>
<FONT color="green">3004</FONT>                    }<a name="line.3004"></a>
<FONT color="green">3005</FONT>                }<a name="line.3005"></a>
<FONT color="green">3006</FONT>    <a name="line.3006"></a>
<FONT color="green">3007</FONT>                this.prevRainingStrength = this.rainingStrength;<a name="line.3007"></a>
<FONT color="green">3008</FONT>    <a name="line.3008"></a>
<FONT color="green">3009</FONT>                if (this.worldInfo.isRaining())<a name="line.3009"></a>
<FONT color="green">3010</FONT>                {<a name="line.3010"></a>
<FONT color="green">3011</FONT>                    this.rainingStrength = (float)((double)this.rainingStrength + 0.01D);<a name="line.3011"></a>
<FONT color="green">3012</FONT>                }<a name="line.3012"></a>
<FONT color="green">3013</FONT>                else<a name="line.3013"></a>
<FONT color="green">3014</FONT>                {<a name="line.3014"></a>
<FONT color="green">3015</FONT>                    this.rainingStrength = (float)((double)this.rainingStrength - 0.01D);<a name="line.3015"></a>
<FONT color="green">3016</FONT>                }<a name="line.3016"></a>
<FONT color="green">3017</FONT>    <a name="line.3017"></a>
<FONT color="green">3018</FONT>                if (this.rainingStrength &lt; 0.0F)<a name="line.3018"></a>
<FONT color="green">3019</FONT>                {<a name="line.3019"></a>
<FONT color="green">3020</FONT>                    this.rainingStrength = 0.0F;<a name="line.3020"></a>
<FONT color="green">3021</FONT>                }<a name="line.3021"></a>
<FONT color="green">3022</FONT>    <a name="line.3022"></a>
<FONT color="green">3023</FONT>                if (this.rainingStrength &gt; 1.0F)<a name="line.3023"></a>
<FONT color="green">3024</FONT>                {<a name="line.3024"></a>
<FONT color="green">3025</FONT>                    this.rainingStrength = 1.0F;<a name="line.3025"></a>
<FONT color="green">3026</FONT>                }<a name="line.3026"></a>
<FONT color="green">3027</FONT>    <a name="line.3027"></a>
<FONT color="green">3028</FONT>                this.prevThunderingStrength = this.thunderingStrength;<a name="line.3028"></a>
<FONT color="green">3029</FONT>    <a name="line.3029"></a>
<FONT color="green">3030</FONT>                if (this.worldInfo.isThundering())<a name="line.3030"></a>
<FONT color="green">3031</FONT>                {<a name="line.3031"></a>
<FONT color="green">3032</FONT>                    this.thunderingStrength = (float)((double)this.thunderingStrength + 0.01D);<a name="line.3032"></a>
<FONT color="green">3033</FONT>                }<a name="line.3033"></a>
<FONT color="green">3034</FONT>                else<a name="line.3034"></a>
<FONT color="green">3035</FONT>                {<a name="line.3035"></a>
<FONT color="green">3036</FONT>                    this.thunderingStrength = (float)((double)this.thunderingStrength - 0.01D);<a name="line.3036"></a>
<FONT color="green">3037</FONT>                }<a name="line.3037"></a>
<FONT color="green">3038</FONT>    <a name="line.3038"></a>
<FONT color="green">3039</FONT>                if (this.thunderingStrength &lt; 0.0F)<a name="line.3039"></a>
<FONT color="green">3040</FONT>                {<a name="line.3040"></a>
<FONT color="green">3041</FONT>                    this.thunderingStrength = 0.0F;<a name="line.3041"></a>
<FONT color="green">3042</FONT>                }<a name="line.3042"></a>
<FONT color="green">3043</FONT>    <a name="line.3043"></a>
<FONT color="green">3044</FONT>                if (this.thunderingStrength &gt; 1.0F)<a name="line.3044"></a>
<FONT color="green">3045</FONT>                {<a name="line.3045"></a>
<FONT color="green">3046</FONT>                    this.thunderingStrength = 1.0F;<a name="line.3046"></a>
<FONT color="green">3047</FONT>                }<a name="line.3047"></a>
<FONT color="green">3048</FONT>            }<a name="line.3048"></a>
<FONT color="green">3049</FONT>        }<a name="line.3049"></a>
<FONT color="green">3050</FONT>    <a name="line.3050"></a>
<FONT color="green">3051</FONT>        public void toggleRain()<a name="line.3051"></a>
<FONT color="green">3052</FONT>        {<a name="line.3052"></a>
<FONT color="green">3053</FONT>            provider.toggleRain();<a name="line.3053"></a>
<FONT color="green">3054</FONT>        }<a name="line.3054"></a>
<FONT color="green">3055</FONT>    <a name="line.3055"></a>
<FONT color="green">3056</FONT>        protected void setActivePlayerChunksAndCheckLight()<a name="line.3056"></a>
<FONT color="green">3057</FONT>        {<a name="line.3057"></a>
<FONT color="green">3058</FONT>            this.activeChunkSet.clear();<a name="line.3058"></a>
<FONT color="green">3059</FONT>            this.activeChunkSet.addAll(getPersistentChunks().keySet());<a name="line.3059"></a>
<FONT color="green">3060</FONT>    <a name="line.3060"></a>
<FONT color="green">3061</FONT>            this.theProfiler.startSection("buildList");<a name="line.3061"></a>
<FONT color="green">3062</FONT>            int var1;<a name="line.3062"></a>
<FONT color="green">3063</FONT>            EntityPlayer var2;<a name="line.3063"></a>
<FONT color="green">3064</FONT>            int var3;<a name="line.3064"></a>
<FONT color="green">3065</FONT>            int var4;<a name="line.3065"></a>
<FONT color="green">3066</FONT>    <a name="line.3066"></a>
<FONT color="green">3067</FONT>            for (var1 = 0; var1 &lt; this.playerEntities.size(); ++var1)<a name="line.3067"></a>
<FONT color="green">3068</FONT>            {<a name="line.3068"></a>
<FONT color="green">3069</FONT>                var2 = (EntityPlayer)this.playerEntities.get(var1);<a name="line.3069"></a>
<FONT color="green">3070</FONT>                var3 = MathHelper.floor_double(var2.posX / 16.0D);<a name="line.3070"></a>
<FONT color="green">3071</FONT>                var4 = MathHelper.floor_double(var2.posZ / 16.0D);<a name="line.3071"></a>
<FONT color="green">3072</FONT>                byte var5 = 7;<a name="line.3072"></a>
<FONT color="green">3073</FONT>    <a name="line.3073"></a>
<FONT color="green">3074</FONT>                for (int var6 = -var5; var6 &lt;= var5; ++var6)<a name="line.3074"></a>
<FONT color="green">3075</FONT>                {<a name="line.3075"></a>
<FONT color="green">3076</FONT>                    for (int var7 = -var5; var7 &lt;= var5; ++var7)<a name="line.3076"></a>
<FONT color="green">3077</FONT>                    {<a name="line.3077"></a>
<FONT color="green">3078</FONT>                        this.activeChunkSet.add(new ChunkCoordIntPair(var6 + var3, var7 + var4));<a name="line.3078"></a>
<FONT color="green">3079</FONT>                    }<a name="line.3079"></a>
<FONT color="green">3080</FONT>                }<a name="line.3080"></a>
<FONT color="green">3081</FONT>            }<a name="line.3081"></a>
<FONT color="green">3082</FONT>    <a name="line.3082"></a>
<FONT color="green">3083</FONT>            this.theProfiler.endSection();<a name="line.3083"></a>
<FONT color="green">3084</FONT>    <a name="line.3084"></a>
<FONT color="green">3085</FONT>            if (this.ambientTickCountdown &gt; 0)<a name="line.3085"></a>
<FONT color="green">3086</FONT>            {<a name="line.3086"></a>
<FONT color="green">3087</FONT>                --this.ambientTickCountdown;<a name="line.3087"></a>
<FONT color="green">3088</FONT>            }<a name="line.3088"></a>
<FONT color="green">3089</FONT>    <a name="line.3089"></a>
<FONT color="green">3090</FONT>            this.theProfiler.startSection("playerCheckLight");<a name="line.3090"></a>
<FONT color="green">3091</FONT>    <a name="line.3091"></a>
<FONT color="green">3092</FONT>            if (!this.playerEntities.isEmpty())<a name="line.3092"></a>
<FONT color="green">3093</FONT>            {<a name="line.3093"></a>
<FONT color="green">3094</FONT>                var1 = this.rand.nextInt(this.playerEntities.size());<a name="line.3094"></a>
<FONT color="green">3095</FONT>                var2 = (EntityPlayer)this.playerEntities.get(var1);<a name="line.3095"></a>
<FONT color="green">3096</FONT>                var3 = MathHelper.floor_double(var2.posX) + this.rand.nextInt(11) - 5;<a name="line.3096"></a>
<FONT color="green">3097</FONT>                var4 = MathHelper.floor_double(var2.posY) + this.rand.nextInt(11) - 5;<a name="line.3097"></a>
<FONT color="green">3098</FONT>                int var8 = MathHelper.floor_double(var2.posZ) + this.rand.nextInt(11) - 5;<a name="line.3098"></a>
<FONT color="green">3099</FONT>                this.updateAllLightTypes(var3, var4, var8);<a name="line.3099"></a>
<FONT color="green">3100</FONT>            }<a name="line.3100"></a>
<FONT color="green">3101</FONT>    <a name="line.3101"></a>
<FONT color="green">3102</FONT>            this.theProfiler.endSection();<a name="line.3102"></a>
<FONT color="green">3103</FONT>        }<a name="line.3103"></a>
<FONT color="green">3104</FONT>    <a name="line.3104"></a>
<FONT color="green">3105</FONT>        protected void moodSoundAndLightCheck(int par1, int par2, Chunk par3Chunk)<a name="line.3105"></a>
<FONT color="green">3106</FONT>        {<a name="line.3106"></a>
<FONT color="green">3107</FONT>            this.theProfiler.endStartSection("moodSound");<a name="line.3107"></a>
<FONT color="green">3108</FONT>    <a name="line.3108"></a>
<FONT color="green">3109</FONT>            if (this.ambientTickCountdown == 0 &amp;&amp; !this.isRemote)<a name="line.3109"></a>
<FONT color="green">3110</FONT>            {<a name="line.3110"></a>
<FONT color="green">3111</FONT>                this.updateLCG = this.updateLCG * 3 + 1013904223;<a name="line.3111"></a>
<FONT color="green">3112</FONT>                int var4 = this.updateLCG &gt;&gt; 2;<a name="line.3112"></a>
<FONT color="green">3113</FONT>                int var5 = var4 &amp; 15;<a name="line.3113"></a>
<FONT color="green">3114</FONT>                int var6 = var4 &gt;&gt; 8 &amp; 15;<a name="line.3114"></a>
<FONT color="green">3115</FONT>                int var7 = var4 &gt;&gt; 16 &amp; 127;<a name="line.3115"></a>
<FONT color="green">3116</FONT>                int var8 = par3Chunk.getBlockID(var5, var7, var6);<a name="line.3116"></a>
<FONT color="green">3117</FONT>                var5 += par1;<a name="line.3117"></a>
<FONT color="green">3118</FONT>                var6 += par2;<a name="line.3118"></a>
<FONT color="green">3119</FONT>    <a name="line.3119"></a>
<FONT color="green">3120</FONT>                if (var8 == 0 &amp;&amp; this.getFullBlockLightValue(var5, var7, var6) &lt;= this.rand.nextInt(8) &amp;&amp; this.getSavedLightValue(EnumSkyBlock.Sky, var5, var7, var6) &lt;= 0)<a name="line.3120"></a>
<FONT color="green">3121</FONT>                {<a name="line.3121"></a>
<FONT color="green">3122</FONT>                    EntityPlayer var9 = this.getClosestPlayer((double)var5 + 0.5D, (double)var7 + 0.5D, (double)var6 + 0.5D, 8.0D);<a name="line.3122"></a>
<FONT color="green">3123</FONT>    <a name="line.3123"></a>
<FONT color="green">3124</FONT>                    if (var9 != null &amp;&amp; var9.getDistanceSq((double)var5 + 0.5D, (double)var7 + 0.5D, (double)var6 + 0.5D) &gt; 4.0D)<a name="line.3124"></a>
<FONT color="green">3125</FONT>                    {<a name="line.3125"></a>
<FONT color="green">3126</FONT>                        this.playSoundEffect((double)var5 + 0.5D, (double)var7 + 0.5D, (double)var6 + 0.5D, "ambient.cave.cave", 0.7F, 0.8F + this.rand.nextFloat() * 0.2F);<a name="line.3126"></a>
<FONT color="green">3127</FONT>                        this.ambientTickCountdown = this.rand.nextInt(12000) + 6000;<a name="line.3127"></a>
<FONT color="green">3128</FONT>                    }<a name="line.3128"></a>
<FONT color="green">3129</FONT>                }<a name="line.3129"></a>
<FONT color="green">3130</FONT>            }<a name="line.3130"></a>
<FONT color="green">3131</FONT>    <a name="line.3131"></a>
<FONT color="green">3132</FONT>            this.theProfiler.endStartSection("checkLight");<a name="line.3132"></a>
<FONT color="green">3133</FONT>            par3Chunk.enqueueRelightChecks();<a name="line.3133"></a>
<FONT color="green">3134</FONT>        }<a name="line.3134"></a>
<FONT color="green">3135</FONT>    <a name="line.3135"></a>
<FONT color="green">3136</FONT>        /**<a name="line.3136"></a>
<FONT color="green">3137</FONT>         * plays random cave ambient sounds and runs updateTick on random blocks within each chunk in the vacinity of a<a name="line.3137"></a>
<FONT color="green">3138</FONT>         * player<a name="line.3138"></a>
<FONT color="green">3139</FONT>         */<a name="line.3139"></a>
<FONT color="green">3140</FONT>        protected void tickBlocksAndAmbiance()<a name="line.3140"></a>
<FONT color="green">3141</FONT>        {<a name="line.3141"></a>
<FONT color="green">3142</FONT>            this.setActivePlayerChunksAndCheckLight();<a name="line.3142"></a>
<FONT color="green">3143</FONT>        }<a name="line.3143"></a>
<FONT color="green">3144</FONT>    <a name="line.3144"></a>
<FONT color="green">3145</FONT>        /**<a name="line.3145"></a>
<FONT color="green">3146</FONT>         * checks to see if a given block is both water and is cold enough to freeze<a name="line.3146"></a>
<FONT color="green">3147</FONT>         */<a name="line.3147"></a>
<FONT color="green">3148</FONT>        public boolean isBlockFreezable(int par1, int par2, int par3)<a name="line.3148"></a>
<FONT color="green">3149</FONT>        {<a name="line.3149"></a>
<FONT color="green">3150</FONT>            return this.canBlockFreeze(par1, par2, par3, false);<a name="line.3150"></a>
<FONT color="green">3151</FONT>        }<a name="line.3151"></a>
<FONT color="green">3152</FONT>    <a name="line.3152"></a>
<FONT color="green">3153</FONT>        /**<a name="line.3153"></a>
<FONT color="green">3154</FONT>         * checks to see if a given block is both water and has at least one immediately adjacent non-water block<a name="line.3154"></a>
<FONT color="green">3155</FONT>         */<a name="line.3155"></a>
<FONT color="green">3156</FONT>        public boolean isBlockFreezableNaturally(int par1, int par2, int par3)<a name="line.3156"></a>
<FONT color="green">3157</FONT>        {<a name="line.3157"></a>
<FONT color="green">3158</FONT>            return this.canBlockFreeze(par1, par2, par3, true);<a name="line.3158"></a>
<FONT color="green">3159</FONT>        }<a name="line.3159"></a>
<FONT color="green">3160</FONT>    <a name="line.3160"></a>
<FONT color="green">3161</FONT>        /**<a name="line.3161"></a>
<FONT color="green">3162</FONT>         * checks to see if a given block is both water, and cold enough to freeze - if the par4 boolean is set, this will<a name="line.3162"></a>
<FONT color="green">3163</FONT>         * only return true if there is a non-water block immediately adjacent to the specified block<a name="line.3163"></a>
<FONT color="green">3164</FONT>         */<a name="line.3164"></a>
<FONT color="green">3165</FONT>        public boolean canBlockFreeze(int par1, int par2, int par3, boolean par4)<a name="line.3165"></a>
<FONT color="green">3166</FONT>        {<a name="line.3166"></a>
<FONT color="green">3167</FONT>            return provider.canBlockFreeze(par1, par2, par3, par4);<a name="line.3167"></a>
<FONT color="green">3168</FONT>        }<a name="line.3168"></a>
<FONT color="green">3169</FONT>    <a name="line.3169"></a>
<FONT color="green">3170</FONT>        public boolean canBlockFreezeBody(int par1, int par2, int par3, boolean par4)<a name="line.3170"></a>
<FONT color="green">3171</FONT>        {<a name="line.3171"></a>
<FONT color="green">3172</FONT>            BiomeGenBase var5 = this.getBiomeGenForCoords(par1, par3);<a name="line.3172"></a>
<FONT color="green">3173</FONT>            float var6 = var5.getFloatTemperature();<a name="line.3173"></a>
<FONT color="green">3174</FONT>    <a name="line.3174"></a>
<FONT color="green">3175</FONT>            if (var6 &gt; 0.15F)<a name="line.3175"></a>
<FONT color="green">3176</FONT>            {<a name="line.3176"></a>
<FONT color="green">3177</FONT>                return false;<a name="line.3177"></a>
<FONT color="green">3178</FONT>            }<a name="line.3178"></a>
<FONT color="green">3179</FONT>            else<a name="line.3179"></a>
<FONT color="green">3180</FONT>            {<a name="line.3180"></a>
<FONT color="green">3181</FONT>                if (par2 &gt;= 0 &amp;&amp; par2 &lt; 256 &amp;&amp; this.getSavedLightValue(EnumSkyBlock.Block, par1, par2, par3) &lt; 10)<a name="line.3181"></a>
<FONT color="green">3182</FONT>                {<a name="line.3182"></a>
<FONT color="green">3183</FONT>                    int var7 = this.getBlockId(par1, par2, par3);<a name="line.3183"></a>
<FONT color="green">3184</FONT>    <a name="line.3184"></a>
<FONT color="green">3185</FONT>                    if ((var7 == Block.waterStill.blockID || var7 == Block.waterMoving.blockID) &amp;&amp; this.getBlockMetadata(par1, par2, par3) == 0)<a name="line.3185"></a>
<FONT color="green">3186</FONT>                    {<a name="line.3186"></a>
<FONT color="green">3187</FONT>                        if (!par4)<a name="line.3187"></a>
<FONT color="green">3188</FONT>                        {<a name="line.3188"></a>
<FONT color="green">3189</FONT>                            return true;<a name="line.3189"></a>
<FONT color="green">3190</FONT>                        }<a name="line.3190"></a>
<FONT color="green">3191</FONT>    <a name="line.3191"></a>
<FONT color="green">3192</FONT>                        boolean var8 = true;<a name="line.3192"></a>
<FONT color="green">3193</FONT>    <a name="line.3193"></a>
<FONT color="green">3194</FONT>                        if (var8 &amp;&amp; this.getBlockMaterial(par1 - 1, par2, par3) != Material.water)<a name="line.3194"></a>
<FONT color="green">3195</FONT>                        {<a name="line.3195"></a>
<FONT color="green">3196</FONT>                            var8 = false;<a name="line.3196"></a>
<FONT color="green">3197</FONT>                        }<a name="line.3197"></a>
<FONT color="green">3198</FONT>    <a name="line.3198"></a>
<FONT color="green">3199</FONT>                        if (var8 &amp;&amp; this.getBlockMaterial(par1 + 1, par2, par3) != Material.water)<a name="line.3199"></a>
<FONT color="green">3200</FONT>                        {<a name="line.3200"></a>
<FONT color="green">3201</FONT>                            var8 = false;<a name="line.3201"></a>
<FONT color="green">3202</FONT>                        }<a name="line.3202"></a>
<FONT color="green">3203</FONT>    <a name="line.3203"></a>
<FONT color="green">3204</FONT>                        if (var8 &amp;&amp; this.getBlockMaterial(par1, par2, par3 - 1) != Material.water)<a name="line.3204"></a>
<FONT color="green">3205</FONT>                        {<a name="line.3205"></a>
<FONT color="green">3206</FONT>                            var8 = false;<a name="line.3206"></a>
<FONT color="green">3207</FONT>                        }<a name="line.3207"></a>
<FONT color="green">3208</FONT>    <a name="line.3208"></a>
<FONT color="green">3209</FONT>                        if (var8 &amp;&amp; this.getBlockMaterial(par1, par2, par3 + 1) != Material.water)<a name="line.3209"></a>
<FONT color="green">3210</FONT>                        {<a name="line.3210"></a>
<FONT color="green">3211</FONT>                            var8 = false;<a name="line.3211"></a>
<FONT color="green">3212</FONT>                        }<a name="line.3212"></a>
<FONT color="green">3213</FONT>    <a name="line.3213"></a>
<FONT color="green">3214</FONT>                        if (!var8)<a name="line.3214"></a>
<FONT color="green">3215</FONT>                        {<a name="line.3215"></a>
<FONT color="green">3216</FONT>                            return true;<a name="line.3216"></a>
<FONT color="green">3217</FONT>                        }<a name="line.3217"></a>
<FONT color="green">3218</FONT>                    }<a name="line.3218"></a>
<FONT color="green">3219</FONT>                }<a name="line.3219"></a>
<FONT color="green">3220</FONT>    <a name="line.3220"></a>
<FONT color="green">3221</FONT>                return false;<a name="line.3221"></a>
<FONT color="green">3222</FONT>            }<a name="line.3222"></a>
<FONT color="green">3223</FONT>        }<a name="line.3223"></a>
<FONT color="green">3224</FONT>    <a name="line.3224"></a>
<FONT color="green">3225</FONT>        /**<a name="line.3225"></a>
<FONT color="green">3226</FONT>         * Tests whether or not snow can be placed at a given location<a name="line.3226"></a>
<FONT color="green">3227</FONT>         */<a name="line.3227"></a>
<FONT color="green">3228</FONT>        public boolean canSnowAt(int par1, int par2, int par3)<a name="line.3228"></a>
<FONT color="green">3229</FONT>        {<a name="line.3229"></a>
<FONT color="green">3230</FONT>            return provider.canSnowAt(par1, par2, par3);<a name="line.3230"></a>
<FONT color="green">3231</FONT>        }<a name="line.3231"></a>
<FONT color="green">3232</FONT>    <a name="line.3232"></a>
<FONT color="green">3233</FONT>        public boolean canSnowAtBody(int par1, int par2, int par3)<a name="line.3233"></a>
<FONT color="green">3234</FONT>        {<a name="line.3234"></a>
<FONT color="green">3235</FONT>            BiomeGenBase var4 = this.getBiomeGenForCoords(par1, par3);<a name="line.3235"></a>
<FONT color="green">3236</FONT>            float var5 = var4.getFloatTemperature();<a name="line.3236"></a>
<FONT color="green">3237</FONT>    <a name="line.3237"></a>
<FONT color="green">3238</FONT>            if (var5 &gt; 0.15F)<a name="line.3238"></a>
<FONT color="green">3239</FONT>            {<a name="line.3239"></a>
<FONT color="green">3240</FONT>                return false;<a name="line.3240"></a>
<FONT color="green">3241</FONT>            }<a name="line.3241"></a>
<FONT color="green">3242</FONT>            else<a name="line.3242"></a>
<FONT color="green">3243</FONT>            {<a name="line.3243"></a>
<FONT color="green">3244</FONT>                if (par2 &gt;= 0 &amp;&amp; par2 &lt; 256 &amp;&amp; this.getSavedLightValue(EnumSkyBlock.Block, par1, par2, par3) &lt; 10)<a name="line.3244"></a>
<FONT color="green">3245</FONT>                {<a name="line.3245"></a>
<FONT color="green">3246</FONT>                    int var6 = this.getBlockId(par1, par2 - 1, par3);<a name="line.3246"></a>
<FONT color="green">3247</FONT>                    int var7 = this.getBlockId(par1, par2, par3);<a name="line.3247"></a>
<FONT color="green">3248</FONT>    <a name="line.3248"></a>
<FONT color="green">3249</FONT>                    if (var7 == 0 &amp;&amp; Block.snow.canPlaceBlockAt(this, par1, par2, par3) &amp;&amp; var6 != 0 &amp;&amp; var6 != Block.ice.blockID &amp;&amp; Block.blocksList[var6].blockMaterial.blocksMovement())<a name="line.3249"></a>
<FONT color="green">3250</FONT>                    {<a name="line.3250"></a>
<FONT color="green">3251</FONT>                        return true;<a name="line.3251"></a>
<FONT color="green">3252</FONT>                    }<a name="line.3252"></a>
<FONT color="green">3253</FONT>                }<a name="line.3253"></a>
<FONT color="green">3254</FONT>    <a name="line.3254"></a>
<FONT color="green">3255</FONT>                return false;<a name="line.3255"></a>
<FONT color="green">3256</FONT>            }<a name="line.3256"></a>
<FONT color="green">3257</FONT>        }<a name="line.3257"></a>
<FONT color="green">3258</FONT>    <a name="line.3258"></a>
<FONT color="green">3259</FONT>        public void updateAllLightTypes(int par1, int par2, int par3)<a name="line.3259"></a>
<FONT color="green">3260</FONT>        {<a name="line.3260"></a>
<FONT color="green">3261</FONT>            if (!this.provider.hasNoSky)<a name="line.3261"></a>
<FONT color="green">3262</FONT>            {<a name="line.3262"></a>
<FONT color="green">3263</FONT>                this.updateLightByType(EnumSkyBlock.Sky, par1, par2, par3);<a name="line.3263"></a>
<FONT color="green">3264</FONT>            }<a name="line.3264"></a>
<FONT color="green">3265</FONT>    <a name="line.3265"></a>
<FONT color="green">3266</FONT>            this.updateLightByType(EnumSkyBlock.Block, par1, par2, par3);<a name="line.3266"></a>
<FONT color="green">3267</FONT>        }<a name="line.3267"></a>
<FONT color="green">3268</FONT>    <a name="line.3268"></a>
<FONT color="green">3269</FONT>        private int computeSkyLightValue(int par1, int par2, int par3, int par4, int par5, int par6)<a name="line.3269"></a>
<FONT color="green">3270</FONT>        {<a name="line.3270"></a>
<FONT color="green">3271</FONT>            int var7 = 0;<a name="line.3271"></a>
<FONT color="green">3272</FONT>    <a name="line.3272"></a>
<FONT color="green">3273</FONT>            if (this.canBlockSeeTheSky(par2, par3, par4))<a name="line.3273"></a>
<FONT color="green">3274</FONT>            {<a name="line.3274"></a>
<FONT color="green">3275</FONT>                var7 = 15;<a name="line.3275"></a>
<FONT color="green">3276</FONT>            }<a name="line.3276"></a>
<FONT color="green">3277</FONT>            else<a name="line.3277"></a>
<FONT color="green">3278</FONT>            {<a name="line.3278"></a>
<FONT color="green">3279</FONT>                if (par6 == 0)<a name="line.3279"></a>
<FONT color="green">3280</FONT>                {<a name="line.3280"></a>
<FONT color="green">3281</FONT>                    par6 = 1;<a name="line.3281"></a>
<FONT color="green">3282</FONT>                }<a name="line.3282"></a>
<FONT color="green">3283</FONT>    <a name="line.3283"></a>
<FONT color="green">3284</FONT>                int var8 = this.getSavedLightValue(EnumSkyBlock.Sky, par2 - 1, par3, par4) - par6;<a name="line.3284"></a>
<FONT color="green">3285</FONT>                int var9 = this.getSavedLightValue(EnumSkyBlock.Sky, par2 + 1, par3, par4) - par6;<a name="line.3285"></a>
<FONT color="green">3286</FONT>                int var10 = this.getSavedLightValue(EnumSkyBlock.Sky, par2, par3 - 1, par4) - par6;<a name="line.3286"></a>
<FONT color="green">3287</FONT>                int var11 = this.getSavedLightValue(EnumSkyBlock.Sky, par2, par3 + 1, par4) - par6;<a name="line.3287"></a>
<FONT color="green">3288</FONT>                int var12 = this.getSavedLightValue(EnumSkyBlock.Sky, par2, par3, par4 - 1) - par6;<a name="line.3288"></a>
<FONT color="green">3289</FONT>                int var13 = this.getSavedLightValue(EnumSkyBlock.Sky, par2, par3, par4 + 1) - par6;<a name="line.3289"></a>
<FONT color="green">3290</FONT>    <a name="line.3290"></a>
<FONT color="green">3291</FONT>                if (var8 &gt; var7)<a name="line.3291"></a>
<FONT color="green">3292</FONT>                {<a name="line.3292"></a>
<FONT color="green">3293</FONT>                    var7 = var8;<a name="line.3293"></a>
<FONT color="green">3294</FONT>                }<a name="line.3294"></a>
<FONT color="green">3295</FONT>    <a name="line.3295"></a>
<FONT color="green">3296</FONT>                if (var9 &gt; var7)<a name="line.3296"></a>
<FONT color="green">3297</FONT>                {<a name="line.3297"></a>
<FONT color="green">3298</FONT>                    var7 = var9;<a name="line.3298"></a>
<FONT color="green">3299</FONT>                }<a name="line.3299"></a>
<FONT color="green">3300</FONT>    <a name="line.3300"></a>
<FONT color="green">3301</FONT>                if (var10 &gt; var7)<a name="line.3301"></a>
<FONT color="green">3302</FONT>                {<a name="line.3302"></a>
<FONT color="green">3303</FONT>                    var7 = var10;<a name="line.3303"></a>
<FONT color="green">3304</FONT>                }<a name="line.3304"></a>
<FONT color="green">3305</FONT>    <a name="line.3305"></a>
<FONT color="green">3306</FONT>                if (var11 &gt; var7)<a name="line.3306"></a>
<FONT color="green">3307</FONT>                {<a name="line.3307"></a>
<FONT color="green">3308</FONT>                    var7 = var11;<a name="line.3308"></a>
<FONT color="green">3309</FONT>                }<a name="line.3309"></a>
<FONT color="green">3310</FONT>    <a name="line.3310"></a>
<FONT color="green">3311</FONT>                if (var12 &gt; var7)<a name="line.3311"></a>
<FONT color="green">3312</FONT>                {<a name="line.3312"></a>
<FONT color="green">3313</FONT>                    var7 = var12;<a name="line.3313"></a>
<FONT color="green">3314</FONT>                }<a name="line.3314"></a>
<FONT color="green">3315</FONT>    <a name="line.3315"></a>
<FONT color="green">3316</FONT>                if (var13 &gt; var7)<a name="line.3316"></a>
<FONT color="green">3317</FONT>                {<a name="line.3317"></a>
<FONT color="green">3318</FONT>                    var7 = var13;<a name="line.3318"></a>
<FONT color="green">3319</FONT>                }<a name="line.3319"></a>
<FONT color="green">3320</FONT>            }<a name="line.3320"></a>
<FONT color="green">3321</FONT>    <a name="line.3321"></a>
<FONT color="green">3322</FONT>            return var7;<a name="line.3322"></a>
<FONT color="green">3323</FONT>        }<a name="line.3323"></a>
<FONT color="green">3324</FONT>    <a name="line.3324"></a>
<FONT color="green">3325</FONT>        private int computeBlockLightValue(int par1, int par2, int par3, int par4, int par5, int par6)<a name="line.3325"></a>
<FONT color="green">3326</FONT>        {<a name="line.3326"></a>
<FONT color="green">3327</FONT>            int var7 = (par5 == 0 || Block.blocksList[par5] == null ? 0 : Block.blocksList[par5].getLightValue(this, par2, par3, par4));<a name="line.3327"></a>
<FONT color="green">3328</FONT>            int var8 = this.getSavedLightValue(EnumSkyBlock.Block, par2 - 1, par3, par4) - par6;<a name="line.3328"></a>
<FONT color="green">3329</FONT>            int var9 = this.getSavedLightValue(EnumSkyBlock.Block, par2 + 1, par3, par4) - par6;<a name="line.3329"></a>
<FONT color="green">3330</FONT>            int var10 = this.getSavedLightValue(EnumSkyBlock.Block, par2, par3 - 1, par4) - par6;<a name="line.3330"></a>
<FONT color="green">3331</FONT>            int var11 = this.getSavedLightValue(EnumSkyBlock.Block, par2, par3 + 1, par4) - par6;<a name="line.3331"></a>
<FONT color="green">3332</FONT>            int var12 = this.getSavedLightValue(EnumSkyBlock.Block, par2, par3, par4 - 1) - par6;<a name="line.3332"></a>
<FONT color="green">3333</FONT>            int var13 = this.getSavedLightValue(EnumSkyBlock.Block, par2, par3, par4 + 1) - par6;<a name="line.3333"></a>
<FONT color="green">3334</FONT>    <a name="line.3334"></a>
<FONT color="green">3335</FONT>            if (var8 &gt; var7)<a name="line.3335"></a>
<FONT color="green">3336</FONT>            {<a name="line.3336"></a>
<FONT color="green">3337</FONT>                var7 = var8;<a name="line.3337"></a>
<FONT color="green">3338</FONT>            }<a name="line.3338"></a>
<FONT color="green">3339</FONT>    <a name="line.3339"></a>
<FONT color="green">3340</FONT>            if (var9 &gt; var7)<a name="line.3340"></a>
<FONT color="green">3341</FONT>            {<a name="line.3341"></a>
<FONT color="green">3342</FONT>                var7 = var9;<a name="line.3342"></a>
<FONT color="green">3343</FONT>            }<a name="line.3343"></a>
<FONT color="green">3344</FONT>    <a name="line.3344"></a>
<FONT color="green">3345</FONT>            if (var10 &gt; var7)<a name="line.3345"></a>
<FONT color="green">3346</FONT>            {<a name="line.3346"></a>
<FONT color="green">3347</FONT>                var7 = var10;<a name="line.3347"></a>
<FONT color="green">3348</FONT>            }<a name="line.3348"></a>
<FONT color="green">3349</FONT>    <a name="line.3349"></a>
<FONT color="green">3350</FONT>            if (var11 &gt; var7)<a name="line.3350"></a>
<FONT color="green">3351</FONT>            {<a name="line.3351"></a>
<FONT color="green">3352</FONT>                var7 = var11;<a name="line.3352"></a>
<FONT color="green">3353</FONT>            }<a name="line.3353"></a>
<FONT color="green">3354</FONT>    <a name="line.3354"></a>
<FONT color="green">3355</FONT>            if (var12 &gt; var7)<a name="line.3355"></a>
<FONT color="green">3356</FONT>            {<a name="line.3356"></a>
<FONT color="green">3357</FONT>                var7 = var12;<a name="line.3357"></a>
<FONT color="green">3358</FONT>            }<a name="line.3358"></a>
<FONT color="green">3359</FONT>    <a name="line.3359"></a>
<FONT color="green">3360</FONT>            if (var13 &gt; var7)<a name="line.3360"></a>
<FONT color="green">3361</FONT>            {<a name="line.3361"></a>
<FONT color="green">3362</FONT>                var7 = var13;<a name="line.3362"></a>
<FONT color="green">3363</FONT>            }<a name="line.3363"></a>
<FONT color="green">3364</FONT>    <a name="line.3364"></a>
<FONT color="green">3365</FONT>            return var7;<a name="line.3365"></a>
<FONT color="green">3366</FONT>        }<a name="line.3366"></a>
<FONT color="green">3367</FONT>    <a name="line.3367"></a>
<FONT color="green">3368</FONT>        public void updateLightByType(EnumSkyBlock par1EnumSkyBlock, int par2, int par3, int par4)<a name="line.3368"></a>
<FONT color="green">3369</FONT>        {<a name="line.3369"></a>
<FONT color="green">3370</FONT>            if (this.doChunksNearChunkExist(par2, par3, par4, 17))<a name="line.3370"></a>
<FONT color="green">3371</FONT>            {<a name="line.3371"></a>
<FONT color="green">3372</FONT>                int var5 = 0;<a name="line.3372"></a>
<FONT color="green">3373</FONT>                int var6 = 0;<a name="line.3373"></a>
<FONT color="green">3374</FONT>                this.theProfiler.startSection("getBrightness");<a name="line.3374"></a>
<FONT color="green">3375</FONT>                int var7 = this.getSavedLightValue(par1EnumSkyBlock, par2, par3, par4);<a name="line.3375"></a>
<FONT color="green">3376</FONT>                boolean var8 = false;<a name="line.3376"></a>
<FONT color="green">3377</FONT>                int var9 = this.getBlockId(par2, par3, par4);<a name="line.3377"></a>
<FONT color="green">3378</FONT>                int var10 = this.getBlockLightOpacity(par2, par3, par4);<a name="line.3378"></a>
<FONT color="green">3379</FONT>    <a name="line.3379"></a>
<FONT color="green">3380</FONT>                if (var10 == 0)<a name="line.3380"></a>
<FONT color="green">3381</FONT>                {<a name="line.3381"></a>
<FONT color="green">3382</FONT>                    var10 = 1;<a name="line.3382"></a>
<FONT color="green">3383</FONT>                }<a name="line.3383"></a>
<FONT color="green">3384</FONT>    <a name="line.3384"></a>
<FONT color="green">3385</FONT>                boolean var11 = false;<a name="line.3385"></a>
<FONT color="green">3386</FONT>                int var24;<a name="line.3386"></a>
<FONT color="green">3387</FONT>    <a name="line.3387"></a>
<FONT color="green">3388</FONT>                if (par1EnumSkyBlock == EnumSkyBlock.Sky)<a name="line.3388"></a>
<FONT color="green">3389</FONT>                {<a name="line.3389"></a>
<FONT color="green">3390</FONT>                    var24 = this.computeSkyLightValue(var7, par2, par3, par4, var9, var10);<a name="line.3390"></a>
<FONT color="green">3391</FONT>                }<a name="line.3391"></a>
<FONT color="green">3392</FONT>                else<a name="line.3392"></a>
<FONT color="green">3393</FONT>                {<a name="line.3393"></a>
<FONT color="green">3394</FONT>                    var24 = this.computeBlockLightValue(var7, par2, par3, par4, var9, var10);<a name="line.3394"></a>
<FONT color="green">3395</FONT>                }<a name="line.3395"></a>
<FONT color="green">3396</FONT>    <a name="line.3396"></a>
<FONT color="green">3397</FONT>                int var12;<a name="line.3397"></a>
<FONT color="green">3398</FONT>                int var13;<a name="line.3398"></a>
<FONT color="green">3399</FONT>                int var14;<a name="line.3399"></a>
<FONT color="green">3400</FONT>                int var15;<a name="line.3400"></a>
<FONT color="green">3401</FONT>                int var17;<a name="line.3401"></a>
<FONT color="green">3402</FONT>                int var16;<a name="line.3402"></a>
<FONT color="green">3403</FONT>                int var19;<a name="line.3403"></a>
<FONT color="green">3404</FONT>                int var18;<a name="line.3404"></a>
<FONT color="green">3405</FONT>    <a name="line.3405"></a>
<FONT color="green">3406</FONT>                if (var24 &gt; var7)<a name="line.3406"></a>
<FONT color="green">3407</FONT>                {<a name="line.3407"></a>
<FONT color="green">3408</FONT>                    this.lightUpdateBlockList[var6++] = 133152;<a name="line.3408"></a>
<FONT color="green">3409</FONT>                }<a name="line.3409"></a>
<FONT color="green">3410</FONT>                else if (var24 &lt; var7)<a name="line.3410"></a>
<FONT color="green">3411</FONT>                {<a name="line.3411"></a>
<FONT color="green">3412</FONT>                    if (par1EnumSkyBlock != EnumSkyBlock.Block)<a name="line.3412"></a>
<FONT color="green">3413</FONT>                    {<a name="line.3413"></a>
<FONT color="green">3414</FONT>                        ;<a name="line.3414"></a>
<FONT color="green">3415</FONT>                    }<a name="line.3415"></a>
<FONT color="green">3416</FONT>    <a name="line.3416"></a>
<FONT color="green">3417</FONT>                    this.lightUpdateBlockList[var6++] = 133152 + (var7 &lt;&lt; 18);<a name="line.3417"></a>
<FONT color="green">3418</FONT>    <a name="line.3418"></a>
<FONT color="green">3419</FONT>                    while (var5 &lt; var6)<a name="line.3419"></a>
<FONT color="green">3420</FONT>                    {<a name="line.3420"></a>
<FONT color="green">3421</FONT>                        var9 = this.lightUpdateBlockList[var5++];<a name="line.3421"></a>
<FONT color="green">3422</FONT>                        var10 = (var9 &amp; 63) - 32 + par2;<a name="line.3422"></a>
<FONT color="green">3423</FONT>                        var24 = (var9 &gt;&gt; 6 &amp; 63) - 32 + par3;<a name="line.3423"></a>
<FONT color="green">3424</FONT>                        var12 = (var9 &gt;&gt; 12 &amp; 63) - 32 + par4;<a name="line.3424"></a>
<FONT color="green">3425</FONT>                        var13 = var9 &gt;&gt; 18 &amp; 15;<a name="line.3425"></a>
<FONT color="green">3426</FONT>                        var14 = this.getSavedLightValue(par1EnumSkyBlock, var10, var24, var12);<a name="line.3426"></a>
<FONT color="green">3427</FONT>    <a name="line.3427"></a>
<FONT color="green">3428</FONT>                        if (var14 == var13)<a name="line.3428"></a>
<FONT color="green">3429</FONT>                        {<a name="line.3429"></a>
<FONT color="green">3430</FONT>                            this.setLightValue(par1EnumSkyBlock, var10, var24, var12, 0);<a name="line.3430"></a>
<FONT color="green">3431</FONT>    <a name="line.3431"></a>
<FONT color="green">3432</FONT>                            if (var13 &gt; 0)<a name="line.3432"></a>
<FONT color="green">3433</FONT>                            {<a name="line.3433"></a>
<FONT color="green">3434</FONT>                                var15 = var10 - par2;<a name="line.3434"></a>
<FONT color="green">3435</FONT>                                var16 = var24 - par3;<a name="line.3435"></a>
<FONT color="green">3436</FONT>                                var17 = var12 - par4;<a name="line.3436"></a>
<FONT color="green">3437</FONT>    <a name="line.3437"></a>
<FONT color="green">3438</FONT>                                if (var15 &lt; 0)<a name="line.3438"></a>
<FONT color="green">3439</FONT>                                {<a name="line.3439"></a>
<FONT color="green">3440</FONT>                                    var15 = -var15;<a name="line.3440"></a>
<FONT color="green">3441</FONT>                                }<a name="line.3441"></a>
<FONT color="green">3442</FONT>    <a name="line.3442"></a>
<FONT color="green">3443</FONT>                                if (var16 &lt; 0)<a name="line.3443"></a>
<FONT color="green">3444</FONT>                                {<a name="line.3444"></a>
<FONT color="green">3445</FONT>                                    var16 = -var16;<a name="line.3445"></a>
<FONT color="green">3446</FONT>                                }<a name="line.3446"></a>
<FONT color="green">3447</FONT>    <a name="line.3447"></a>
<FONT color="green">3448</FONT>                                if (var17 &lt; 0)<a name="line.3448"></a>
<FONT color="green">3449</FONT>                                {<a name="line.3449"></a>
<FONT color="green">3450</FONT>                                    var17 = -var17;<a name="line.3450"></a>
<FONT color="green">3451</FONT>                                }<a name="line.3451"></a>
<FONT color="green">3452</FONT>    <a name="line.3452"></a>
<FONT color="green">3453</FONT>                                if (var15 + var16 + var17 &lt; 17)<a name="line.3453"></a>
<FONT color="green">3454</FONT>                                {<a name="line.3454"></a>
<FONT color="green">3455</FONT>                                    for (var18 = 0; var18 &lt; 6; ++var18)<a name="line.3455"></a>
<FONT color="green">3456</FONT>                                    {<a name="line.3456"></a>
<FONT color="green">3457</FONT>                                        var19 = var18 % 2 * 2 - 1;<a name="line.3457"></a>
<FONT color="green">3458</FONT>                                        int var20 = var10 + var18 / 2 % 3 / 2 * var19;<a name="line.3458"></a>
<FONT color="green">3459</FONT>                                        int var21 = var24 + (var18 / 2 + 1) % 3 / 2 * var19;<a name="line.3459"></a>
<FONT color="green">3460</FONT>                                        int var22 = var12 + (var18 / 2 + 2) % 3 / 2 * var19;<a name="line.3460"></a>
<FONT color="green">3461</FONT>                                        var14 = this.getSavedLightValue(par1EnumSkyBlock, var20, var21, var22);<a name="line.3461"></a>
<FONT color="green">3462</FONT>                                        int var23 = this.getBlockLightOpacity(var20, var21, var22);<a name="line.3462"></a>
<FONT color="green">3463</FONT>    <a name="line.3463"></a>
<FONT color="green">3464</FONT>                                        if (var23 == 0)<a name="line.3464"></a>
<FONT color="green">3465</FONT>                                        {<a name="line.3465"></a>
<FONT color="green">3466</FONT>                                            var23 = 1;<a name="line.3466"></a>
<FONT color="green">3467</FONT>                                        }<a name="line.3467"></a>
<FONT color="green">3468</FONT>    <a name="line.3468"></a>
<FONT color="green">3469</FONT>                                        if (var14 == var13 - var23 &amp;&amp; var6 &lt; this.lightUpdateBlockList.length)<a name="line.3469"></a>
<FONT color="green">3470</FONT>                                        {<a name="line.3470"></a>
<FONT color="green">3471</FONT>                                            this.lightUpdateBlockList[var6++] = var20 - par2 + 32 + (var21 - par3 + 32 &lt;&lt; 6) + (var22 - par4 + 32 &lt;&lt; 12) + (var13 - var23 &lt;&lt; 18);<a name="line.3471"></a>
<FONT color="green">3472</FONT>                                        }<a name="line.3472"></a>
<FONT color="green">3473</FONT>                                    }<a name="line.3473"></a>
<FONT color="green">3474</FONT>                                }<a name="line.3474"></a>
<FONT color="green">3475</FONT>                            }<a name="line.3475"></a>
<FONT color="green">3476</FONT>                        }<a name="line.3476"></a>
<FONT color="green">3477</FONT>                    }<a name="line.3477"></a>
<FONT color="green">3478</FONT>    <a name="line.3478"></a>
<FONT color="green">3479</FONT>                    var5 = 0;<a name="line.3479"></a>
<FONT color="green">3480</FONT>                }<a name="line.3480"></a>
<FONT color="green">3481</FONT>    <a name="line.3481"></a>
<FONT color="green">3482</FONT>                this.theProfiler.endSection();<a name="line.3482"></a>
<FONT color="green">3483</FONT>                this.theProfiler.startSection("checkedPosition &lt; toCheckCount");<a name="line.3483"></a>
<FONT color="green">3484</FONT>    <a name="line.3484"></a>
<FONT color="green">3485</FONT>                while (var5 &lt; var6)<a name="line.3485"></a>
<FONT color="green">3486</FONT>                {<a name="line.3486"></a>
<FONT color="green">3487</FONT>                    var9 = this.lightUpdateBlockList[var5++];<a name="line.3487"></a>
<FONT color="green">3488</FONT>                    var10 = (var9 &amp; 63) - 32 + par2;<a name="line.3488"></a>
<FONT color="green">3489</FONT>                    var24 = (var9 &gt;&gt; 6 &amp; 63) - 32 + par3;<a name="line.3489"></a>
<FONT color="green">3490</FONT>                    var12 = (var9 &gt;&gt; 12 &amp; 63) - 32 + par4;<a name="line.3490"></a>
<FONT color="green">3491</FONT>                    var13 = this.getSavedLightValue(par1EnumSkyBlock, var10, var24, var12);<a name="line.3491"></a>
<FONT color="green">3492</FONT>                    var14 = this.getBlockId(var10, var24, var12);<a name="line.3492"></a>
<FONT color="green">3493</FONT>                    var15 = this.getBlockLightOpacity(var10, var24, var12);<a name="line.3493"></a>
<FONT color="green">3494</FONT>    <a name="line.3494"></a>
<FONT color="green">3495</FONT>                    if (var15 == 0)<a name="line.3495"></a>
<FONT color="green">3496</FONT>                    {<a name="line.3496"></a>
<FONT color="green">3497</FONT>                        var15 = 1;<a name="line.3497"></a>
<FONT color="green">3498</FONT>                    }<a name="line.3498"></a>
<FONT color="green">3499</FONT>    <a name="line.3499"></a>
<FONT color="green">3500</FONT>                    boolean var25 = false;<a name="line.3500"></a>
<FONT color="green">3501</FONT>    <a name="line.3501"></a>
<FONT color="green">3502</FONT>                    if (par1EnumSkyBlock == EnumSkyBlock.Sky)<a name="line.3502"></a>
<FONT color="green">3503</FONT>                    {<a name="line.3503"></a>
<FONT color="green">3504</FONT>                        var16 = this.computeSkyLightValue(var13, var10, var24, var12, var14, var15);<a name="line.3504"></a>
<FONT color="green">3505</FONT>                    }<a name="line.3505"></a>
<FONT color="green">3506</FONT>                    else<a name="line.3506"></a>
<FONT color="green">3507</FONT>                    {<a name="line.3507"></a>
<FONT color="green">3508</FONT>                        var16 = this.computeBlockLightValue(var13, var10, var24, var12, var14, var15);<a name="line.3508"></a>
<FONT color="green">3509</FONT>                    }<a name="line.3509"></a>
<FONT color="green">3510</FONT>    <a name="line.3510"></a>
<FONT color="green">3511</FONT>                    if (var16 != var13)<a name="line.3511"></a>
<FONT color="green">3512</FONT>                    {<a name="line.3512"></a>
<FONT color="green">3513</FONT>                        this.setLightValue(par1EnumSkyBlock, var10, var24, var12, var16);<a name="line.3513"></a>
<FONT color="green">3514</FONT>    <a name="line.3514"></a>
<FONT color="green">3515</FONT>                        if (var16 &gt; var13)<a name="line.3515"></a>
<FONT color="green">3516</FONT>                        {<a name="line.3516"></a>
<FONT color="green">3517</FONT>                            var17 = var10 - par2;<a name="line.3517"></a>
<FONT color="green">3518</FONT>                            var18 = var24 - par3;<a name="line.3518"></a>
<FONT color="green">3519</FONT>                            var19 = var12 - par4;<a name="line.3519"></a>
<FONT color="green">3520</FONT>    <a name="line.3520"></a>
<FONT color="green">3521</FONT>                            if (var17 &lt; 0)<a name="line.3521"></a>
<FONT color="green">3522</FONT>                            {<a name="line.3522"></a>
<FONT color="green">3523</FONT>                                var17 = -var17;<a name="line.3523"></a>
<FONT color="green">3524</FONT>                            }<a name="line.3524"></a>
<FONT color="green">3525</FONT>    <a name="line.3525"></a>
<FONT color="green">3526</FONT>                            if (var18 &lt; 0)<a name="line.3526"></a>
<FONT color="green">3527</FONT>                            {<a name="line.3527"></a>
<FONT color="green">3528</FONT>                                var18 = -var18;<a name="line.3528"></a>
<FONT color="green">3529</FONT>                            }<a name="line.3529"></a>
<FONT color="green">3530</FONT>    <a name="line.3530"></a>
<FONT color="green">3531</FONT>                            if (var19 &lt; 0)<a name="line.3531"></a>
<FONT color="green">3532</FONT>                            {<a name="line.3532"></a>
<FONT color="green">3533</FONT>                                var19 = -var19;<a name="line.3533"></a>
<FONT color="green">3534</FONT>                            }<a name="line.3534"></a>
<FONT color="green">3535</FONT>    <a name="line.3535"></a>
<FONT color="green">3536</FONT>                            if (var17 + var18 + var19 &lt; 17 &amp;&amp; var6 &lt; this.lightUpdateBlockList.length - 6)<a name="line.3536"></a>
<FONT color="green">3537</FONT>                            {<a name="line.3537"></a>
<FONT color="green">3538</FONT>                                if (this.getSavedLightValue(par1EnumSkyBlock, var10 - 1, var24, var12) &lt; var16)<a name="line.3538"></a>
<FONT color="green">3539</FONT>                                {<a name="line.3539"></a>
<FONT color="green">3540</FONT>                                    this.lightUpdateBlockList[var6++] = var10 - 1 - par2 + 32 + (var24 - par3 + 32 &lt;&lt; 6) + (var12 - par4 + 32 &lt;&lt; 12);<a name="line.3540"></a>
<FONT color="green">3541</FONT>                                }<a name="line.3541"></a>
<FONT color="green">3542</FONT>    <a name="line.3542"></a>
<FONT color="green">3543</FONT>                                if (this.getSavedLightValue(par1EnumSkyBlock, var10 + 1, var24, var12) &lt; var16)<a name="line.3543"></a>
<FONT color="green">3544</FONT>                                {<a name="line.3544"></a>
<FONT color="green">3545</FONT>                                    this.lightUpdateBlockList[var6++] = var10 + 1 - par2 + 32 + (var24 - par3 + 32 &lt;&lt; 6) + (var12 - par4 + 32 &lt;&lt; 12);<a name="line.3545"></a>
<FONT color="green">3546</FONT>                                }<a name="line.3546"></a>
<FONT color="green">3547</FONT>    <a name="line.3547"></a>
<FONT color="green">3548</FONT>                                if (this.getSavedLightValue(par1EnumSkyBlock, var10, var24 - 1, var12) &lt; var16)<a name="line.3548"></a>
<FONT color="green">3549</FONT>                                {<a name="line.3549"></a>
<FONT color="green">3550</FONT>                                    this.lightUpdateBlockList[var6++] = var10 - par2 + 32 + (var24 - 1 - par3 + 32 &lt;&lt; 6) + (var12 - par4 + 32 &lt;&lt; 12);<a name="line.3550"></a>
<FONT color="green">3551</FONT>                                }<a name="line.3551"></a>
<FONT color="green">3552</FONT>    <a name="line.3552"></a>
<FONT color="green">3553</FONT>                                if (this.getSavedLightValue(par1EnumSkyBlock, var10, var24 + 1, var12) &lt; var16)<a name="line.3553"></a>
<FONT color="green">3554</FONT>                                {<a name="line.3554"></a>
<FONT color="green">3555</FONT>                                    this.lightUpdateBlockList[var6++] = var10 - par2 + 32 + (var24 + 1 - par3 + 32 &lt;&lt; 6) + (var12 - par4 + 32 &lt;&lt; 12);<a name="line.3555"></a>
<FONT color="green">3556</FONT>                                }<a name="line.3556"></a>
<FONT color="green">3557</FONT>    <a name="line.3557"></a>
<FONT color="green">3558</FONT>                                if (this.getSavedLightValue(par1EnumSkyBlock, var10, var24, var12 - 1) &lt; var16)<a name="line.3558"></a>
<FONT color="green">3559</FONT>                                {<a name="line.3559"></a>
<FONT color="green">3560</FONT>                                    this.lightUpdateBlockList[var6++] = var10 - par2 + 32 + (var24 - par3 + 32 &lt;&lt; 6) + (var12 - 1 - par4 + 32 &lt;&lt; 12);<a name="line.3560"></a>
<FONT color="green">3561</FONT>                                }<a name="line.3561"></a>
<FONT color="green">3562</FONT>    <a name="line.3562"></a>
<FONT color="green">3563</FONT>                                if (this.getSavedLightValue(par1EnumSkyBlock, var10, var24, var12 + 1) &lt; var16)<a name="line.3563"></a>
<FONT color="green">3564</FONT>                                {<a name="line.3564"></a>
<FONT color="green">3565</FONT>                                    this.lightUpdateBlockList[var6++] = var10 - par2 + 32 + (var24 - par3 + 32 &lt;&lt; 6) + (var12 + 1 - par4 + 32 &lt;&lt; 12);<a name="line.3565"></a>
<FONT color="green">3566</FONT>                                }<a name="line.3566"></a>
<FONT color="green">3567</FONT>                            }<a name="line.3567"></a>
<FONT color="green">3568</FONT>                        }<a name="line.3568"></a>
<FONT color="green">3569</FONT>                    }<a name="line.3569"></a>
<FONT color="green">3570</FONT>                }<a name="line.3570"></a>
<FONT color="green">3571</FONT>    <a name="line.3571"></a>
<FONT color="green">3572</FONT>                this.theProfiler.endSection();<a name="line.3572"></a>
<FONT color="green">3573</FONT>            }<a name="line.3573"></a>
<FONT color="green">3574</FONT>        }<a name="line.3574"></a>
<FONT color="green">3575</FONT>    <a name="line.3575"></a>
<FONT color="green">3576</FONT>        /**<a name="line.3576"></a>
<FONT color="green">3577</FONT>         * Runs through the list of updates to run and ticks them<a name="line.3577"></a>
<FONT color="green">3578</FONT>         */<a name="line.3578"></a>
<FONT color="green">3579</FONT>        public boolean tickUpdates(boolean par1)<a name="line.3579"></a>
<FONT color="green">3580</FONT>        {<a name="line.3580"></a>
<FONT color="green">3581</FONT>            return false;<a name="line.3581"></a>
<FONT color="green">3582</FONT>        }<a name="line.3582"></a>
<FONT color="green">3583</FONT>    <a name="line.3583"></a>
<FONT color="green">3584</FONT>        public List getPendingBlockUpdates(Chunk par1Chunk, boolean par2)<a name="line.3584"></a>
<FONT color="green">3585</FONT>        {<a name="line.3585"></a>
<FONT color="green">3586</FONT>            return null;<a name="line.3586"></a>
<FONT color="green">3587</FONT>        }<a name="line.3587"></a>
<FONT color="green">3588</FONT>    <a name="line.3588"></a>
<FONT color="green">3589</FONT>        /**<a name="line.3589"></a>
<FONT color="green">3590</FONT>         * Will get all entities within the specified AABB excluding the one passed into it. Args: entityToExclude, aabb<a name="line.3590"></a>
<FONT color="green">3591</FONT>         */<a name="line.3591"></a>
<FONT color="green">3592</FONT>        public List getEntitiesWithinAABBExcludingEntity(Entity par1Entity, AxisAlignedBB par2AxisAlignedBB)<a name="line.3592"></a>
<FONT color="green">3593</FONT>        {<a name="line.3593"></a>
<FONT color="green">3594</FONT>            this.entitiesWithinAABBExcludingEntity.clear();<a name="line.3594"></a>
<FONT color="green">3595</FONT>            int var3 = MathHelper.floor_double((par2AxisAlignedBB.minX - MAX_ENTITY_RADIUS) / 16.0D);<a name="line.3595"></a>
<FONT color="green">3596</FONT>            int var4 = MathHelper.floor_double((par2AxisAlignedBB.maxX + MAX_ENTITY_RADIUS) / 16.0D);<a name="line.3596"></a>
<FONT color="green">3597</FONT>            int var5 = MathHelper.floor_double((par2AxisAlignedBB.minZ - MAX_ENTITY_RADIUS) / 16.0D);<a name="line.3597"></a>
<FONT color="green">3598</FONT>            int var6 = MathHelper.floor_double((par2AxisAlignedBB.maxZ + MAX_ENTITY_RADIUS) / 16.0D);<a name="line.3598"></a>
<FONT color="green">3599</FONT>    <a name="line.3599"></a>
<FONT color="green">3600</FONT>            for (int var7 = var3; var7 &lt;= var4; ++var7)<a name="line.3600"></a>
<FONT color="green">3601</FONT>            {<a name="line.3601"></a>
<FONT color="green">3602</FONT>                for (int var8 = var5; var8 &lt;= var6; ++var8)<a name="line.3602"></a>
<FONT color="green">3603</FONT>                {<a name="line.3603"></a>
<FONT color="green">3604</FONT>                    if (this.chunkExists(var7, var8))<a name="line.3604"></a>
<FONT color="green">3605</FONT>                    {<a name="line.3605"></a>
<FONT color="green">3606</FONT>                        this.getChunkFromChunkCoords(var7, var8).getEntitiesWithinAABBForEntity(par1Entity, par2AxisAlignedBB, this.entitiesWithinAABBExcludingEntity);<a name="line.3606"></a>
<FONT color="green">3607</FONT>                    }<a name="line.3607"></a>
<FONT color="green">3608</FONT>                }<a name="line.3608"></a>
<FONT color="green">3609</FONT>            }<a name="line.3609"></a>
<FONT color="green">3610</FONT>    <a name="line.3610"></a>
<FONT color="green">3611</FONT>            return this.entitiesWithinAABBExcludingEntity;<a name="line.3611"></a>
<FONT color="green">3612</FONT>        }<a name="line.3612"></a>
<FONT color="green">3613</FONT>    <a name="line.3613"></a>
<FONT color="green">3614</FONT>        /**<a name="line.3614"></a>
<FONT color="green">3615</FONT>         * Returns all entities of the specified class type which intersect with the AABB. Args: entityClass, aabb<a name="line.3615"></a>
<FONT color="green">3616</FONT>         */<a name="line.3616"></a>
<FONT color="green">3617</FONT>        public List getEntitiesWithinAABB(Class par1Class, AxisAlignedBB par2AxisAlignedBB)<a name="line.3617"></a>
<FONT color="green">3618</FONT>        {<a name="line.3618"></a>
<FONT color="green">3619</FONT>            return this.selectEntitiesWithinAABB(par1Class, par2AxisAlignedBB, (IEntitySelector)null);<a name="line.3619"></a>
<FONT color="green">3620</FONT>        }<a name="line.3620"></a>
<FONT color="green">3621</FONT>    <a name="line.3621"></a>
<FONT color="green">3622</FONT>        public List selectEntitiesWithinAABB(Class par1Class, AxisAlignedBB par2AxisAlignedBB, IEntitySelector par3IEntitySelector)<a name="line.3622"></a>
<FONT color="green">3623</FONT>        {<a name="line.3623"></a>
<FONT color="green">3624</FONT>            int var4 = MathHelper.floor_double((par2AxisAlignedBB.minX - MAX_ENTITY_RADIUS) / 16.0D);<a name="line.3624"></a>
<FONT color="green">3625</FONT>            int var5 = MathHelper.floor_double((par2AxisAlignedBB.maxX + MAX_ENTITY_RADIUS) / 16.0D);<a name="line.3625"></a>
<FONT color="green">3626</FONT>            int var6 = MathHelper.floor_double((par2AxisAlignedBB.minZ - MAX_ENTITY_RADIUS) / 16.0D);<a name="line.3626"></a>
<FONT color="green">3627</FONT>            int var7 = MathHelper.floor_double((par2AxisAlignedBB.maxZ + MAX_ENTITY_RADIUS) / 16.0D);<a name="line.3627"></a>
<FONT color="green">3628</FONT>            ArrayList var8 = new ArrayList();<a name="line.3628"></a>
<FONT color="green">3629</FONT>    <a name="line.3629"></a>
<FONT color="green">3630</FONT>            for (int var9 = var4; var9 &lt;= var5; ++var9)<a name="line.3630"></a>
<FONT color="green">3631</FONT>            {<a name="line.3631"></a>
<FONT color="green">3632</FONT>                for (int var10 = var6; var10 &lt;= var7; ++var10)<a name="line.3632"></a>
<FONT color="green">3633</FONT>                {<a name="line.3633"></a>
<FONT color="green">3634</FONT>                    if (this.chunkExists(var9, var10))<a name="line.3634"></a>
<FONT color="green">3635</FONT>                    {<a name="line.3635"></a>
<FONT color="green">3636</FONT>                        this.getChunkFromChunkCoords(var9, var10).getEntitiesOfTypeWithinAAAB(par1Class, par2AxisAlignedBB, var8, par3IEntitySelector);<a name="line.3636"></a>
<FONT color="green">3637</FONT>                    }<a name="line.3637"></a>
<FONT color="green">3638</FONT>                }<a name="line.3638"></a>
<FONT color="green">3639</FONT>            }<a name="line.3639"></a>
<FONT color="green">3640</FONT>    <a name="line.3640"></a>
<FONT color="green">3641</FONT>            return var8;<a name="line.3641"></a>
<FONT color="green">3642</FONT>        }<a name="line.3642"></a>
<FONT color="green">3643</FONT>    <a name="line.3643"></a>
<FONT color="green">3644</FONT>        public Entity findNearestEntityWithinAABB(Class par1Class, AxisAlignedBB par2AxisAlignedBB, Entity par3Entity)<a name="line.3644"></a>
<FONT color="green">3645</FONT>        {<a name="line.3645"></a>
<FONT color="green">3646</FONT>            List var4 = this.getEntitiesWithinAABB(par1Class, par2AxisAlignedBB);<a name="line.3646"></a>
<FONT color="green">3647</FONT>            Entity var5 = null;<a name="line.3647"></a>
<FONT color="green">3648</FONT>            double var6 = Double.MAX_VALUE;<a name="line.3648"></a>
<FONT color="green">3649</FONT>    <a name="line.3649"></a>
<FONT color="green">3650</FONT>            for (int var8 = 0; var8 &lt; var4.size(); ++var8)<a name="line.3650"></a>
<FONT color="green">3651</FONT>            {<a name="line.3651"></a>
<FONT color="green">3652</FONT>                Entity var9 = (Entity)var4.get(var8);<a name="line.3652"></a>
<FONT color="green">3653</FONT>    <a name="line.3653"></a>
<FONT color="green">3654</FONT>                if (var9 != par3Entity)<a name="line.3654"></a>
<FONT color="green">3655</FONT>                {<a name="line.3655"></a>
<FONT color="green">3656</FONT>                    double var10 = par3Entity.getDistanceSqToEntity(var9);<a name="line.3656"></a>
<FONT color="green">3657</FONT>    <a name="line.3657"></a>
<FONT color="green">3658</FONT>                    if (var10 &lt;= var6)<a name="line.3658"></a>
<FONT color="green">3659</FONT>                    {<a name="line.3659"></a>
<FONT color="green">3660</FONT>                        var5 = var9;<a name="line.3660"></a>
<FONT color="green">3661</FONT>                        var6 = var10;<a name="line.3661"></a>
<FONT color="green">3662</FONT>                    }<a name="line.3662"></a>
<FONT color="green">3663</FONT>                }<a name="line.3663"></a>
<FONT color="green">3664</FONT>            }<a name="line.3664"></a>
<FONT color="green">3665</FONT>    <a name="line.3665"></a>
<FONT color="green">3666</FONT>            return var5;<a name="line.3666"></a>
<FONT color="green">3667</FONT>        }<a name="line.3667"></a>
<FONT color="green">3668</FONT>    <a name="line.3668"></a>
<FONT color="green">3669</FONT>        /**<a name="line.3669"></a>
<FONT color="green">3670</FONT>         * Returns the Entity with the given ID, or null if it doesn't exist in this World.<a name="line.3670"></a>
<FONT color="green">3671</FONT>         */<a name="line.3671"></a>
<FONT color="green">3672</FONT>        public abstract Entity getEntityByID(int var1);<a name="line.3672"></a>
<FONT color="green">3673</FONT>    <a name="line.3673"></a>
<FONT color="green">3674</FONT>        @SideOnly(Side.CLIENT)<a name="line.3674"></a>
<FONT color="green">3675</FONT>    <a name="line.3675"></a>
<FONT color="green">3676</FONT>        /**<a name="line.3676"></a>
<FONT color="green">3677</FONT>         * Accessor for world Loaded Entity List<a name="line.3677"></a>
<FONT color="green">3678</FONT>         */<a name="line.3678"></a>
<FONT color="green">3679</FONT>        public List getLoadedEntityList()<a name="line.3679"></a>
<FONT color="green">3680</FONT>        {<a name="line.3680"></a>
<FONT color="green">3681</FONT>            return this.loadedEntityList;<a name="line.3681"></a>
<FONT color="green">3682</FONT>        }<a name="line.3682"></a>
<FONT color="green">3683</FONT>    <a name="line.3683"></a>
<FONT color="green">3684</FONT>        /**<a name="line.3684"></a>
<FONT color="green">3685</FONT>         * marks the chunk that contains this tilentity as modified and then calls worldAccesses.doNothingWithTileEntity<a name="line.3685"></a>
<FONT color="green">3686</FONT>         */<a name="line.3686"></a>
<FONT color="green">3687</FONT>        public void updateTileEntityChunkAndDoNothing(int par1, int par2, int par3, TileEntity par4TileEntity)<a name="line.3687"></a>
<FONT color="green">3688</FONT>        {<a name="line.3688"></a>
<FONT color="green">3689</FONT>            if (this.blockExists(par1, par2, par3))<a name="line.3689"></a>
<FONT color="green">3690</FONT>            {<a name="line.3690"></a>
<FONT color="green">3691</FONT>                this.getChunkFromBlockCoords(par1, par3).setChunkModified();<a name="line.3691"></a>
<FONT color="green">3692</FONT>            }<a name="line.3692"></a>
<FONT color="green">3693</FONT>        }<a name="line.3693"></a>
<FONT color="green">3694</FONT>    <a name="line.3694"></a>
<FONT color="green">3695</FONT>        /**<a name="line.3695"></a>
<FONT color="green">3696</FONT>         * Counts how many entities of an entity class exist in the world. Args: entityClass<a name="line.3696"></a>
<FONT color="green">3697</FONT>         */<a name="line.3697"></a>
<FONT color="green">3698</FONT>        public int countEntities(Class par1Class)<a name="line.3698"></a>
<FONT color="green">3699</FONT>        {<a name="line.3699"></a>
<FONT color="green">3700</FONT>            int var2 = 0;<a name="line.3700"></a>
<FONT color="green">3701</FONT>    <a name="line.3701"></a>
<FONT color="green">3702</FONT>            for (int var3 = 0; var3 &lt; this.loadedEntityList.size(); ++var3)<a name="line.3702"></a>
<FONT color="green">3703</FONT>            {<a name="line.3703"></a>
<FONT color="green">3704</FONT>                Entity var4 = (Entity)this.loadedEntityList.get(var3);<a name="line.3704"></a>
<FONT color="green">3705</FONT>    <a name="line.3705"></a>
<FONT color="green">3706</FONT>                if (par1Class.isAssignableFrom(var4.getClass()))<a name="line.3706"></a>
<FONT color="green">3707</FONT>                {<a name="line.3707"></a>
<FONT color="green">3708</FONT>                    ++var2;<a name="line.3708"></a>
<FONT color="green">3709</FONT>                }<a name="line.3709"></a>
<FONT color="green">3710</FONT>            }<a name="line.3710"></a>
<FONT color="green">3711</FONT>    <a name="line.3711"></a>
<FONT color="green">3712</FONT>            return var2;<a name="line.3712"></a>
<FONT color="green">3713</FONT>        }<a name="line.3713"></a>
<FONT color="green">3714</FONT>    <a name="line.3714"></a>
<FONT color="green">3715</FONT>        /**<a name="line.3715"></a>
<FONT color="green">3716</FONT>         * adds entities to the loaded entities list, and loads thier skins.<a name="line.3716"></a>
<FONT color="green">3717</FONT>         */<a name="line.3717"></a>
<FONT color="green">3718</FONT>        public void addLoadedEntities(List par1List)<a name="line.3718"></a>
<FONT color="green">3719</FONT>        {<a name="line.3719"></a>
<FONT color="green">3720</FONT>            for (int var2 = 0; var2 &lt; par1List.size(); ++var2)<a name="line.3720"></a>
<FONT color="green">3721</FONT>            {<a name="line.3721"></a>
<FONT color="green">3722</FONT>                Entity entity = (Entity)par1List.get(var2);<a name="line.3722"></a>
<FONT color="green">3723</FONT>                if (!MinecraftForge.EVENT_BUS.post(new EntityJoinWorldEvent(entity, this)))<a name="line.3723"></a>
<FONT color="green">3724</FONT>                {<a name="line.3724"></a>
<FONT color="green">3725</FONT>                    loadedEntityList.add(entity);<a name="line.3725"></a>
<FONT color="green">3726</FONT>                    this.obtainEntitySkin(entity);<a name="line.3726"></a>
<FONT color="green">3727</FONT>                }<a name="line.3727"></a>
<FONT color="green">3728</FONT>            }<a name="line.3728"></a>
<FONT color="green">3729</FONT>        }<a name="line.3729"></a>
<FONT color="green">3730</FONT>    <a name="line.3730"></a>
<FONT color="green">3731</FONT>        /**<a name="line.3731"></a>
<FONT color="green">3732</FONT>         * Adds a list of entities to be unloaded on the next pass of World.updateEntities()<a name="line.3732"></a>
<FONT color="green">3733</FONT>         */<a name="line.3733"></a>
<FONT color="green">3734</FONT>        public void unloadEntities(List par1List)<a name="line.3734"></a>
<FONT color="green">3735</FONT>        {<a name="line.3735"></a>
<FONT color="green">3736</FONT>            this.unloadedEntityList.addAll(par1List);<a name="line.3736"></a>
<FONT color="green">3737</FONT>        }<a name="line.3737"></a>
<FONT color="green">3738</FONT>    <a name="line.3738"></a>
<FONT color="green">3739</FONT>        /**<a name="line.3739"></a>
<FONT color="green">3740</FONT>         * Returns true if the given Entity can be placed on the given side of the given block position.<a name="line.3740"></a>
<FONT color="green">3741</FONT>         */<a name="line.3741"></a>
<FONT color="green">3742</FONT>        public boolean canPlaceEntityOnSide(int par1, int par2, int par3, int par4, boolean par5, int par6, Entity par7Entity)<a name="line.3742"></a>
<FONT color="green">3743</FONT>        {<a name="line.3743"></a>
<FONT color="green">3744</FONT>            int var8 = this.getBlockId(par2, par3, par4);<a name="line.3744"></a>
<FONT color="green">3745</FONT>            Block var9 = Block.blocksList[var8];<a name="line.3745"></a>
<FONT color="green">3746</FONT>            Block var10 = Block.blocksList[par1];<a name="line.3746"></a>
<FONT color="green">3747</FONT>            AxisAlignedBB var11 = var10.getCollisionBoundingBoxFromPool(this, par2, par3, par4);<a name="line.3747"></a>
<FONT color="green">3748</FONT>    <a name="line.3748"></a>
<FONT color="green">3749</FONT>            if (par5)<a name="line.3749"></a>
<FONT color="green">3750</FONT>            {<a name="line.3750"></a>
<FONT color="green">3751</FONT>                var11 = null;<a name="line.3751"></a>
<FONT color="green">3752</FONT>            }<a name="line.3752"></a>
<FONT color="green">3753</FONT>    <a name="line.3753"></a>
<FONT color="green">3754</FONT>            if (var11 != null &amp;&amp; !this.checkIfAABBIsClearExcludingEntity(var11, par7Entity))<a name="line.3754"></a>
<FONT color="green">3755</FONT>            {<a name="line.3755"></a>
<FONT color="green">3756</FONT>                return false;<a name="line.3756"></a>
<FONT color="green">3757</FONT>            }<a name="line.3757"></a>
<FONT color="green">3758</FONT>            else<a name="line.3758"></a>
<FONT color="green">3759</FONT>            {<a name="line.3759"></a>
<FONT color="green">3760</FONT>                if (var9 != null &amp;&amp; (var9 == Block.waterMoving || var9 == Block.waterStill || var9 == Block.lavaMoving || var9 == Block.lavaStill || var9 == Block.fire || var9.blockMaterial.isReplaceable()))<a name="line.3760"></a>
<FONT color="green">3761</FONT>                {<a name="line.3761"></a>
<FONT color="green">3762</FONT>                    var9 = null;<a name="line.3762"></a>
<FONT color="green">3763</FONT>                }<a name="line.3763"></a>
<FONT color="green">3764</FONT>    <a name="line.3764"></a>
<FONT color="green">3765</FONT>                if (var9 != null &amp;&amp; var9.isBlockReplaceable(this, par2, par3, par4))<a name="line.3765"></a>
<FONT color="green">3766</FONT>                {<a name="line.3766"></a>
<FONT color="green">3767</FONT>                    var9 = null;<a name="line.3767"></a>
<FONT color="green">3768</FONT>                }<a name="line.3768"></a>
<FONT color="green">3769</FONT>    <a name="line.3769"></a>
<FONT color="green">3770</FONT>                return var9 != null &amp;&amp; var9.blockMaterial == Material.circuits &amp;&amp; var10 == Block.anvil ? true : par1 &gt; 0 &amp;&amp; var9 == null &amp;&amp; var10.canPlaceBlockOnSide(this, par2, par3, par4, par6);<a name="line.3770"></a>
<FONT color="green">3771</FONT>            }<a name="line.3771"></a>
<FONT color="green">3772</FONT>        }<a name="line.3772"></a>
<FONT color="green">3773</FONT>    <a name="line.3773"></a>
<FONT color="green">3774</FONT>        public PathEntity getPathEntityToEntity(Entity par1Entity, Entity par2Entity, float par3, boolean par4, boolean par5, boolean par6, boolean par7)<a name="line.3774"></a>
<FONT color="green">3775</FONT>        {<a name="line.3775"></a>
<FONT color="green">3776</FONT>            this.theProfiler.startSection("pathfind");<a name="line.3776"></a>
<FONT color="green">3777</FONT>            int var8 = MathHelper.floor_double(par1Entity.posX);<a name="line.3777"></a>
<FONT color="green">3778</FONT>            int var9 = MathHelper.floor_double(par1Entity.posY + 1.0D);<a name="line.3778"></a>
<FONT color="green">3779</FONT>            int var10 = MathHelper.floor_double(par1Entity.posZ);<a name="line.3779"></a>
<FONT color="green">3780</FONT>            int var11 = (int)(par3 + 16.0F);<a name="line.3780"></a>
<FONT color="green">3781</FONT>            int var12 = var8 - var11;<a name="line.3781"></a>
<FONT color="green">3782</FONT>            int var13 = var9 - var11;<a name="line.3782"></a>
<FONT color="green">3783</FONT>            int var14 = var10 - var11;<a name="line.3783"></a>
<FONT color="green">3784</FONT>            int var15 = var8 + var11;<a name="line.3784"></a>
<FONT color="green">3785</FONT>            int var16 = var9 + var11;<a name="line.3785"></a>
<FONT color="green">3786</FONT>            int var17 = var10 + var11;<a name="line.3786"></a>
<FONT color="green">3787</FONT>            ChunkCache var18 = new ChunkCache(this, var12, var13, var14, var15, var16, var17);<a name="line.3787"></a>
<FONT color="green">3788</FONT>            PathEntity var19 = (new PathFinder(var18, par4, par5, par6, par7)).createEntityPathTo(par1Entity, par2Entity, par3);<a name="line.3788"></a>
<FONT color="green">3789</FONT>            this.theProfiler.endSection();<a name="line.3789"></a>
<FONT color="green">3790</FONT>            return var19;<a name="line.3790"></a>
<FONT color="green">3791</FONT>        }<a name="line.3791"></a>
<FONT color="green">3792</FONT>    <a name="line.3792"></a>
<FONT color="green">3793</FONT>        public PathEntity getEntityPathToXYZ(Entity par1Entity, int par2, int par3, int par4, float par5, boolean par6, boolean par7, boolean par8, boolean par9)<a name="line.3793"></a>
<FONT color="green">3794</FONT>        {<a name="line.3794"></a>
<FONT color="green">3795</FONT>            this.theProfiler.startSection("pathfind");<a name="line.3795"></a>
<FONT color="green">3796</FONT>            int var10 = MathHelper.floor_double(par1Entity.posX);<a name="line.3796"></a>
<FONT color="green">3797</FONT>            int var11 = MathHelper.floor_double(par1Entity.posY);<a name="line.3797"></a>
<FONT color="green">3798</FONT>            int var12 = MathHelper.floor_double(par1Entity.posZ);<a name="line.3798"></a>
<FONT color="green">3799</FONT>            int var13 = (int)(par5 + 8.0F);<a name="line.3799"></a>
<FONT color="green">3800</FONT>            int var14 = var10 - var13;<a name="line.3800"></a>
<FONT color="green">3801</FONT>            int var15 = var11 - var13;<a name="line.3801"></a>
<FONT color="green">3802</FONT>            int var16 = var12 - var13;<a name="line.3802"></a>
<FONT color="green">3803</FONT>            int var17 = var10 + var13;<a name="line.3803"></a>
<FONT color="green">3804</FONT>            int var18 = var11 + var13;<a name="line.3804"></a>
<FONT color="green">3805</FONT>            int var19 = var12 + var13;<a name="line.3805"></a>
<FONT color="green">3806</FONT>            ChunkCache var20 = new ChunkCache(this, var14, var15, var16, var17, var18, var19);<a name="line.3806"></a>
<FONT color="green">3807</FONT>            PathEntity var21 = (new PathFinder(var20, par6, par7, par8, par9)).createEntityPathTo(par1Entity, par2, par3, par4, par5);<a name="line.3807"></a>
<FONT color="green">3808</FONT>            this.theProfiler.endSection();<a name="line.3808"></a>
<FONT color="green">3809</FONT>            return var21;<a name="line.3809"></a>
<FONT color="green">3810</FONT>        }<a name="line.3810"></a>
<FONT color="green">3811</FONT>    <a name="line.3811"></a>
<FONT color="green">3812</FONT>        /**<a name="line.3812"></a>
<FONT color="green">3813</FONT>         * Is this block powering in the specified direction Args: x, y, z, direction<a name="line.3813"></a>
<FONT color="green">3814</FONT>         */<a name="line.3814"></a>
<FONT color="green">3815</FONT>        public boolean isBlockProvidingPowerTo(int par1, int par2, int par3, int par4)<a name="line.3815"></a>
<FONT color="green">3816</FONT>        {<a name="line.3816"></a>
<FONT color="green">3817</FONT>            int var5 = this.getBlockId(par1, par2, par3);<a name="line.3817"></a>
<FONT color="green">3818</FONT>            return var5 == 0 ? false : Block.blocksList[var5].isProvidingStrongPower(this, par1, par2, par3, par4);<a name="line.3818"></a>
<FONT color="green">3819</FONT>        }<a name="line.3819"></a>
<FONT color="green">3820</FONT>    <a name="line.3820"></a>
<FONT color="green">3821</FONT>        /**<a name="line.3821"></a>
<FONT color="green">3822</FONT>         * Whether one of the neighboring blocks is putting power into this block. Args: x, y, z<a name="line.3822"></a>
<FONT color="green">3823</FONT>         */<a name="line.3823"></a>
<FONT color="green">3824</FONT>        public boolean isBlockGettingPowered(int par1, int par2, int par3)<a name="line.3824"></a>
<FONT color="green">3825</FONT>        {<a name="line.3825"></a>
<FONT color="green">3826</FONT>            return this.isBlockProvidingPowerTo(par1, par2 - 1, par3, 0) ? true : (this.isBlockProvidingPowerTo(par1, par2 + 1, par3, 1) ? true : (this.isBlockProvidingPowerTo(par1, par2, par3 - 1, 2) ? true : (this.isBlockProvidingPowerTo(par1, par2, par3 + 1, 3) ? true : (this.isBlockProvidingPowerTo(par1 - 1, par2, par3, 4) ? true : this.isBlockProvidingPowerTo(par1 + 1, par2, par3, 5)))));<a name="line.3826"></a>
<FONT color="green">3827</FONT>        }<a name="line.3827"></a>
<FONT color="green">3828</FONT>    <a name="line.3828"></a>
<FONT color="green">3829</FONT>        /**<a name="line.3829"></a>
<FONT color="green">3830</FONT>         * Is a block next to you getting powered (if its an attachable block) or is it providing power directly to you.<a name="line.3830"></a>
<FONT color="green">3831</FONT>         * Args: x, y, z, direction<a name="line.3831"></a>
<FONT color="green">3832</FONT>         */<a name="line.3832"></a>
<FONT color="green">3833</FONT>        public boolean isBlockIndirectlyProvidingPowerTo(int par1, int par2, int par3, int par4)<a name="line.3833"></a>
<FONT color="green">3834</FONT>        {<a name="line.3834"></a>
<FONT color="green">3835</FONT>            if (this.isBlockNormalCube(par1, par2, par3))<a name="line.3835"></a>
<FONT color="green">3836</FONT>            {<a name="line.3836"></a>
<FONT color="green">3837</FONT>                return this.isBlockGettingPowered(par1, par2, par3);<a name="line.3837"></a>
<FONT color="green">3838</FONT>            }<a name="line.3838"></a>
<FONT color="green">3839</FONT>            else<a name="line.3839"></a>
<FONT color="green">3840</FONT>            {<a name="line.3840"></a>
<FONT color="green">3841</FONT>                int var5 = this.getBlockId(par1, par2, par3);<a name="line.3841"></a>
<FONT color="green">3842</FONT>                return var5 == 0 ? false : Block.blocksList[var5].isProvidingWeakPower(this, par1, par2, par3, par4);<a name="line.3842"></a>
<FONT color="green">3843</FONT>            }<a name="line.3843"></a>
<FONT color="green">3844</FONT>        }<a name="line.3844"></a>
<FONT color="green">3845</FONT>    <a name="line.3845"></a>
<FONT color="green">3846</FONT>        /**<a name="line.3846"></a>
<FONT color="green">3847</FONT>         * Used to see if one of the blocks next to you or your block is getting power from a neighboring block. Used by<a name="line.3847"></a>
<FONT color="green">3848</FONT>         * items like TNT or Doors so they don't have redstone going straight into them.  Args: x, y, z<a name="line.3848"></a>
<FONT color="green">3849</FONT>         */<a name="line.3849"></a>
<FONT color="green">3850</FONT>        public boolean isBlockIndirectlyGettingPowered(int par1, int par2, int par3)<a name="line.3850"></a>
<FONT color="green">3851</FONT>        {<a name="line.3851"></a>
<FONT color="green">3852</FONT>            return this.isBlockIndirectlyProvidingPowerTo(par1, par2 - 1, par3, 0) ? true : (this.isBlockIndirectlyProvidingPowerTo(par1, par2 + 1, par3, 1) ? true : (this.isBlockIndirectlyProvidingPowerTo(par1, par2, par3 - 1, 2) ? true : (this.isBlockIndirectlyProvidingPowerTo(par1, par2, par3 + 1, 3) ? true : (this.isBlockIndirectlyProvidingPowerTo(par1 - 1, par2, par3, 4) ? true : this.isBlockIndirectlyProvidingPowerTo(par1 + 1, par2, par3, 5)))));<a name="line.3852"></a>
<FONT color="green">3853</FONT>        }<a name="line.3853"></a>
<FONT color="green">3854</FONT>    <a name="line.3854"></a>
<FONT color="green">3855</FONT>        /**<a name="line.3855"></a>
<FONT color="green">3856</FONT>         * Gets the closest player to the entity within the specified distance (if distance is less than 0 then ignored).<a name="line.3856"></a>
<FONT color="green">3857</FONT>         * Args: entity, dist<a name="line.3857"></a>
<FONT color="green">3858</FONT>         */<a name="line.3858"></a>
<FONT color="green">3859</FONT>        public EntityPlayer getClosestPlayerToEntity(Entity par1Entity, double par2)<a name="line.3859"></a>
<FONT color="green">3860</FONT>        {<a name="line.3860"></a>
<FONT color="green">3861</FONT>            return this.getClosestPlayer(par1Entity.posX, par1Entity.posY, par1Entity.posZ, par2);<a name="line.3861"></a>
<FONT color="green">3862</FONT>        }<a name="line.3862"></a>
<FONT color="green">3863</FONT>    <a name="line.3863"></a>
<FONT color="green">3864</FONT>        /**<a name="line.3864"></a>
<FONT color="green">3865</FONT>         * Gets the closest player to the point within the specified distance (distance can be set to less than 0 to not<a name="line.3865"></a>
<FONT color="green">3866</FONT>         * limit the distance). Args: x, y, z, dist<a name="line.3866"></a>
<FONT color="green">3867</FONT>         */<a name="line.3867"></a>
<FONT color="green">3868</FONT>        public EntityPlayer getClosestPlayer(double par1, double par3, double par5, double par7)<a name="line.3868"></a>
<FONT color="green">3869</FONT>        {<a name="line.3869"></a>
<FONT color="green">3870</FONT>            double var9 = -1.0D;<a name="line.3870"></a>
<FONT color="green">3871</FONT>            EntityPlayer var11 = null;<a name="line.3871"></a>
<FONT color="green">3872</FONT>    <a name="line.3872"></a>
<FONT color="green">3873</FONT>            for (int var12 = 0; var12 &lt; this.playerEntities.size(); ++var12)<a name="line.3873"></a>
<FONT color="green">3874</FONT>            {<a name="line.3874"></a>
<FONT color="green">3875</FONT>                EntityPlayer var13 = (EntityPlayer)this.playerEntities.get(var12);<a name="line.3875"></a>
<FONT color="green">3876</FONT>                double var14 = var13.getDistanceSq(par1, par3, par5);<a name="line.3876"></a>
<FONT color="green">3877</FONT>    <a name="line.3877"></a>
<FONT color="green">3878</FONT>                if ((par7 &lt; 0.0D || var14 &lt; par7 * par7) &amp;&amp; (var9 == -1.0D || var14 &lt; var9))<a name="line.3878"></a>
<FONT color="green">3879</FONT>                {<a name="line.3879"></a>
<FONT color="green">3880</FONT>                    var9 = var14;<a name="line.3880"></a>
<FONT color="green">3881</FONT>                    var11 = var13;<a name="line.3881"></a>
<FONT color="green">3882</FONT>                }<a name="line.3882"></a>
<FONT color="green">3883</FONT>            }<a name="line.3883"></a>
<FONT color="green">3884</FONT>    <a name="line.3884"></a>
<FONT color="green">3885</FONT>            return var11;<a name="line.3885"></a>
<FONT color="green">3886</FONT>        }<a name="line.3886"></a>
<FONT color="green">3887</FONT>    <a name="line.3887"></a>
<FONT color="green">3888</FONT>        /**<a name="line.3888"></a>
<FONT color="green">3889</FONT>         * Returns the closest vulnerable player to this entity within the given radius, or null if none is found<a name="line.3889"></a>
<FONT color="green">3890</FONT>         */<a name="line.3890"></a>
<FONT color="green">3891</FONT>        public EntityPlayer getClosestVulnerablePlayerToEntity(Entity par1Entity, double par2)<a name="line.3891"></a>
<FONT color="green">3892</FONT>        {<a name="line.3892"></a>
<FONT color="green">3893</FONT>            return this.getClosestVulnerablePlayer(par1Entity.posX, par1Entity.posY, par1Entity.posZ, par2);<a name="line.3893"></a>
<FONT color="green">3894</FONT>        }<a name="line.3894"></a>
<FONT color="green">3895</FONT>    <a name="line.3895"></a>
<FONT color="green">3896</FONT>        /**<a name="line.3896"></a>
<FONT color="green">3897</FONT>         * Returns the closest vulnerable player within the given radius, or null if none is found.<a name="line.3897"></a>
<FONT color="green">3898</FONT>         */<a name="line.3898"></a>
<FONT color="green">3899</FONT>        public EntityPlayer getClosestVulnerablePlayer(double par1, double par3, double par5, double par7)<a name="line.3899"></a>
<FONT color="green">3900</FONT>        {<a name="line.3900"></a>
<FONT color="green">3901</FONT>            double var9 = -1.0D;<a name="line.3901"></a>
<FONT color="green">3902</FONT>            EntityPlayer var11 = null;<a name="line.3902"></a>
<FONT color="green">3903</FONT>    <a name="line.3903"></a>
<FONT color="green">3904</FONT>            for (int var12 = 0; var12 &lt; this.playerEntities.size(); ++var12)<a name="line.3904"></a>
<FONT color="green">3905</FONT>            {<a name="line.3905"></a>
<FONT color="green">3906</FONT>                EntityPlayer var13 = (EntityPlayer)this.playerEntities.get(var12);<a name="line.3906"></a>
<FONT color="green">3907</FONT>    <a name="line.3907"></a>
<FONT color="green">3908</FONT>                if (!var13.capabilities.disableDamage)<a name="line.3908"></a>
<FONT color="green">3909</FONT>                {<a name="line.3909"></a>
<FONT color="green">3910</FONT>                    double var14 = var13.getDistanceSq(par1, par3, par5);<a name="line.3910"></a>
<FONT color="green">3911</FONT>                    double var16 = par7;<a name="line.3911"></a>
<FONT color="green">3912</FONT>    <a name="line.3912"></a>
<FONT color="green">3913</FONT>                    if (var13.isSneaking())<a name="line.3913"></a>
<FONT color="green">3914</FONT>                    {<a name="line.3914"></a>
<FONT color="green">3915</FONT>                        var16 = par7 * 0.800000011920929D;<a name="line.3915"></a>
<FONT color="green">3916</FONT>                    }<a name="line.3916"></a>
<FONT color="green">3917</FONT>    <a name="line.3917"></a>
<FONT color="green">3918</FONT>                    if (var13.getHasActivePotion())<a name="line.3918"></a>
<FONT color="green">3919</FONT>                    {<a name="line.3919"></a>
<FONT color="green">3920</FONT>                        float var18 = var13.func_82243_bO();<a name="line.3920"></a>
<FONT color="green">3921</FONT>    <a name="line.3921"></a>
<FONT color="green">3922</FONT>                        if (var18 &lt; 0.1F)<a name="line.3922"></a>
<FONT color="green">3923</FONT>                        {<a name="line.3923"></a>
<FONT color="green">3924</FONT>                            var18 = 0.1F;<a name="line.3924"></a>
<FONT color="green">3925</FONT>                        }<a name="line.3925"></a>
<FONT color="green">3926</FONT>    <a name="line.3926"></a>
<FONT color="green">3927</FONT>                        var16 *= (double)(0.7F * var18);<a name="line.3927"></a>
<FONT color="green">3928</FONT>                    }<a name="line.3928"></a>
<FONT color="green">3929</FONT>    <a name="line.3929"></a>
<FONT color="green">3930</FONT>                    if ((par7 &lt; 0.0D || var14 &lt; var16 * var16) &amp;&amp; (var9 == -1.0D || var14 &lt; var9))<a name="line.3930"></a>
<FONT color="green">3931</FONT>                    {<a name="line.3931"></a>
<FONT color="green">3932</FONT>                        var9 = var14;<a name="line.3932"></a>
<FONT color="green">3933</FONT>                        var11 = var13;<a name="line.3933"></a>
<FONT color="green">3934</FONT>                    }<a name="line.3934"></a>
<FONT color="green">3935</FONT>                }<a name="line.3935"></a>
<FONT color="green">3936</FONT>            }<a name="line.3936"></a>
<FONT color="green">3937</FONT>    <a name="line.3937"></a>
<FONT color="green">3938</FONT>            return var11;<a name="line.3938"></a>
<FONT color="green">3939</FONT>        }<a name="line.3939"></a>
<FONT color="green">3940</FONT>    <a name="line.3940"></a>
<FONT color="green">3941</FONT>        /**<a name="line.3941"></a>
<FONT color="green">3942</FONT>         * Find a player by name in this world.<a name="line.3942"></a>
<FONT color="green">3943</FONT>         */<a name="line.3943"></a>
<FONT color="green">3944</FONT>        public EntityPlayer getPlayerEntityByName(String par1Str)<a name="line.3944"></a>
<FONT color="green">3945</FONT>        {<a name="line.3945"></a>
<FONT color="green">3946</FONT>            for (int var2 = 0; var2 &lt; this.playerEntities.size(); ++var2)<a name="line.3946"></a>
<FONT color="green">3947</FONT>            {<a name="line.3947"></a>
<FONT color="green">3948</FONT>                if (par1Str.equals(((EntityPlayer)this.playerEntities.get(var2)).username))<a name="line.3948"></a>
<FONT color="green">3949</FONT>                {<a name="line.3949"></a>
<FONT color="green">3950</FONT>                    return (EntityPlayer)this.playerEntities.get(var2);<a name="line.3950"></a>
<FONT color="green">3951</FONT>                }<a name="line.3951"></a>
<FONT color="green">3952</FONT>            }<a name="line.3952"></a>
<FONT color="green">3953</FONT>    <a name="line.3953"></a>
<FONT color="green">3954</FONT>            return null;<a name="line.3954"></a>
<FONT color="green">3955</FONT>        }<a name="line.3955"></a>
<FONT color="green">3956</FONT>    <a name="line.3956"></a>
<FONT color="green">3957</FONT>        @SideOnly(Side.CLIENT)<a name="line.3957"></a>
<FONT color="green">3958</FONT>    <a name="line.3958"></a>
<FONT color="green">3959</FONT>        /**<a name="line.3959"></a>
<FONT color="green">3960</FONT>         * If on MP, sends a quitting packet.<a name="line.3960"></a>
<FONT color="green">3961</FONT>         */<a name="line.3961"></a>
<FONT color="green">3962</FONT>        public void sendQuittingDisconnectingPacket() {}<a name="line.3962"></a>
<FONT color="green">3963</FONT>    <a name="line.3963"></a>
<FONT color="green">3964</FONT>        /**<a name="line.3964"></a>
<FONT color="green">3965</FONT>         * Checks whether the session lock file was modified by another process<a name="line.3965"></a>
<FONT color="green">3966</FONT>         */<a name="line.3966"></a>
<FONT color="green">3967</FONT>        public void checkSessionLock() throws MinecraftException<a name="line.3967"></a>
<FONT color="green">3968</FONT>        {<a name="line.3968"></a>
<FONT color="green">3969</FONT>            this.saveHandler.checkSessionLock();<a name="line.3969"></a>
<FONT color="green">3970</FONT>        }<a name="line.3970"></a>
<FONT color="green">3971</FONT>    <a name="line.3971"></a>
<FONT color="green">3972</FONT>        @SideOnly(Side.CLIENT)<a name="line.3972"></a>
<FONT color="green">3973</FONT>        public void func_82738_a(long par1)<a name="line.3973"></a>
<FONT color="green">3974</FONT>        {<a name="line.3974"></a>
<FONT color="green">3975</FONT>            this.worldInfo.incrementTotalWorldTime(par1);<a name="line.3975"></a>
<FONT color="green">3976</FONT>        }<a name="line.3976"></a>
<FONT color="green">3977</FONT>    <a name="line.3977"></a>
<FONT color="green">3978</FONT>        /**<a name="line.3978"></a>
<FONT color="green">3979</FONT>         * Retrieve the world seed from level.dat<a name="line.3979"></a>
<FONT color="green">3980</FONT>         */<a name="line.3980"></a>
<FONT color="green">3981</FONT>        public long getSeed()<a name="line.3981"></a>
<FONT color="green">3982</FONT>        {<a name="line.3982"></a>
<FONT color="green">3983</FONT>            return provider.getSeed();<a name="line.3983"></a>
<FONT color="green">3984</FONT>        }<a name="line.3984"></a>
<FONT color="green">3985</FONT>    <a name="line.3985"></a>
<FONT color="green">3986</FONT>        public long getTotalWorldTime()<a name="line.3986"></a>
<FONT color="green">3987</FONT>        {<a name="line.3987"></a>
<FONT color="green">3988</FONT>            return this.worldInfo.getWorldTotalTime();<a name="line.3988"></a>
<FONT color="green">3989</FONT>        }<a name="line.3989"></a>
<FONT color="green">3990</FONT>    <a name="line.3990"></a>
<FONT color="green">3991</FONT>        public long getWorldTime()<a name="line.3991"></a>
<FONT color="green">3992</FONT>        {<a name="line.3992"></a>
<FONT color="green">3993</FONT>            return provider.getWorldTime();<a name="line.3993"></a>
<FONT color="green">3994</FONT>        }<a name="line.3994"></a>
<FONT color="green">3995</FONT>    <a name="line.3995"></a>
<FONT color="green">3996</FONT>        /**<a name="line.3996"></a>
<FONT color="green">3997</FONT>         * Sets the world time.<a name="line.3997"></a>
<FONT color="green">3998</FONT>         */<a name="line.3998"></a>
<FONT color="green">3999</FONT>        public void setWorldTime(long par1)<a name="line.3999"></a>
<FONT color="green">4000</FONT>        {<a name="line.4000"></a>
<FONT color="green">4001</FONT>            provider.setWorldTime(par1);<a name="line.4001"></a>
<FONT color="green">4002</FONT>        }<a name="line.4002"></a>
<FONT color="green">4003</FONT>    <a name="line.4003"></a>
<FONT color="green">4004</FONT>        /**<a name="line.4004"></a>
<FONT color="green">4005</FONT>         * Returns the coordinates of the spawn point<a name="line.4005"></a>
<FONT color="green">4006</FONT>         */<a name="line.4006"></a>
<FONT color="green">4007</FONT>        public ChunkCoordinates getSpawnPoint()<a name="line.4007"></a>
<FONT color="green">4008</FONT>        {<a name="line.4008"></a>
<FONT color="green">4009</FONT>            return provider.getSpawnPoint();<a name="line.4009"></a>
<FONT color="green">4010</FONT>        }<a name="line.4010"></a>
<FONT color="green">4011</FONT>    <a name="line.4011"></a>
<FONT color="green">4012</FONT>        @SideOnly(Side.CLIENT)<a name="line.4012"></a>
<FONT color="green">4013</FONT>        public void setSpawnLocation(int par1, int par2, int par3)<a name="line.4013"></a>
<FONT color="green">4014</FONT>        {<a name="line.4014"></a>
<FONT color="green">4015</FONT>            provider.setSpawnPoint(par1, par2, par3);<a name="line.4015"></a>
<FONT color="green">4016</FONT>        }<a name="line.4016"></a>
<FONT color="green">4017</FONT>    <a name="line.4017"></a>
<FONT color="green">4018</FONT>        @SideOnly(Side.CLIENT)<a name="line.4018"></a>
<FONT color="green">4019</FONT>    <a name="line.4019"></a>
<FONT color="green">4020</FONT>        /**<a name="line.4020"></a>
<FONT color="green">4021</FONT>         * spwans an entity and loads surrounding chunks<a name="line.4021"></a>
<FONT color="green">4022</FONT>         */<a name="line.4022"></a>
<FONT color="green">4023</FONT>        public void joinEntityInSurroundings(Entity par1Entity)<a name="line.4023"></a>
<FONT color="green">4024</FONT>        {<a name="line.4024"></a>
<FONT color="green">4025</FONT>            int var2 = MathHelper.floor_double(par1Entity.posX / 16.0D);<a name="line.4025"></a>
<FONT color="green">4026</FONT>            int var3 = MathHelper.floor_double(par1Entity.posZ / 16.0D);<a name="line.4026"></a>
<FONT color="green">4027</FONT>            byte var4 = 2;<a name="line.4027"></a>
<FONT color="green">4028</FONT>    <a name="line.4028"></a>
<FONT color="green">4029</FONT>            for (int var5 = var2 - var4; var5 &lt;= var2 + var4; ++var5)<a name="line.4029"></a>
<FONT color="green">4030</FONT>            {<a name="line.4030"></a>
<FONT color="green">4031</FONT>                for (int var6 = var3 - var4; var6 &lt;= var3 + var4; ++var6)<a name="line.4031"></a>
<FONT color="green">4032</FONT>                {<a name="line.4032"></a>
<FONT color="green">4033</FONT>                    this.getChunkFromChunkCoords(var5, var6);<a name="line.4033"></a>
<FONT color="green">4034</FONT>                }<a name="line.4034"></a>
<FONT color="green">4035</FONT>            }<a name="line.4035"></a>
<FONT color="green">4036</FONT>    <a name="line.4036"></a>
<FONT color="green">4037</FONT>            if (!this.loadedEntityList.contains(par1Entity))<a name="line.4037"></a>
<FONT color="green">4038</FONT>            {<a name="line.4038"></a>
<FONT color="green">4039</FONT>                if (!MinecraftForge.EVENT_BUS.post(new EntityJoinWorldEvent(par1Entity, this)))<a name="line.4039"></a>
<FONT color="green">4040</FONT>                {<a name="line.4040"></a>
<FONT color="green">4041</FONT>                    loadedEntityList.add(par1Entity);<a name="line.4041"></a>
<FONT color="green">4042</FONT>                }<a name="line.4042"></a>
<FONT color="green">4043</FONT>            }<a name="line.4043"></a>
<FONT color="green">4044</FONT>        }<a name="line.4044"></a>
<FONT color="green">4045</FONT>    <a name="line.4045"></a>
<FONT color="green">4046</FONT>        /**<a name="line.4046"></a>
<FONT color="green">4047</FONT>         * Called when checking if a certain block can be mined or not. The 'spawn safe zone' check is located here.<a name="line.4047"></a>
<FONT color="green">4048</FONT>         */<a name="line.4048"></a>
<FONT color="green">4049</FONT>        public boolean canMineBlock(EntityPlayer par1EntityPlayer, int par2, int par3, int par4)<a name="line.4049"></a>
<FONT color="green">4050</FONT>        {<a name="line.4050"></a>
<FONT color="green">4051</FONT>            return provider.canMineBlock(par1EntityPlayer, par2, par3, par4);<a name="line.4051"></a>
<FONT color="green">4052</FONT>        }<a name="line.4052"></a>
<FONT color="green">4053</FONT>    <a name="line.4053"></a>
<FONT color="green">4054</FONT>        public boolean canMineBlockBody(EntityPlayer par1EntityPlayer, int par2, int par3, int par4)<a name="line.4054"></a>
<FONT color="green">4055</FONT>        {<a name="line.4055"></a>
<FONT color="green">4056</FONT>            return true;<a name="line.4056"></a>
<FONT color="green">4057</FONT>        }<a name="line.4057"></a>
<FONT color="green">4058</FONT>    <a name="line.4058"></a>
<FONT color="green">4059</FONT>        /**<a name="line.4059"></a>
<FONT color="green">4060</FONT>         * sends a Packet 38 (Entity Status) to all tracked players of that entity<a name="line.4060"></a>
<FONT color="green">4061</FONT>         */<a name="line.4061"></a>
<FONT color="green">4062</FONT>        public void setEntityState(Entity par1Entity, byte par2) {}<a name="line.4062"></a>
<FONT color="green">4063</FONT>    <a name="line.4063"></a>
<FONT color="green">4064</FONT>        /**<a name="line.4064"></a>
<FONT color="green">4065</FONT>         * gets the IChunkProvider this world uses.<a name="line.4065"></a>
<FONT color="green">4066</FONT>         */<a name="line.4066"></a>
<FONT color="green">4067</FONT>        public IChunkProvider getChunkProvider()<a name="line.4067"></a>
<FONT color="green">4068</FONT>        {<a name="line.4068"></a>
<FONT color="green">4069</FONT>            return this.chunkProvider;<a name="line.4069"></a>
<FONT color="green">4070</FONT>        }<a name="line.4070"></a>
<FONT color="green">4071</FONT>    <a name="line.4071"></a>
<FONT color="green">4072</FONT>        /**<a name="line.4072"></a>
<FONT color="green">4073</FONT>         * Adds a block event with the given Args to the blockEventCache. During the next tick(), the block specified will<a name="line.4073"></a>
<FONT color="green">4074</FONT>         * have its onBlockEvent handler called with the given parameters. Args: X,Y,Z, BlockID, EventID, EventParameter<a name="line.4074"></a>
<FONT color="green">4075</FONT>         */<a name="line.4075"></a>
<FONT color="green">4076</FONT>        public void addBlockEvent(int par1, int par2, int par3, int par4, int par5, int par6)<a name="line.4076"></a>
<FONT color="green">4077</FONT>        {<a name="line.4077"></a>
<FONT color="green">4078</FONT>            if (par4 &gt; 0)<a name="line.4078"></a>
<FONT color="green">4079</FONT>            {<a name="line.4079"></a>
<FONT color="green">4080</FONT>                Block.blocksList[par4].onBlockEventReceived(this, par1, par2, par3, par5, par6);<a name="line.4080"></a>
<FONT color="green">4081</FONT>            }<a name="line.4081"></a>
<FONT color="green">4082</FONT>        }<a name="line.4082"></a>
<FONT color="green">4083</FONT>    <a name="line.4083"></a>
<FONT color="green">4084</FONT>        /**<a name="line.4084"></a>
<FONT color="green">4085</FONT>         * Returns this world's current save handler<a name="line.4085"></a>
<FONT color="green">4086</FONT>         */<a name="line.4086"></a>
<FONT color="green">4087</FONT>        public ISaveHandler getSaveHandler()<a name="line.4087"></a>
<FONT color="green">4088</FONT>        {<a name="line.4088"></a>
<FONT color="green">4089</FONT>            return this.saveHandler;<a name="line.4089"></a>
<FONT color="green">4090</FONT>        }<a name="line.4090"></a>
<FONT color="green">4091</FONT>    <a name="line.4091"></a>
<FONT color="green">4092</FONT>        /**<a name="line.4092"></a>
<FONT color="green">4093</FONT>         * Gets the World's WorldInfo instance<a name="line.4093"></a>
<FONT color="green">4094</FONT>         */<a name="line.4094"></a>
<FONT color="green">4095</FONT>        public WorldInfo getWorldInfo()<a name="line.4095"></a>
<FONT color="green">4096</FONT>        {<a name="line.4096"></a>
<FONT color="green">4097</FONT>            return this.worldInfo;<a name="line.4097"></a>
<FONT color="green">4098</FONT>        }<a name="line.4098"></a>
<FONT color="green">4099</FONT>    <a name="line.4099"></a>
<FONT color="green">4100</FONT>        /**<a name="line.4100"></a>
<FONT color="green">4101</FONT>         * Gets the GameRules instance<a name="line.4101"></a>
<FONT color="green">4102</FONT>         */<a name="line.4102"></a>
<FONT color="green">4103</FONT>        public GameRules getGameRules()<a name="line.4103"></a>
<FONT color="green">4104</FONT>        {<a name="line.4104"></a>
<FONT color="green">4105</FONT>            return this.worldInfo.getGameRulesInstance();<a name="line.4105"></a>
<FONT color="green">4106</FONT>        }<a name="line.4106"></a>
<FONT color="green">4107</FONT>    <a name="line.4107"></a>
<FONT color="green">4108</FONT>        /**<a name="line.4108"></a>
<FONT color="green">4109</FONT>         * Updates the flag that indicates whether or not all players in the world are sleeping.<a name="line.4109"></a>
<FONT color="green">4110</FONT>         */<a name="line.4110"></a>
<FONT color="green">4111</FONT>        public void updateAllPlayersSleepingFlag() {}<a name="line.4111"></a>
<FONT color="green">4112</FONT>    <a name="line.4112"></a>
<FONT color="green">4113</FONT>        public float getWeightedThunderStrength(float par1)<a name="line.4113"></a>
<FONT color="green">4114</FONT>        {<a name="line.4114"></a>
<FONT color="green">4115</FONT>            return (this.prevThunderingStrength + (this.thunderingStrength - this.prevThunderingStrength) * par1) * this.getRainStrength(par1);<a name="line.4115"></a>
<FONT color="green">4116</FONT>        }<a name="line.4116"></a>
<FONT color="green">4117</FONT>    <a name="line.4117"></a>
<FONT color="green">4118</FONT>        /**<a name="line.4118"></a>
<FONT color="green">4119</FONT>         * Not sure about this actually. Reverting this one myself.<a name="line.4119"></a>
<FONT color="green">4120</FONT>         */<a name="line.4120"></a>
<FONT color="green">4121</FONT>        public float getRainStrength(float par1)<a name="line.4121"></a>
<FONT color="green">4122</FONT>        {<a name="line.4122"></a>
<FONT color="green">4123</FONT>            return this.prevRainingStrength + (this.rainingStrength - this.prevRainingStrength) * par1;<a name="line.4123"></a>
<FONT color="green">4124</FONT>        }<a name="line.4124"></a>
<FONT color="green">4125</FONT>    <a name="line.4125"></a>
<FONT color="green">4126</FONT>        @SideOnly(Side.CLIENT)<a name="line.4126"></a>
<FONT color="green">4127</FONT>        public void setRainStrength(float par1)<a name="line.4127"></a>
<FONT color="green">4128</FONT>        {<a name="line.4128"></a>
<FONT color="green">4129</FONT>            this.prevRainingStrength = par1;<a name="line.4129"></a>
<FONT color="green">4130</FONT>            this.rainingStrength = par1;<a name="line.4130"></a>
<FONT color="green">4131</FONT>        }<a name="line.4131"></a>
<FONT color="green">4132</FONT>    <a name="line.4132"></a>
<FONT color="green">4133</FONT>        /**<a name="line.4133"></a>
<FONT color="green">4134</FONT>         * Returns true if the current thunder strength (weighted with the rain strength) is greater than 0.9<a name="line.4134"></a>
<FONT color="green">4135</FONT>         */<a name="line.4135"></a>
<FONT color="green">4136</FONT>        public boolean isThundering()<a name="line.4136"></a>
<FONT color="green">4137</FONT>        {<a name="line.4137"></a>
<FONT color="green">4138</FONT>            return (double)this.getWeightedThunderStrength(1.0F) &gt; 0.9D;<a name="line.4138"></a>
<FONT color="green">4139</FONT>        }<a name="line.4139"></a>
<FONT color="green">4140</FONT>    <a name="line.4140"></a>
<FONT color="green">4141</FONT>        /**<a name="line.4141"></a>
<FONT color="green">4142</FONT>         * Returns true if the current rain strength is greater than 0.2<a name="line.4142"></a>
<FONT color="green">4143</FONT>         */<a name="line.4143"></a>
<FONT color="green">4144</FONT>        public boolean isRaining()<a name="line.4144"></a>
<FONT color="green">4145</FONT>        {<a name="line.4145"></a>
<FONT color="green">4146</FONT>            return (double)this.getRainStrength(1.0F) &gt; 0.2D;<a name="line.4146"></a>
<FONT color="green">4147</FONT>        }<a name="line.4147"></a>
<FONT color="green">4148</FONT>    <a name="line.4148"></a>
<FONT color="green">4149</FONT>        public boolean canLightningStrikeAt(int par1, int par2, int par3)<a name="line.4149"></a>
<FONT color="green">4150</FONT>        {<a name="line.4150"></a>
<FONT color="green">4151</FONT>            if (!this.isRaining())<a name="line.4151"></a>
<FONT color="green">4152</FONT>            {<a name="line.4152"></a>
<FONT color="green">4153</FONT>                return false;<a name="line.4153"></a>
<FONT color="green">4154</FONT>            }<a name="line.4154"></a>
<FONT color="green">4155</FONT>            else if (!this.canBlockSeeTheSky(par1, par2, par3))<a name="line.4155"></a>
<FONT color="green">4156</FONT>            {<a name="line.4156"></a>
<FONT color="green">4157</FONT>                return false;<a name="line.4157"></a>
<FONT color="green">4158</FONT>            }<a name="line.4158"></a>
<FONT color="green">4159</FONT>            else if (this.getPrecipitationHeight(par1, par3) &gt; par2)<a name="line.4159"></a>
<FONT color="green">4160</FONT>            {<a name="line.4160"></a>
<FONT color="green">4161</FONT>                return false;<a name="line.4161"></a>
<FONT color="green">4162</FONT>            }<a name="line.4162"></a>
<FONT color="green">4163</FONT>            else<a name="line.4163"></a>
<FONT color="green">4164</FONT>            {<a name="line.4164"></a>
<FONT color="green">4165</FONT>                BiomeGenBase var4 = this.getBiomeGenForCoords(par1, par3);<a name="line.4165"></a>
<FONT color="green">4166</FONT>                return var4.getEnableSnow() ? false : var4.canSpawnLightningBolt();<a name="line.4166"></a>
<FONT color="green">4167</FONT>            }<a name="line.4167"></a>
<FONT color="green">4168</FONT>        }<a name="line.4168"></a>
<FONT color="green">4169</FONT>    <a name="line.4169"></a>
<FONT color="green">4170</FONT>        /**<a name="line.4170"></a>
<FONT color="green">4171</FONT>         * Checks to see if the biome rainfall values for a given x,y,z coordinate set are extremely high<a name="line.4171"></a>
<FONT color="green">4172</FONT>         */<a name="line.4172"></a>
<FONT color="green">4173</FONT>        public boolean isBlockHighHumidity(int par1, int par2, int par3)<a name="line.4173"></a>
<FONT color="green">4174</FONT>        {<a name="line.4174"></a>
<FONT color="green">4175</FONT>            return provider.isBlockHighHumidity(par1, par2, par3);<a name="line.4175"></a>
<FONT color="green">4176</FONT>        }<a name="line.4176"></a>
<FONT color="green">4177</FONT>    <a name="line.4177"></a>
<FONT color="green">4178</FONT>        /**<a name="line.4178"></a>
<FONT color="green">4179</FONT>         * Assigns the given String id to the given MapDataBase using the MapStorage, removing any existing ones of the same<a name="line.4179"></a>
<FONT color="green">4180</FONT>         * id.<a name="line.4180"></a>
<FONT color="green">4181</FONT>         */<a name="line.4181"></a>
<FONT color="green">4182</FONT>        public void setItemData(String par1Str, WorldSavedData par2WorldSavedData)<a name="line.4182"></a>
<FONT color="green">4183</FONT>        {<a name="line.4183"></a>
<FONT color="green">4184</FONT>            this.mapStorage.setData(par1Str, par2WorldSavedData);<a name="line.4184"></a>
<FONT color="green">4185</FONT>        }<a name="line.4185"></a>
<FONT color="green">4186</FONT>    <a name="line.4186"></a>
<FONT color="green">4187</FONT>        /**<a name="line.4187"></a>
<FONT color="green">4188</FONT>         * Loads an existing MapDataBase corresponding to the given String id from disk using the MapStorage, instantiating<a name="line.4188"></a>
<FONT color="green">4189</FONT>         * the given Class, or returns null if none such file exists. args: Class to instantiate, String dataid<a name="line.4189"></a>
<FONT color="green">4190</FONT>         */<a name="line.4190"></a>
<FONT color="green">4191</FONT>        public WorldSavedData loadItemData(Class par1Class, String par2Str)<a name="line.4191"></a>
<FONT color="green">4192</FONT>        {<a name="line.4192"></a>
<FONT color="green">4193</FONT>            return this.mapStorage.loadData(par1Class, par2Str);<a name="line.4193"></a>
<FONT color="green">4194</FONT>        }<a name="line.4194"></a>
<FONT color="green">4195</FONT>    <a name="line.4195"></a>
<FONT color="green">4196</FONT>        /**<a name="line.4196"></a>
<FONT color="green">4197</FONT>         * Returns an unique new data id from the MapStorage for the given prefix and saves the idCounts map to the<a name="line.4197"></a>
<FONT color="green">4198</FONT>         * 'idcounts' file.<a name="line.4198"></a>
<FONT color="green">4199</FONT>         */<a name="line.4199"></a>
<FONT color="green">4200</FONT>        public int getUniqueDataId(String par1Str)<a name="line.4200"></a>
<FONT color="green">4201</FONT>        {<a name="line.4201"></a>
<FONT color="green">4202</FONT>            return this.mapStorage.getUniqueDataId(par1Str);<a name="line.4202"></a>
<FONT color="green">4203</FONT>        }<a name="line.4203"></a>
<FONT color="green">4204</FONT>    <a name="line.4204"></a>
<FONT color="green">4205</FONT>        public void func_82739_e(int par1, int par2, int par3, int par4, int par5)<a name="line.4205"></a>
<FONT color="green">4206</FONT>        {<a name="line.4206"></a>
<FONT color="green">4207</FONT>            for (int var6 = 0; var6 &lt; this.worldAccesses.size(); ++var6)<a name="line.4207"></a>
<FONT color="green">4208</FONT>            {<a name="line.4208"></a>
<FONT color="green">4209</FONT>                ((IWorldAccess)this.worldAccesses.get(var6)).broadcastSound(par1, par2, par3, par4, par5);<a name="line.4209"></a>
<FONT color="green">4210</FONT>            }<a name="line.4210"></a>
<FONT color="green">4211</FONT>        }<a name="line.4211"></a>
<FONT color="green">4212</FONT>    <a name="line.4212"></a>
<FONT color="green">4213</FONT>        /**<a name="line.4213"></a>
<FONT color="green">4214</FONT>         * See description for playAuxSFX.<a name="line.4214"></a>
<FONT color="green">4215</FONT>         */<a name="line.4215"></a>
<FONT color="green">4216</FONT>        public void playAuxSFX(int par1, int par2, int par3, int par4, int par5)<a name="line.4216"></a>
<FONT color="green">4217</FONT>        {<a name="line.4217"></a>
<FONT color="green">4218</FONT>            this.playAuxSFXAtEntity((EntityPlayer)null, par1, par2, par3, par4, par5);<a name="line.4218"></a>
<FONT color="green">4219</FONT>        }<a name="line.4219"></a>
<FONT color="green">4220</FONT>    <a name="line.4220"></a>
<FONT color="green">4221</FONT>        /**<a name="line.4221"></a>
<FONT color="green">4222</FONT>         * See description for playAuxSFX.<a name="line.4222"></a>
<FONT color="green">4223</FONT>         */<a name="line.4223"></a>
<FONT color="green">4224</FONT>        public void playAuxSFXAtEntity(EntityPlayer par1EntityPlayer, int par2, int par3, int par4, int par5, int par6)<a name="line.4224"></a>
<FONT color="green">4225</FONT>        {<a name="line.4225"></a>
<FONT color="green">4226</FONT>            for (int var7 = 0; var7 &lt; this.worldAccesses.size(); ++var7)<a name="line.4226"></a>
<FONT color="green">4227</FONT>            {<a name="line.4227"></a>
<FONT color="green">4228</FONT>                ((IWorldAccess)this.worldAccesses.get(var7)).playAuxSFX(par1EntityPlayer, par2, par3, par4, par5, par6);<a name="line.4228"></a>
<FONT color="green">4229</FONT>            }<a name="line.4229"></a>
<FONT color="green">4230</FONT>        }<a name="line.4230"></a>
<FONT color="green">4231</FONT>    <a name="line.4231"></a>
<FONT color="green">4232</FONT>        /**<a name="line.4232"></a>
<FONT color="green">4233</FONT>         * Returns current world height.<a name="line.4233"></a>
<FONT color="green">4234</FONT>         */<a name="line.4234"></a>
<FONT color="green">4235</FONT>        public int getHeight()<a name="line.4235"></a>
<FONT color="green">4236</FONT>        {<a name="line.4236"></a>
<FONT color="green">4237</FONT>            return provider.getHeight();<a name="line.4237"></a>
<FONT color="green">4238</FONT>        }<a name="line.4238"></a>
<FONT color="green">4239</FONT>    <a name="line.4239"></a>
<FONT color="green">4240</FONT>        /**<a name="line.4240"></a>
<FONT color="green">4241</FONT>         * Returns current world height.<a name="line.4241"></a>
<FONT color="green">4242</FONT>         */<a name="line.4242"></a>
<FONT color="green">4243</FONT>        public int getActualHeight()<a name="line.4243"></a>
<FONT color="green">4244</FONT>        {<a name="line.4244"></a>
<FONT color="green">4245</FONT>            return provider.getActualHeight();<a name="line.4245"></a>
<FONT color="green">4246</FONT>        }<a name="line.4246"></a>
<FONT color="green">4247</FONT>    <a name="line.4247"></a>
<FONT color="green">4248</FONT>        public IUpdatePlayerListBox func_82735_a(EntityMinecart par1EntityMinecart)<a name="line.4248"></a>
<FONT color="green">4249</FONT>        {<a name="line.4249"></a>
<FONT color="green">4250</FONT>            return null;<a name="line.4250"></a>
<FONT color="green">4251</FONT>        }<a name="line.4251"></a>
<FONT color="green">4252</FONT>    <a name="line.4252"></a>
<FONT color="green">4253</FONT>        /**<a name="line.4253"></a>
<FONT color="green">4254</FONT>         * puts the World Random seed to a specific state dependant on the inputs<a name="line.4254"></a>
<FONT color="green">4255</FONT>         */<a name="line.4255"></a>
<FONT color="green">4256</FONT>        public Random setRandomSeed(int par1, int par2, int par3)<a name="line.4256"></a>
<FONT color="green">4257</FONT>        {<a name="line.4257"></a>
<FONT color="green">4258</FONT>            long var4 = (long)par1 * 341873128712L + (long)par2 * 132897987541L + this.getWorldInfo().getSeed() + (long)par3;<a name="line.4258"></a>
<FONT color="green">4259</FONT>            this.rand.setSeed(var4);<a name="line.4259"></a>
<FONT color="green">4260</FONT>            return this.rand;<a name="line.4260"></a>
<FONT color="green">4261</FONT>        }<a name="line.4261"></a>
<FONT color="green">4262</FONT>    <a name="line.4262"></a>
<FONT color="green">4263</FONT>        /**<a name="line.4263"></a>
<FONT color="green">4264</FONT>         * Returns the location of the closest structure of the specified type. If not found returns null.<a name="line.4264"></a>
<FONT color="green">4265</FONT>         */<a name="line.4265"></a>
<FONT color="green">4266</FONT>        public ChunkPosition findClosestStructure(String par1Str, int par2, int par3, int par4)<a name="line.4266"></a>
<FONT color="green">4267</FONT>        {<a name="line.4267"></a>
<FONT color="green">4268</FONT>            return this.getChunkProvider().findClosestStructure(this, par1Str, par2, par3, par4);<a name="line.4268"></a>
<FONT color="green">4269</FONT>        }<a name="line.4269"></a>
<FONT color="green">4270</FONT>    <a name="line.4270"></a>
<FONT color="green">4271</FONT>        @SideOnly(Side.CLIENT)<a name="line.4271"></a>
<FONT color="green">4272</FONT>    <a name="line.4272"></a>
<FONT color="green">4273</FONT>        /**<a name="line.4273"></a>
<FONT color="green">4274</FONT>         * set by !chunk.getAreLevelsEmpty<a name="line.4274"></a>
<FONT color="green">4275</FONT>         */<a name="line.4275"></a>
<FONT color="green">4276</FONT>        public boolean extendedLevelsInChunkCache()<a name="line.4276"></a>
<FONT color="green">4277</FONT>        {<a name="line.4277"></a>
<FONT color="green">4278</FONT>            return false;<a name="line.4278"></a>
<FONT color="green">4279</FONT>        }<a name="line.4279"></a>
<FONT color="green">4280</FONT>    <a name="line.4280"></a>
<FONT color="green">4281</FONT>        @SideOnly(Side.CLIENT)<a name="line.4281"></a>
<FONT color="green">4282</FONT>    <a name="line.4282"></a>
<FONT color="green">4283</FONT>        /**<a name="line.4283"></a>
<FONT color="green">4284</FONT>         * Returns horizon height for use in rendering the sky.<a name="line.4284"></a>
<FONT color="green">4285</FONT>         */<a name="line.4285"></a>
<FONT color="green">4286</FONT>        public double getHorizon()<a name="line.4286"></a>
<FONT color="green">4287</FONT>        {<a name="line.4287"></a>
<FONT color="green">4288</FONT>            return provider.getHorizon();<a name="line.4288"></a>
<FONT color="green">4289</FONT>        }<a name="line.4289"></a>
<FONT color="green">4290</FONT>    <a name="line.4290"></a>
<FONT color="green">4291</FONT>        /**<a name="line.4291"></a>
<FONT color="green">4292</FONT>         * Adds some basic stats of the world to the given crash report.<a name="line.4292"></a>
<FONT color="green">4293</FONT>         */<a name="line.4293"></a>
<FONT color="green">4294</FONT>        public CrashReportCategory addWorldInfoToCrashReport(CrashReport par1CrashReport)<a name="line.4294"></a>
<FONT color="green">4295</FONT>        {<a name="line.4295"></a>
<FONT color="green">4296</FONT>            CrashReportCategory var2 = par1CrashReport.func_85057_a("Affected level", 1);<a name="line.4296"></a>
<FONT color="green">4297</FONT>            var2.addCrashSection("Level name", this.worldInfo == null ? "????" : this.worldInfo.getWorldName());<a name="line.4297"></a>
<FONT color="green">4298</FONT>            var2.addCrashSectionCallable("All players", new CallableLvl2(this));<a name="line.4298"></a>
<FONT color="green">4299</FONT>            var2.addCrashSectionCallable("Chunk stats", new CallableLvl3(this));<a name="line.4299"></a>
<FONT color="green">4300</FONT>    <a name="line.4300"></a>
<FONT color="green">4301</FONT>            try<a name="line.4301"></a>
<FONT color="green">4302</FONT>            {<a name="line.4302"></a>
<FONT color="green">4303</FONT>                this.worldInfo.func_85118_a(var2);<a name="line.4303"></a>
<FONT color="green">4304</FONT>            }<a name="line.4304"></a>
<FONT color="green">4305</FONT>            catch (Throwable var4)<a name="line.4305"></a>
<FONT color="green">4306</FONT>            {<a name="line.4306"></a>
<FONT color="green">4307</FONT>                var2.addCrashSectionThrowable("Level Data Unobtainable", var4);<a name="line.4307"></a>
<FONT color="green">4308</FONT>            }<a name="line.4308"></a>
<FONT color="green">4309</FONT>    <a name="line.4309"></a>
<FONT color="green">4310</FONT>            return var2;<a name="line.4310"></a>
<FONT color="green">4311</FONT>        }<a name="line.4311"></a>
<FONT color="green">4312</FONT>    <a name="line.4312"></a>
<FONT color="green">4313</FONT>        /**<a name="line.4313"></a>
<FONT color="green">4314</FONT>         * Starts (or continues) destroying a block with given ID at the given coordinates for the given partially destroyed<a name="line.4314"></a>
<FONT color="green">4315</FONT>         * value<a name="line.4315"></a>
<FONT color="green">4316</FONT>         */<a name="line.4316"></a>
<FONT color="green">4317</FONT>        public void destroyBlockInWorldPartially(int par1, int par2, int par3, int par4, int par5)<a name="line.4317"></a>
<FONT color="green">4318</FONT>        {<a name="line.4318"></a>
<FONT color="green">4319</FONT>            for (int var6 = 0; var6 &lt; this.worldAccesses.size(); ++var6)<a name="line.4319"></a>
<FONT color="green">4320</FONT>            {<a name="line.4320"></a>
<FONT color="green">4321</FONT>                IWorldAccess var7 = (IWorldAccess)this.worldAccesses.get(var6);<a name="line.4321"></a>
<FONT color="green">4322</FONT>                var7.destroyBlockPartially(par1, par2, par3, par4, par5);<a name="line.4322"></a>
<FONT color="green">4323</FONT>            }<a name="line.4323"></a>
<FONT color="green">4324</FONT>        }<a name="line.4324"></a>
<FONT color="green">4325</FONT>    <a name="line.4325"></a>
<FONT color="green">4326</FONT>        /**<a name="line.4326"></a>
<FONT color="green">4327</FONT>         * Return the Vec3Pool object for this world.<a name="line.4327"></a>
<FONT color="green">4328</FONT>         */<a name="line.4328"></a>
<FONT color="green">4329</FONT>        public Vec3Pool getWorldVec3Pool()<a name="line.4329"></a>
<FONT color="green">4330</FONT>        {<a name="line.4330"></a>
<FONT color="green">4331</FONT>            return this.vecPool;<a name="line.4331"></a>
<FONT color="green">4332</FONT>        }<a name="line.4332"></a>
<FONT color="green">4333</FONT>    <a name="line.4333"></a>
<FONT color="green">4334</FONT>        /**<a name="line.4334"></a>
<FONT color="green">4335</FONT>         * returns a calendar object containing the current date<a name="line.4335"></a>
<FONT color="green">4336</FONT>         */<a name="line.4336"></a>
<FONT color="green">4337</FONT>        public Calendar getCurrentDate()<a name="line.4337"></a>
<FONT color="green">4338</FONT>        {<a name="line.4338"></a>
<FONT color="green">4339</FONT>            if (this.getTotalWorldTime() % 600L == 0L)<a name="line.4339"></a>
<FONT color="green">4340</FONT>            {<a name="line.4340"></a>
<FONT color="green">4341</FONT>                this.theCalendar.setTimeInMillis(System.currentTimeMillis());<a name="line.4341"></a>
<FONT color="green">4342</FONT>            }<a name="line.4342"></a>
<FONT color="green">4343</FONT>    <a name="line.4343"></a>
<FONT color="green">4344</FONT>            return this.theCalendar;<a name="line.4344"></a>
<FONT color="green">4345</FONT>        }<a name="line.4345"></a>
<FONT color="green">4346</FONT>    <a name="line.4346"></a>
<FONT color="green">4347</FONT>        /**<a name="line.4347"></a>
<FONT color="green">4348</FONT>         * Adds a single TileEntity to the world.<a name="line.4348"></a>
<FONT color="green">4349</FONT>         * @param entity The TileEntity to be added.<a name="line.4349"></a>
<FONT color="green">4350</FONT>         */<a name="line.4350"></a>
<FONT color="green">4351</FONT>        public void addTileEntity(TileEntity entity)<a name="line.4351"></a>
<FONT color="green">4352</FONT>        {<a name="line.4352"></a>
<FONT color="green">4353</FONT>            List dest = scanningTileEntities ? addedTileEntityList : loadedTileEntityList;<a name="line.4353"></a>
<FONT color="green">4354</FONT>            if(entity.canUpdate())<a name="line.4354"></a>
<FONT color="green">4355</FONT>            {<a name="line.4355"></a>
<FONT color="green">4356</FONT>                dest.add(entity);<a name="line.4356"></a>
<FONT color="green">4357</FONT>            }<a name="line.4357"></a>
<FONT color="green">4358</FONT>        }<a name="line.4358"></a>
<FONT color="green">4359</FONT>    <a name="line.4359"></a>
<FONT color="green">4360</FONT>        /**<a name="line.4360"></a>
<FONT color="green">4361</FONT>         * Determine if the given block is considered solid on the<a name="line.4361"></a>
<FONT color="green">4362</FONT>         * specified side.  Used by placement logic.<a name="line.4362"></a>
<FONT color="green">4363</FONT>         *<a name="line.4363"></a>
<FONT color="green">4364</FONT>         * @param X Block X Position<a name="line.4364"></a>
<FONT color="green">4365</FONT>         * @param Y Block Y Position<a name="line.4365"></a>
<FONT color="green">4366</FONT>         * @param Z Block Z Position<a name="line.4366"></a>
<FONT color="green">4367</FONT>         * @param side The Side in question<a name="line.4367"></a>
<FONT color="green">4368</FONT>         * @return True if the side is solid<a name="line.4368"></a>
<FONT color="green">4369</FONT>         */<a name="line.4369"></a>
<FONT color="green">4370</FONT>        public boolean isBlockSolidOnSide(int X, int Y, int Z, ForgeDirection side)<a name="line.4370"></a>
<FONT color="green">4371</FONT>        {<a name="line.4371"></a>
<FONT color="green">4372</FONT>            return isBlockSolidOnSide(X, Y, Z, side, false);<a name="line.4372"></a>
<FONT color="green">4373</FONT>        }<a name="line.4373"></a>
<FONT color="green">4374</FONT>    <a name="line.4374"></a>
<FONT color="green">4375</FONT>        /**<a name="line.4375"></a>
<FONT color="green">4376</FONT>         * Determine if the given block is considered solid on the<a name="line.4376"></a>
<FONT color="green">4377</FONT>         * specified side.  Used by placement logic.<a name="line.4377"></a>
<FONT color="green">4378</FONT>         *<a name="line.4378"></a>
<FONT color="green">4379</FONT>         * @param X Block X Position<a name="line.4379"></a>
<FONT color="green">4380</FONT>         * @param Y Block Y Position<a name="line.4380"></a>
<FONT color="green">4381</FONT>         * @param Z Block Z Position<a name="line.4381"></a>
<FONT color="green">4382</FONT>         * @param side The Side in question<a name="line.4382"></a>
<FONT color="green">4383</FONT>         * @param _default The defult to return if the block doesn't exist.<a name="line.4383"></a>
<FONT color="green">4384</FONT>         * @return True if the side is solid<a name="line.4384"></a>
<FONT color="green">4385</FONT>         */<a name="line.4385"></a>
<FONT color="green">4386</FONT>        public boolean isBlockSolidOnSide(int X, int Y, int Z, ForgeDirection side, boolean _default)<a name="line.4386"></a>
<FONT color="green">4387</FONT>        {<a name="line.4387"></a>
<FONT color="green">4388</FONT>            if (X &lt; -30000000 || Z &lt; -30000000 || X &gt;= 30000000 || Z &gt;= 30000000)<a name="line.4388"></a>
<FONT color="green">4389</FONT>            {<a name="line.4389"></a>
<FONT color="green">4390</FONT>                return _default;<a name="line.4390"></a>
<FONT color="green">4391</FONT>            }<a name="line.4391"></a>
<FONT color="green">4392</FONT>    <a name="line.4392"></a>
<FONT color="green">4393</FONT>            Chunk var5 = this.chunkProvider.provideChunk(X &gt;&gt; 4, Z &gt;&gt; 4);<a name="line.4393"></a>
<FONT color="green">4394</FONT>            if (var5 == null || var5.isEmpty())<a name="line.4394"></a>
<FONT color="green">4395</FONT>            {<a name="line.4395"></a>
<FONT color="green">4396</FONT>                return _default;<a name="line.4396"></a>
<FONT color="green">4397</FONT>            }<a name="line.4397"></a>
<FONT color="green">4398</FONT>    <a name="line.4398"></a>
<FONT color="green">4399</FONT>            Block block = Block.blocksList[getBlockId(X, Y, Z)];<a name="line.4399"></a>
<FONT color="green">4400</FONT>            if(block == null)<a name="line.4400"></a>
<FONT color="green">4401</FONT>            {<a name="line.4401"></a>
<FONT color="green">4402</FONT>                return false;<a name="line.4402"></a>
<FONT color="green">4403</FONT>            }<a name="line.4403"></a>
<FONT color="green">4404</FONT>    <a name="line.4404"></a>
<FONT color="green">4405</FONT>            return block.isBlockSolidOnSide(this, X, Y, Z, side);<a name="line.4405"></a>
<FONT color="green">4406</FONT>        }<a name="line.4406"></a>
<FONT color="green">4407</FONT>    <a name="line.4407"></a>
<FONT color="green">4408</FONT>        /**<a name="line.4408"></a>
<FONT color="green">4409</FONT>         * Get the persistent chunks for this world<a name="line.4409"></a>
<FONT color="green">4410</FONT>         *<a name="line.4410"></a>
<FONT color="green">4411</FONT>         * @return<a name="line.4411"></a>
<FONT color="green">4412</FONT>         */<a name="line.4412"></a>
<FONT color="green">4413</FONT>        public ImmutableSetMultimap&lt;ChunkCoordIntPair, Ticket&gt; getPersistentChunks()<a name="line.4413"></a>
<FONT color="green">4414</FONT>        {<a name="line.4414"></a>
<FONT color="green">4415</FONT>            return ForgeChunkManager.getPersistentChunksFor(this);<a name="line.4415"></a>
<FONT color="green">4416</FONT>        }<a name="line.4416"></a>
<FONT color="green">4417</FONT>    }<a name="line.4417"></a>




























































</PRE>
</BODY>
</HTML>
